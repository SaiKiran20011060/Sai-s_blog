function Aw(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function ab(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ob={exports:{}},ud={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iw=Symbol.for("react.transitional.element"),Cw=Symbol.for("react.fragment");function lb(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var r in e)r!=="key"&&(n[r]=e[r])}else n=e;return e=n.ref,{$$typeof:Iw,type:t,key:i,ref:e!==void 0?e:null,props:n}}ud.Fragment=Cw;ud.jsx=lb;ud.jsxs=lb;ob.exports=ud;var u=ob.exports,cb={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fp=Symbol.for("react.transitional.element"),Rw=Symbol.for("react.portal"),Dw=Symbol.for("react.fragment"),Mw=Symbol.for("react.strict_mode"),Ow=Symbol.for("react.profiler"),jw=Symbol.for("react.consumer"),kw=Symbol.for("react.context"),Nw=Symbol.for("react.forward_ref"),Vw=Symbol.for("react.suspense"),Pw=Symbol.for("react.memo"),ub=Symbol.for("react.lazy"),Lw=Symbol.for("react.activity"),Fy=Symbol.iterator;function Uw(t){return t===null||typeof t!="object"?null:(t=Fy&&t[Fy]||t["@@iterator"],typeof t=="function"?t:null)}var db={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hb=Object.assign,fb={};function qa(t,e,n){this.props=t,this.context=e,this.refs=fb,this.updater=n||db}qa.prototype.isReactComponent={};qa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function pb(){}pb.prototype=qa.prototype;function Gp(t,e,n){this.props=t,this.context=e,this.refs=fb,this.updater=n||db}var $p=Gp.prototype=new pb;$p.constructor=Gp;hb($p,qa.prototype);$p.isPureReactComponent=!0;var Gy=Array.isArray;function vf(){}var rt={H:null,A:null,T:null,S:null},gb=Object.prototype.hasOwnProperty;function Yp(t,e,n){var i=n.ref;return{$$typeof:Fp,type:t,key:e,ref:i!==void 0?i:null,props:n}}function zw(t,e){return Yp(t.type,e,t.props)}function Qp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fp}function Bw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $y=/\/+/g;function bh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Bw(""+t.key):e.toString(36)}function qw(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(vf,vf):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Fs(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Fp:case Rw:a=!0;break;case ub:return a=t._init,Fs(a(t._payload),e,n,i,r)}}if(a)return r=r(t),a=i===""?"."+bh(t,0):i,Gy(r)?(n="",a!=null&&(n=a.replace($y,"$&/")+"/"),Fs(r,e,n,"",function(d){return d})):r!=null&&(Qp(r)&&(r=zw(r,n+(r.key==null||t&&t.key===r.key?"":(""+r.key).replace($y,"$&/")+"/")+a)),e.push(r)),1;a=0;var l=i===""?".":i+":";if(Gy(t))for(var c=0;c<t.length;c++)i=t[c],s=l+bh(i,c),a+=Fs(i,e,n,s,r);else if(c=Uw(t),typeof c=="function")for(t=c.call(t),c=0;!(i=t.next()).done;)i=i.value,s=l+bh(i,c++),a+=Fs(i,e,n,s,r);else if(s==="object"){if(typeof t.then=="function")return Fs(qw(t),e,n,i,r);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function vc(t,e,n){if(t==null)return t;var i=[],r=0;return Fs(t,i,"","",function(s){return e.call(n,s,r++)}),i}function Hw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Yy=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Fw={map:vc,forEach:function(t,e,n){vc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return vc(t,function(){e++}),e},toArray:function(t){return vc(t,function(e){return e})||[]},only:function(t){if(!Qp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Activity=Lw;Ie.Children=Fw;Ie.Component=qa;Ie.Fragment=Dw;Ie.Profiler=Ow;Ie.PureComponent=Gp;Ie.StrictMode=Mw;Ie.Suspense=Vw;Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=rt;Ie.__COMPILER_RUNTIME={__proto__:null,c:function(t){return rt.H.useMemoCache(t)}};Ie.cache=function(t){return function(){return t.apply(null,arguments)}};Ie.cacheSignal=function(){return null};Ie.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=hb({},t.props),r=t.key;if(e!=null)for(s in e.key!==void 0&&(r=""+e.key),e)!gb.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(i[s]=e[s]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+2];i.children=a}return Yp(t.type,r,i)};Ie.createContext=function(t){return t={$$typeof:kw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:jw,_context:t},t};Ie.createElement=function(t,e,n){var i,r={},s=null;if(e!=null)for(i in e.key!==void 0&&(s=""+e.key),e)gb.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return Yp(t,s,r)};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:Nw,render:t}};Ie.isValidElement=Qp;Ie.lazy=function(t){return{$$typeof:ub,_payload:{_status:-1,_result:t},_init:Hw}};Ie.memo=function(t,e){return{$$typeof:Pw,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=rt.T,n={};rt.T=n;try{var i=t(),r=rt.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(vf,Yy)}catch(s){Yy(s)}finally{e!==null&&n.types!==null&&(e.types=n.types),rt.T=e}};Ie.unstable_useCacheRefresh=function(){return rt.H.useCacheRefresh()};Ie.use=function(t){return rt.H.use(t)};Ie.useActionState=function(t,e,n){return rt.H.useActionState(t,e,n)};Ie.useCallback=function(t,e){return rt.H.useCallback(t,e)};Ie.useContext=function(t){return rt.H.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t,e){return rt.H.useDeferredValue(t,e)};Ie.useEffect=function(t,e){return rt.H.useEffect(t,e)};Ie.useEffectEvent=function(t){return rt.H.useEffectEvent(t)};Ie.useId=function(){return rt.H.useId()};Ie.useImperativeHandle=function(t,e,n){return rt.H.useImperativeHandle(t,e,n)};Ie.useInsertionEffect=function(t,e){return rt.H.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return rt.H.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return rt.H.useMemo(t,e)};Ie.useOptimistic=function(t,e){return rt.H.useOptimistic(t,e)};Ie.useReducer=function(t,e,n){return rt.H.useReducer(t,e,n)};Ie.useRef=function(t){return rt.H.useRef(t)};Ie.useState=function(t){return rt.H.useState(t)};Ie.useSyncExternalStore=function(t,e,n){return rt.H.useSyncExternalStore(t,e,n)};Ie.useTransition=function(){return rt.H.useTransition()};Ie.version="19.2.1";cb.exports=Ie;var N=cb.exports;const hu=ab(N),Gw=Aw({__proto__:null,default:hu},[N]);var mb={exports:{}},dd={},yb={exports:{}},vb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,re){var W=F.length;F.push(re);e:for(;0<W;){var de=W-1>>>1,Ae=F[de];if(0<r(Ae,re))F[de]=re,F[W]=Ae,W=de;else break e}}function n(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var re=F[0],W=F.pop();if(W!==re){F[0]=W;e:for(var de=0,Ae=F.length,at=Ae>>>1;de<at;){var O=2*(de+1)-1,ye=F[O],dt=O+1,ht=F[dt];if(0>r(ye,W))dt<Ae&&0>r(ht,ye)?(F[de]=ht,F[dt]=W,de=dt):(F[de]=ye,F[O]=W,de=O);else if(dt<Ae&&0>r(ht,W))F[de]=ht,F[dt]=W,de=dt;else break e}}return re}function r(F,re){var W=F.sortIndex-re.sortIndex;return W!==0?W:F.id-re.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],p=1,m=null,f=3,y=!1,S=!1,D=!1,j=!1,T=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function M(F){for(var re=n(d);re!==null;){if(re.callback===null)i(d);else if(re.startTime<=F)i(d),re.sortIndex=re.expirationTime,e(c,re);else break;re=n(d)}}function $(F){if(D=!1,M(F),!S)if(n(c)!==null)S=!0,Q||(Q=!0,R());else{var re=n(d);re!==null&&se($,re.startTime-F)}}var Q=!1,w=-1,b=5,E=-1;function C(){return j?!0:!(t.unstable_now()-E<b)}function I(){if(j=!1,Q){var F=t.unstable_now();E=F;var re=!0;try{e:{S=!1,D&&(D=!1,x(w),w=-1),y=!0;var W=f;try{t:{for(M(F),m=n(c);m!==null&&!(m.expirationTime>F&&C());){var de=m.callback;if(typeof de=="function"){m.callback=null,f=m.priorityLevel;var Ae=de(m.expirationTime<=F);if(F=t.unstable_now(),typeof Ae=="function"){m.callback=Ae,M(F),re=!0;break t}m===n(c)&&i(c),M(F)}else i(c);m=n(c)}if(m!==null)re=!0;else{var at=n(d);at!==null&&se($,at.startTime-F),re=!1}}break e}finally{m=null,f=W,y=!1}re=void 0}}finally{re?R():Q=!1}}}var R;if(typeof A=="function")R=function(){A(I)};else if(typeof MessageChannel<"u"){var v=new MessageChannel,Z=v.port2;v.port1.onmessage=I,R=function(){Z.postMessage(null)}}else R=function(){T(I,0)};function se(F,re){w=T(function(){F(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var re=3;break;default:re=f}var W=f;f=re;try{return F()}finally{f=W}},t.unstable_requestPaint=function(){j=!0},t.unstable_runWithPriority=function(F,re){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var W=f;f=F;try{return re()}finally{f=W}},t.unstable_scheduleCallback=function(F,re,W){var de=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?de+W:de):W=de,F){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=W+Ae,F={id:p++,callback:re,priorityLevel:F,startTime:W,expirationTime:Ae,sortIndex:-1},W>de?(F.sortIndex=W,e(d,F),n(c)===null&&F===n(d)&&(D?(x(w),w=-1):D=!0,se($,W-de))):(F.sortIndex=Ae,e(c,F),S||y||(S=!0,Q||(Q=!0,R()))),F},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(F){var re=f;return function(){var W=f;f=re;try{return F.apply(this,arguments)}finally{f=W}}}})(vb);yb.exports=vb;var $w=yb.exports,_b={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yw=N;function bb(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Zi(){}var nn={d:{f:Zi,r:function(){throw Error(bb(522))},D:Zi,C:Zi,L:Zi,m:Zi,X:Zi,S:Zi,M:Zi},p:0,findDOMNode:null},Qw=Symbol.for("react.portal");function Kw(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qw,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var Vo=Yw.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function hd(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=nn;rn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(bb(299));return Kw(t,e,null,n)};rn.flushSync=function(t){var e=Vo.T,n=nn.p;try{if(Vo.T=null,nn.p=2,t)return t()}finally{Vo.T=e,nn.p=n,nn.d.f()}};rn.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,nn.d.C(t,e))};rn.prefetchDNS=function(t){typeof t=="string"&&nn.d.D(t)};rn.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=hd(n,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?nn.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&nn.d.X(t,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};rn.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=hd(e.as,e.crossOrigin);nn.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&nn.d.M(t)};rn.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=hd(n,e.crossOrigin);nn.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};rn.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=hd(e.as,e.crossOrigin);nn.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else nn.d.m(t)};rn.requestFormReset=function(t){nn.d.r(t)};rn.unstable_batchedUpdates=function(t,e){return t(e)};rn.useFormState=function(t,e,n){return Vo.H.useFormState(t,e,n)};rn.useFormStatus=function(){return Vo.H.useHostTransitionStatus()};rn.version="19.2.1";function xb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xb)}catch(t){console.error(t)}}xb(),_b.exports=rn;var Ww=_b.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mt=$w,Tb=N,Xw=Ww;function H(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Eb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Dl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Sb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function wb(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qy(t){if(Dl(t)!==t)throw Error(H(188))}function Jw(t){var e=t.alternate;if(!e){if(e=Dl(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Qy(r),t;if(s===i)return Qy(r),e;s=s.sibling}throw Error(H(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(H(189))}}if(n.alternate!==i)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function Ab(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=Ab(t),e!==null)return e;t=t.sibling}return null}var st=Object.assign,Zw=Symbol.for("react.element"),_c=Symbol.for("react.transitional.element"),Ao=Symbol.for("react.portal"),Xs=Symbol.for("react.fragment"),Ib=Symbol.for("react.strict_mode"),_f=Symbol.for("react.profiler"),Cb=Symbol.for("react.consumer"),Ci=Symbol.for("react.context"),Kp=Symbol.for("react.forward_ref"),bf=Symbol.for("react.suspense"),xf=Symbol.for("react.suspense_list"),Wp=Symbol.for("react.memo"),nr=Symbol.for("react.lazy"),Tf=Symbol.for("react.activity"),eA=Symbol.for("react.memo_cache_sentinel"),Ky=Symbol.iterator;function _o(t){return t===null||typeof t!="object"?null:(t=Ky&&t[Ky]||t["@@iterator"],typeof t=="function"?t:null)}var tA=Symbol.for("react.client.reference");function Ef(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===tA?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xs:return"Fragment";case _f:return"Profiler";case Ib:return"StrictMode";case bf:return"Suspense";case xf:return"SuspenseList";case Tf:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Ao:return"Portal";case Ci:return t.displayName||"Context";case Cb:return(t._context.displayName||"Context")+".Consumer";case Kp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Wp:return e=t.displayName||null,e!==null?e:Ef(t.type)||"Memo";case nr:e=t._payload,t=t._init;try{return Ef(t(e))}catch{}}return null}var Io=Array.isArray,_e=Tb.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Be=Xw.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,us={pending:!1,data:null,method:null,action:null},Sf=[],Js=-1;function mi(t){return{current:t}}function Nt(t){0>Js||(t.current=Sf[Js],Sf[Js]=null,Js--)}function Ze(t,e){Js++,Sf[Js]=t.current,t.current=e}var li=mi(null),il=mi(null),vr=mi(null),fu=mi(null);function pu(t,e){switch(Ze(vr,e),Ze(il,t),Ze(li,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?t0(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=t0(e),t=Q1(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Nt(li),Ze(li,t)}function ba(){Nt(li),Nt(il),Nt(vr)}function wf(t){t.memoizedState!==null&&Ze(fu,t);var e=li.current,n=Q1(e,t.type);e!==n&&(Ze(il,t),Ze(li,n))}function gu(t){il.current===t&&(Nt(li),Nt(il)),fu.current===t&&(Nt(fu),pl._currentValue=us)}var xh,Wy;function is(t){if(xh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);xh=e&&e[1]||"",Wy=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xh+t+Wy}var Th=!1;function Eh(t,e){if(!t||Th)return"";Th=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(y){var f=y}Reflect.construct(t,[],m)}else{try{m.call()}catch(y){f=y}t.call(m.prototype)}}else{try{throw Error()}catch(y){f=y}(m=t())&&typeof m.catch=="function"&&m.catch(function(){})}}catch(y){if(y&&f&&typeof y.stack=="string")return[y.stack,f.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],l=s[1];if(a&&l){var c=a.split(`
`),d=l.split(`
`);for(r=i=0;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;for(;r<d.length&&!d[r].includes("DetermineComponentFrameRoot");)r++;if(i===c.length||r===d.length)for(i=c.length-1,r=d.length-1;1<=i&&0<=r&&c[i]!==d[r];)r--;for(;1<=i&&0<=r;i--,r--)if(c[i]!==d[r]){if(i!==1||r!==1)do if(i--,r--,0>r||c[i]!==d[r]){var p=`
`+c[i].replace(" at new "," at ");return t.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",t.displayName)),p}while(1<=i&&0<=r);break}}}finally{Th=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?is(n):""}function nA(t,e){switch(t.tag){case 26:case 27:case 5:return is(t.type);case 16:return is("Lazy");case 13:return t.child!==e&&e!==null?is("Suspense Fallback"):is("Suspense");case 19:return is("SuspenseList");case 0:case 15:return Eh(t.type,!1);case 11:return Eh(t.type.render,!1);case 1:return Eh(t.type,!0);case 31:return is("Activity");default:return""}}function Xy(t){try{var e="",n=null;do e+=nA(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var Af=Object.prototype.hasOwnProperty,Xp=Mt.unstable_scheduleCallback,Sh=Mt.unstable_cancelCallback,iA=Mt.unstable_shouldYield,rA=Mt.unstable_requestPaint,xn=Mt.unstable_now,sA=Mt.unstable_getCurrentPriorityLevel,Rb=Mt.unstable_ImmediatePriority,Db=Mt.unstable_UserBlockingPriority,mu=Mt.unstable_NormalPriority,aA=Mt.unstable_LowPriority,Mb=Mt.unstable_IdlePriority,oA=Mt.log,lA=Mt.unstable_setDisableYieldValue,Ml=null,Tn=null;function dr(t){if(typeof oA=="function"&&lA(t),Tn&&typeof Tn.setStrictMode=="function")try{Tn.setStrictMode(Ml,t)}catch{}}var En=Math.clz32?Math.clz32:dA,cA=Math.log,uA=Math.LN2;function dA(t){return t>>>=0,t===0?32:31-(cA(t)/uA|0)|0}var bc=256,xc=262144,Tc=4194304;function rs(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function fd(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?r=rs(i):(a&=l,a!==0?r=rs(a):n||(n=l&~t,n!==0&&(r=rs(n))))):(l=i&~s,l!==0?r=rs(l):a!==0?r=rs(a):n||(n=i&~t,n!==0&&(r=rs(n)))),r===0?0:e!==0&&e!==r&&!(e&s)&&(s=r&-r,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:r}function Ol(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function hA(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ob(){var t=Tc;return Tc<<=1,!(Tc&62914560)&&(Tc=4194304),t}function wh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function jl(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function fA(t,e,n,i,r,s){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,c=t.expirationTimes,d=t.hiddenUpdates;for(n=a&~n;0<n;){var p=31-En(n),m=1<<p;l[p]=0,c[p]=-1;var f=d[p];if(f!==null)for(d[p]=null,p=0;p<f.length;p++){var y=f[p];y!==null&&(y.lane&=-536870913)}n&=~m}i!==0&&jb(t,i,0),s!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=s&~(a&~e))}function jb(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-En(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function kb(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-En(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}function Nb(t,e){var n=e&-e;return n=n&42?1:Jp(n),n&(t.suspendedLanes|e)?0:n}function Jp(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Zp(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function Vb(){var t=Be.p;return t!==0?t:(t=window.event,t===void 0?32:sT(t.type))}function Jy(t,e){var n=Be.p;try{return Be.p=t,e()}finally{Be.p=n}}var $r=Math.random().toString(36).slice(2),Bt="__reactFiber$"+$r,fn="__reactProps$"+$r,Ha="__reactContainer$"+$r,If="__reactEvents$"+$r,pA="__reactListeners$"+$r,gA="__reactHandles$"+$r,Zy="__reactResources$"+$r,kl="__reactMarker$"+$r;function eg(t){delete t[Bt],delete t[fn],delete t[If],delete t[pA],delete t[gA]}function Zs(t){var e=t[Bt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ha]||n[Bt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=a0(t);t!==null;){if(n=t[Bt])return n;t=a0(t)}return e}t=n,n=t.parentNode}return null}function Fa(t){if(t=t[Bt]||t[Ha]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Co(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(H(33))}function ca(t){var e=t[Zy];return e||(e=t[Zy]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function kt(t){t[kl]=!0}var Pb=new Set,Lb={};function Ds(t,e){xa(t,e),xa(t+"Capture",e)}function xa(t,e){for(Lb[t]=e,t=0;t<e.length;t++)Pb.add(e[t])}var mA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ev={},tv={};function yA(t){return Af.call(tv,t)?!0:Af.call(ev,t)?!1:mA.test(t)?tv[t]=!0:(ev[t]=!0,!1)}function zc(t,e,n){if(yA(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Ec(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function bi(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function Mn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ub(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vA(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,s=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cf(t){if(!t._valueTracker){var e=Ub(t)?"checked":"value";t._valueTracker=vA(t,e,""+t[e])}}function zb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Ub(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function yu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var _A=/[\n"\\]/g;function kn(t){return t.replace(_A,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Rf(t,e,n,i,r,s,a,l){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Mn(e)):t.value!==""+Mn(e)&&(t.value=""+Mn(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?Df(t,a,Mn(e)):n!=null?Df(t,a,Mn(n)):i!=null&&t.removeAttribute("value"),r==null&&s!=null&&(t.defaultChecked=!!s),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+Mn(l):t.removeAttribute("name")}function Bb(t,e,n,i,r,s,a,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null)){Cf(t);return}n=n!=null?""+Mn(n):"",e=e!=null?""+Mn(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=l?t.checked:!!i,t.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a),Cf(t)}function Df(t,e,n){e==="number"&&yu(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function ua(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Mn(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function qb(t,e,n){if(e!=null&&(e=""+Mn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Mn(n):""}function Hb(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(H(92));if(Io(i)){if(1<i.length)throw Error(H(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=Mn(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),Cf(t)}function Ta(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var bA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nv(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||bA.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function Fb(t,e,n){if(e!=null&&typeof e!="object")throw Error(H(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var r in e)i=e[r],e.hasOwnProperty(r)&&n[r]!==i&&nv(t,r,i)}else for(var s in e)e.hasOwnProperty(s)&&nv(t,s,e[s])}function tg(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),TA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bc(t){return TA.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ri(){}var Mf=null;function ng(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ea=null,da=null;function iv(t){var e=Fa(t);if(e&&(t=e.stateNode)){var n=t[fn]||null;e:switch(t=e.stateNode,e.type){case"input":if(Rf(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+kn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=i[fn]||null;if(!r)throw Error(H(90));Rf(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&zb(i)}break e;case"textarea":qb(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&ua(t,!!n.multiple,e,!1)}}}var Ah=!1;function Gb(t,e,n){if(Ah)return t(e,n);Ah=!0;try{var i=t(e);return i}finally{if(Ah=!1,(ea!==null||da!==null)&&(wd(),ea&&(e=ea,t=da,da=ea=null,iv(e),t)))for(e=0;e<t.length;e++)iv(t[e])}}function rl(t,e){var n=t.stateNode;if(n===null)return null;var i=n[fn]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var Pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Of=!1;if(Pi)try{var bo={};Object.defineProperty(bo,"passive",{get:function(){Of=!0}}),window.addEventListener("test",bo,bo),window.removeEventListener("test",bo,bo)}catch{Of=!1}var hr=null,ig=null,qc=null;function $b(){if(qc)return qc;var t,e=ig,n=e.length,i,r="value"in hr?hr.value:hr.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[s-i];i++);return qc=r.slice(t,1<i?1-i:void 0)}function Hc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Sc(){return!0}function rv(){return!1}function pn(t){function e(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Sc:rv,this.isPropagationStopped=rv,this}return st(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Sc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Sc)},persist:function(){},isPersistent:Sc}),e}var Ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pd=pn(Ms),Nl=st({},Ms,{view:0,detail:0}),EA=pn(Nl),Ih,Ch,xo,gd=st({},Nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xo&&(xo&&t.type==="mousemove"?(Ih=t.screenX-xo.screenX,Ch=t.screenY-xo.screenY):Ch=Ih=0,xo=t),Ih)},movementY:function(t){return"movementY"in t?t.movementY:Ch}}),sv=pn(gd),SA=st({},gd,{dataTransfer:0}),wA=pn(SA),AA=st({},Nl,{relatedTarget:0}),Rh=pn(AA),IA=st({},Ms,{animationName:0,elapsedTime:0,pseudoElement:0}),CA=pn(IA),RA=st({},Ms,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),DA=pn(RA),MA=st({},Ms,{data:0}),av=pn(MA),OA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kA[t])?!!e[t]:!1}function rg(){return NA}var VA=st({},Nl,{key:function(t){if(t.key){var e=OA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Hc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rg,charCode:function(t){return t.type==="keypress"?Hc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),PA=pn(VA),LA=st({},gd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ov=pn(LA),UA=st({},Nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rg}),zA=pn(UA),BA=st({},Ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),qA=pn(BA),HA=st({},gd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),FA=pn(HA),GA=st({},Ms,{newState:0,oldState:0}),$A=pn(GA),YA=[9,13,27,32],sg=Pi&&"CompositionEvent"in window,Po=null;Pi&&"documentMode"in document&&(Po=document.documentMode);var QA=Pi&&"TextEvent"in window&&!Po,Yb=Pi&&(!sg||Po&&8<Po&&11>=Po),lv=" ",cv=!1;function Qb(t,e){switch(t){case"keyup":return YA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ta=!1;function KA(t,e){switch(t){case"compositionend":return Kb(e);case"keypress":return e.which!==32?null:(cv=!0,lv);case"textInput":return t=e.data,t===lv&&cv?null:t;default:return null}}function WA(t,e){if(ta)return t==="compositionend"||!sg&&Qb(t,e)?(t=$b(),qc=ig=hr=null,ta=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Yb&&e.locale!=="ko"?null:e.data;default:return null}}var XA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!XA[t.type]:e==="textarea"}function Wb(t,e,n,i){ea?da?da.push(i):da=[i]:ea=i,e=Nu(e,"onChange"),0<e.length&&(n=new pd("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Lo=null,sl=null;function JA(t){G1(t,0)}function md(t){var e=Co(t);if(zb(e))return t}function dv(t,e){if(t==="change")return e}var Xb=!1;if(Pi){var Dh;if(Pi){var Mh="oninput"in document;if(!Mh){var hv=document.createElement("div");hv.setAttribute("oninput","return;"),Mh=typeof hv.oninput=="function"}Dh=Mh}else Dh=!1;Xb=Dh&&(!document.documentMode||9<document.documentMode)}function fv(){Lo&&(Lo.detachEvent("onpropertychange",Jb),sl=Lo=null)}function Jb(t){if(t.propertyName==="value"&&md(sl)){var e=[];Wb(e,sl,t,ng(t)),Gb(JA,e)}}function ZA(t,e,n){t==="focusin"?(fv(),Lo=e,sl=n,Lo.attachEvent("onpropertychange",Jb)):t==="focusout"&&fv()}function e2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return md(sl)}function t2(t,e){if(t==="click")return md(e)}function n2(t,e){if(t==="input"||t==="change")return md(e)}function i2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wn=typeof Object.is=="function"?Object.is:i2;function al(t,e){if(wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Af.call(e,r)||!wn(t[r],e[r]))return!1}return!0}function pv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gv(t,e){var n=pv(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pv(n)}}function Zb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Zb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ex(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=yu(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=yu(t.document)}return e}function ag(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var r2=Pi&&"documentMode"in document&&11>=document.documentMode,na=null,jf=null,Uo=null,kf=!1;function mv(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;kf||na==null||na!==yu(i)||(i=na,"selectionStart"in i&&ag(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Uo&&al(Uo,i)||(Uo=i,i=Nu(jf,"onSelect"),0<i.length&&(e=new pd("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=na)))}function ns(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ia={animationend:ns("Animation","AnimationEnd"),animationiteration:ns("Animation","AnimationIteration"),animationstart:ns("Animation","AnimationStart"),transitionrun:ns("Transition","TransitionRun"),transitionstart:ns("Transition","TransitionStart"),transitioncancel:ns("Transition","TransitionCancel"),transitionend:ns("Transition","TransitionEnd")},Oh={},tx={};Pi&&(tx=document.createElement("div").style,"AnimationEvent"in window||(delete ia.animationend.animation,delete ia.animationiteration.animation,delete ia.animationstart.animation),"TransitionEvent"in window||delete ia.transitionend.transition);function Os(t){if(Oh[t])return Oh[t];if(!ia[t])return t;var e=ia[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in tx)return Oh[t]=e[n];return t}var nx=Os("animationend"),ix=Os("animationiteration"),rx=Os("animationstart"),s2=Os("transitionrun"),a2=Os("transitionstart"),o2=Os("transitioncancel"),sx=Os("transitionend"),ax=new Map,Nf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nf.push("scrollEnd");function ni(t,e){ax.set(t,e),Ds(e,[t])}var vu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Dn=[],ra=0,og=0;function yd(){for(var t=ra,e=og=ra=0;e<t;){var n=Dn[e];Dn[e++]=null;var i=Dn[e];Dn[e++]=null;var r=Dn[e];Dn[e++]=null;var s=Dn[e];if(Dn[e++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&ox(n,r,s)}}function vd(t,e,n,i){Dn[ra++]=t,Dn[ra++]=e,Dn[ra++]=n,Dn[ra++]=i,og|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function lg(t,e,n,i){return vd(t,e,n,i),_u(t)}function js(t,e){return vd(t,null,null,e),_u(t)}function ox(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=t.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(r=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,r&&e!==null&&(r=31-En(n),t=s.hiddenUpdates,i=t[r],i===null?t[r]=[e]:i.push(e),e.lane=n|536870912),s):null}function _u(t){if(50<Qo)throw Qo=0,np=null,Error(H(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var sa={};function l2(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(t,e,n,i){return new l2(t,e,n,i)}function cg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ji(t,e){var n=t.alternate;return n===null?(n=vn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function lx(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Fc(t,e,n,i,r,s){var a=0;if(i=t,typeof t=="function")cg(t)&&(a=1);else if(typeof t=="string")a=fI(t,n,li.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Tf:return t=vn(31,n,e,r),t.elementType=Tf,t.lanes=s,t;case Xs:return ds(n.children,r,s,e);case Ib:a=8,r|=24;break;case _f:return t=vn(12,n,e,r|2),t.elementType=_f,t.lanes=s,t;case bf:return t=vn(13,n,e,r),t.elementType=bf,t.lanes=s,t;case xf:return t=vn(19,n,e,r),t.elementType=xf,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ci:a=10;break e;case Cb:a=9;break e;case Kp:a=11;break e;case Wp:a=14;break e;case nr:a=16,i=null;break e}a=29,n=Error(H(130,t===null?"null":typeof t,"")),i=null}return e=vn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function ds(t,e,n,i){return t=vn(7,t,i,e),t.lanes=n,t}function jh(t,e,n){return t=vn(6,t,null,e),t.lanes=n,t}function cx(t){var e=vn(18,null,null,0);return e.stateNode=t,e}function kh(t,e,n){return e=vn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var yv=new WeakMap;function Nn(t,e){if(typeof t=="object"&&t!==null){var n=yv.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Xy(e)},yv.set(t,e),e)}return{value:t,source:e,stack:Xy(e)}}var aa=[],oa=0,bu=null,ol=0,On=[],jn=0,jr=null,si=1,ai="";function wi(t,e){aa[oa++]=ol,aa[oa++]=bu,bu=t,ol=e}function ux(t,e,n){On[jn++]=si,On[jn++]=ai,On[jn++]=jr,jr=t;var i=si;t=ai;var r=32-En(i)-1;i&=~(1<<r),n+=1;var s=32-En(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,si=1<<32-En(e)+r|n<<r|i,ai=s+t}else si=1<<s|n<<r|i,ai=t}function ug(t){t.return!==null&&(wi(t,1),ux(t,1,0))}function dg(t){for(;t===bu;)bu=aa[--oa],aa[oa]=null,ol=aa[--oa],aa[oa]=null;for(;t===jr;)jr=On[--jn],On[jn]=null,ai=On[--jn],On[jn]=null,si=On[--jn],On[jn]=null}function dx(t,e){On[jn++]=si,On[jn++]=ai,On[jn++]=jr,si=e.id,ai=e.overflow,jr=t}var qt=null,nt=null,Ve=!1,_r=null,Vn=!1,Vf=Error(H(519));function kr(t){var e=Error(H(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ll(Nn(e,t)),Vf}function vv(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[Bt]=t,e[fn]=i,n){case"dialog":Me("cancel",e),Me("close",e);break;case"iframe":case"object":case"embed":Me("load",e);break;case"video":case"audio":for(n=0;n<hl.length;n++)Me(hl[n],e);break;case"source":Me("error",e);break;case"img":case"image":case"link":Me("error",e),Me("load",e);break;case"details":Me("toggle",e);break;case"input":Me("invalid",e),Bb(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Me("invalid",e);break;case"textarea":Me("invalid",e),Hb(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||Y1(e.textContent,n)?(i.popover!=null&&(Me("beforetoggle",e),Me("toggle",e)),i.onScroll!=null&&Me("scroll",e),i.onScrollEnd!=null&&Me("scrollend",e),i.onClick!=null&&(e.onclick=Ri),e=!0):e=!1,e||kr(t,!0)}function _v(t){for(qt=t.return;qt;)switch(qt.tag){case 5:case 31:case 13:Vn=!1;return;case 27:case 3:Vn=!0;return;default:qt=qt.return}}function qs(t){if(t!==qt)return!1;if(!Ve)return _v(t),Ve=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||op(t.type,t.memoizedProps)),n=!n),n&&nt&&kr(t),_v(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));nt=s0(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));nt=s0(t)}else e===27?(e=nt,Yr(t.type)?(t=dp,dp=null,nt=t):nt=e):nt=qt?Un(t.stateNode.nextSibling):null;return!0}function bs(){nt=qt=null,Ve=!1}function Nh(){var t=_r;return t!==null&&(cn===null?cn=t:cn.push.apply(cn,t),_r=null),t}function ll(t){_r===null?_r=[t]:_r.push(t)}var Pf=mi(null),ks=null,Di=null;function rr(t,e,n){Ze(Pf,e._currentValue),e._currentValue=n}function ki(t){t._currentValue=Pf.current,Nt(Pf)}function Lf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Uf(t,e,n,i){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;e:for(;s!==null;){var l=s;s=r;for(var c=0;c<e.length;c++)if(l.context===e[c]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Lf(s.return,n,t),i||(a=null);break e}s=l.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(H(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Lf(a,n,t),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===t){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function Ga(t,e,n,i){t=null;for(var r=e,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(H(387));if(a=a.memoizedProps,a!==null){var l=r.type;wn(r.pendingProps.value,a.value)||(t!==null?t.push(l):t=[l])}}else if(r===fu.current){if(a=r.alternate,a===null)throw Error(H(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(pl):t=[pl])}r=r.return}t!==null&&Uf(e,t,n,i),e.flags|=262144}function xu(t){for(t=t.firstContext;t!==null;){if(!wn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function xs(t){ks=t,Di=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ft(t){return hx(ks,t)}function wc(t,e){return ks===null&&xs(t),hx(t,e)}function hx(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Di===null){if(t===null)throw Error(H(308));Di=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Di=Di.next=e;return n}var c2=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},u2=Mt.unstable_scheduleCallback,d2=Mt.unstable_NormalPriority,St={$$typeof:Ci,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hg(){return{controller:new c2,data:new Map,refCount:0}}function Vl(t){t.refCount--,t.refCount===0&&u2(d2,function(){t.controller.abort()})}var zo=null,zf=0,Ea=0,ha=null;function h2(t,e){if(zo===null){var n=zo=[];zf=0,Ea=Pg(),ha={status:"pending",value:void 0,then:function(i){n.push(i)}}}return zf++,e.then(bv,bv),e}function bv(){if(--zf===0&&zo!==null){ha!==null&&(ha.status="fulfilled");var t=zo;zo=null,Ea=0,ha=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function f2(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var xv=_e.S;_e.S=function(t,e){A1=xn(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&h2(t,e),xv!==null&&xv(t,e)};var hs=mi(null);function fg(){var t=hs.current;return t!==null?t:Xe.pooledCache}function Gc(t,e){e===null?Ze(hs,hs.current):Ze(hs,e.pool)}function fx(){var t=fg();return t===null?null:{parent:St._currentValue,pool:t}}var $a=Error(H(460)),pg=Error(H(474)),_d=Error(H(542)),Tu={then:function(){}};function Tv(t){return t=t.status,t==="fulfilled"||t==="rejected"}function px(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Ri,Ri),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Sv(t),t;default:if(typeof e.status=="string")e.then(Ri,Ri);else{if(t=Xe,t!==null&&100<t.shellSuspendCounter)throw Error(H(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=i}},function(i){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Sv(t),t}throw fs=e,$a}}function ss(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(fs=n,$a):n}}var fs=null;function Ev(){if(fs===null)throw Error(H(459));var t=fs;return fs=null,t}function Sv(t){if(t===$a||t===_d)throw Error(H(483))}var fa=null,cl=0;function Ac(t){var e=cl;return cl+=1,fa===null&&(fa=[]),px(fa,t,e)}function To(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Ic(t,e){throw e.$$typeof===Zw?Error(H(525)):(t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function gx(t){function e(T,x){if(t){var A=T.deletions;A===null?(T.deletions=[x],T.flags|=16):A.push(x)}}function n(T,x){if(!t)return null;for(;x!==null;)e(T,x),x=x.sibling;return null}function i(T){for(var x=new Map;T!==null;)T.key!==null?x.set(T.key,T):x.set(T.index,T),T=T.sibling;return x}function r(T,x){return T=ji(T,x),T.index=0,T.sibling=null,T}function s(T,x,A){return T.index=A,t?(A=T.alternate,A!==null?(A=A.index,A<x?(T.flags|=67108866,x):A):(T.flags|=67108866,x)):(T.flags|=1048576,x)}function a(T){return t&&T.alternate===null&&(T.flags|=67108866),T}function l(T,x,A,M){return x===null||x.tag!==6?(x=jh(A,T.mode,M),x.return=T,x):(x=r(x,A),x.return=T,x)}function c(T,x,A,M){var $=A.type;return $===Xs?p(T,x,A.props.children,M,A.key):x!==null&&(x.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===nr&&ss($)===x.type)?(x=r(x,A.props),To(x,A),x.return=T,x):(x=Fc(A.type,A.key,A.props,null,T.mode,M),To(x,A),x.return=T,x)}function d(T,x,A,M){return x===null||x.tag!==4||x.stateNode.containerInfo!==A.containerInfo||x.stateNode.implementation!==A.implementation?(x=kh(A,T.mode,M),x.return=T,x):(x=r(x,A.children||[]),x.return=T,x)}function p(T,x,A,M,$){return x===null||x.tag!==7?(x=ds(A,T.mode,M,$),x.return=T,x):(x=r(x,A),x.return=T,x)}function m(T,x,A){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=jh(""+x,T.mode,A),x.return=T,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case _c:return A=Fc(x.type,x.key,x.props,null,T.mode,A),To(A,x),A.return=T,A;case Ao:return x=kh(x,T.mode,A),x.return=T,x;case nr:return x=ss(x),m(T,x,A)}if(Io(x)||_o(x))return x=ds(x,T.mode,A,null),x.return=T,x;if(typeof x.then=="function")return m(T,Ac(x),A);if(x.$$typeof===Ci)return m(T,wc(T,x),A);Ic(T,x)}return null}function f(T,x,A,M){var $=x!==null?x.key:null;if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return $!==null?null:l(T,x,""+A,M);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case _c:return A.key===$?c(T,x,A,M):null;case Ao:return A.key===$?d(T,x,A,M):null;case nr:return A=ss(A),f(T,x,A,M)}if(Io(A)||_o(A))return $!==null?null:p(T,x,A,M,null);if(typeof A.then=="function")return f(T,x,Ac(A),M);if(A.$$typeof===Ci)return f(T,x,wc(T,A),M);Ic(T,A)}return null}function y(T,x,A,M,$){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return T=T.get(A)||null,l(x,T,""+M,$);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case _c:return T=T.get(M.key===null?A:M.key)||null,c(x,T,M,$);case Ao:return T=T.get(M.key===null?A:M.key)||null,d(x,T,M,$);case nr:return M=ss(M),y(T,x,A,M,$)}if(Io(M)||_o(M))return T=T.get(A)||null,p(x,T,M,$,null);if(typeof M.then=="function")return y(T,x,A,Ac(M),$);if(M.$$typeof===Ci)return y(T,x,A,wc(x,M),$);Ic(x,M)}return null}function S(T,x,A,M){for(var $=null,Q=null,w=x,b=x=0,E=null;w!==null&&b<A.length;b++){w.index>b?(E=w,w=null):E=w.sibling;var C=f(T,w,A[b],M);if(C===null){w===null&&(w=E);break}t&&w&&C.alternate===null&&e(T,w),x=s(C,x,b),Q===null?$=C:Q.sibling=C,Q=C,w=E}if(b===A.length)return n(T,w),Ve&&wi(T,b),$;if(w===null){for(;b<A.length;b++)w=m(T,A[b],M),w!==null&&(x=s(w,x,b),Q===null?$=w:Q.sibling=w,Q=w);return Ve&&wi(T,b),$}for(w=i(w);b<A.length;b++)E=y(w,T,b,A[b],M),E!==null&&(t&&E.alternate!==null&&w.delete(E.key===null?b:E.key),x=s(E,x,b),Q===null?$=E:Q.sibling=E,Q=E);return t&&w.forEach(function(I){return e(T,I)}),Ve&&wi(T,b),$}function D(T,x,A,M){if(A==null)throw Error(H(151));for(var $=null,Q=null,w=x,b=x=0,E=null,C=A.next();w!==null&&!C.done;b++,C=A.next()){w.index>b?(E=w,w=null):E=w.sibling;var I=f(T,w,C.value,M);if(I===null){w===null&&(w=E);break}t&&w&&I.alternate===null&&e(T,w),x=s(I,x,b),Q===null?$=I:Q.sibling=I,Q=I,w=E}if(C.done)return n(T,w),Ve&&wi(T,b),$;if(w===null){for(;!C.done;b++,C=A.next())C=m(T,C.value,M),C!==null&&(x=s(C,x,b),Q===null?$=C:Q.sibling=C,Q=C);return Ve&&wi(T,b),$}for(w=i(w);!C.done;b++,C=A.next())C=y(w,T,b,C.value,M),C!==null&&(t&&C.alternate!==null&&w.delete(C.key===null?b:C.key),x=s(C,x,b),Q===null?$=C:Q.sibling=C,Q=C);return t&&w.forEach(function(R){return e(T,R)}),Ve&&wi(T,b),$}function j(T,x,A,M){if(typeof A=="object"&&A!==null&&A.type===Xs&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case _c:e:{for(var $=A.key;x!==null;){if(x.key===$){if($=A.type,$===Xs){if(x.tag===7){n(T,x.sibling),M=r(x,A.props.children),M.return=T,T=M;break e}}else if(x.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===nr&&ss($)===x.type){n(T,x.sibling),M=r(x,A.props),To(M,A),M.return=T,T=M;break e}n(T,x);break}else e(T,x);x=x.sibling}A.type===Xs?(M=ds(A.props.children,T.mode,M,A.key),M.return=T,T=M):(M=Fc(A.type,A.key,A.props,null,T.mode,M),To(M,A),M.return=T,T=M)}return a(T);case Ao:e:{for($=A.key;x!==null;){if(x.key===$)if(x.tag===4&&x.stateNode.containerInfo===A.containerInfo&&x.stateNode.implementation===A.implementation){n(T,x.sibling),M=r(x,A.children||[]),M.return=T,T=M;break e}else{n(T,x);break}else e(T,x);x=x.sibling}M=kh(A,T.mode,M),M.return=T,T=M}return a(T);case nr:return A=ss(A),j(T,x,A,M)}if(Io(A))return S(T,x,A,M);if(_o(A)){if($=_o(A),typeof $!="function")throw Error(H(150));return A=$.call(A),D(T,x,A,M)}if(typeof A.then=="function")return j(T,x,Ac(A),M);if(A.$$typeof===Ci)return j(T,x,wc(T,A),M);Ic(T,A)}return typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint"?(A=""+A,x!==null&&x.tag===6?(n(T,x.sibling),M=r(x,A),M.return=T,T=M):(n(T,x),M=jh(A,T.mode,M),M.return=T,T=M),a(T)):n(T,x)}return function(T,x,A,M){try{cl=0;var $=j(T,x,A,M);return fa=null,$}catch(w){if(w===$a||w===_d)throw w;var Q=vn(29,w,null,T.mode);return Q.lanes=M,Q.return=T,Q}finally{}}}var Ts=gx(!0),mx=gx(!1),ir=!1;function gg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function br(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function xr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ze&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,e=_u(t),ox(t,null,n),e}return vd(t,i,e,n),_u(t)}function Bo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,kb(t,n)}}function Vh(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var qf=!1;function qo(){if(qf){var t=ha;if(t!==null)throw t}}function Ho(t,e,n,i){qf=!1;var r=t.updateQueue;ir=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?s=d:a.next=d,a=c;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==a&&(l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=c))}if(s!==null){var m=r.baseState;a=0,p=d=c=null,l=s;do{var f=l.lane&-536870913,y=f!==l.lane;if(y?(Ne&f)===f:(i&f)===f){f!==0&&f===Ea&&(qf=!0),p!==null&&(p=p.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var S=t,D=l;f=e;var j=n;switch(D.tag){case 1:if(S=D.payload,typeof S=="function"){m=S.call(j,m,f);break e}m=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=D.payload,f=typeof S=="function"?S.call(j,m,f):S,f==null)break e;m=st({},m,f);break e;case 2:ir=!0}}f=l.callback,f!==null&&(t.flags|=64,y&&(t.flags|=8192),y=r.callbacks,y===null?r.callbacks=[f]:y.push(f))}else y={lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(d=p=y,c=m):p=p.next=y,a|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;y=l,l=y.next,y.next=null,r.lastBaseUpdate=y,r.shared.pending=null}}while(!0);p===null&&(c=m),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=p,s===null&&(r.shared.lanes=0),Vr|=a,t.lanes=a,t.memoizedState=m}}function yx(t,e){if(typeof t!="function")throw Error(H(191,t));t.call(e)}function vx(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)yx(n[t],e)}var Sa=mi(null),Eu=mi(0);function wv(t,e){t=Bi,Ze(Eu,t),Ze(Sa,e),Bi=t|e.baseLanes}function Hf(){Ze(Eu,Bi),Ze(Sa,Sa.current)}function mg(){Bi=Eu.current,Nt(Sa),Nt(Eu)}var An=mi(null),Ln=null;function sr(t){var e=t.alternate;Ze(yt,yt.current&1),Ze(An,t),Ln===null&&(e===null||Sa.current!==null||e.memoizedState!==null)&&(Ln=t)}function Ff(t){Ze(yt,yt.current),Ze(An,t),Ln===null&&(Ln=t)}function _x(t){t.tag===22?(Ze(yt,yt.current),Ze(An,t),Ln===null&&(Ln=t)):ar()}function ar(){Ze(yt,yt.current),Ze(An,An.current)}function yn(t){Nt(An),Ln===t&&(Ln=null),Nt(yt)}var yt=mi(0);function Su(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||cp(n)||up(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Li=0,Ce=null,Qe=null,Tt=null,wu=!1,pa=!1,Es=!1,Au=0,ul=0,ga=null,p2=0;function pt(){throw Error(H(321))}function yg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wn(t[n],e[n]))return!1;return!0}function vg(t,e,n,i,r,s){return Li=s,Ce=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_e.H=t===null||t.memoizedState===null?Wx:Rg,Es=!1,s=n(i,r),Es=!1,pa&&(s=xx(e,n,i,r)),bx(t),s}function bx(t){_e.H=dl;var e=Qe!==null&&Qe.next!==null;if(Li=0,Tt=Qe=Ce=null,wu=!1,ul=0,ga=null,e)throw Error(H(300));t===null||At||(t=t.dependencies,t!==null&&xu(t)&&(At=!0))}function xx(t,e,n,i){Ce=t;var r=0;do{if(pa&&(ga=null),ul=0,pa=!1,25<=r)throw Error(H(301));if(r+=1,Tt=Qe=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}_e.H=Xx,s=e(n,i)}while(pa);return s}function g2(){var t=_e.H,e=t.useState()[0];return e=typeof e.then=="function"?Pl(e):e,t=t.useState()[0],(Qe!==null?Qe.memoizedState:null)!==t&&(Ce.flags|=1024),e}function _g(){var t=Au!==0;return Au=0,t}function bg(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function xg(t){if(wu){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}wu=!1}Li=0,Tt=Qe=Ce=null,pa=!1,ul=Au=0,ga=null}function tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Ce.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function _t(){if(Qe===null){var t=Ce.alternate;t=t!==null?t.memoizedState:null}else t=Qe.next;var e=Tt===null?Ce.memoizedState:Tt.next;if(e!==null)Tt=e,Qe=t;else{if(t===null)throw Ce.alternate===null?Error(H(467)):Error(H(310));Qe=t,t={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},Tt===null?Ce.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function bd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pl(t){var e=ul;return ul+=1,ga===null&&(ga=[]),t=px(ga,t,e),e=Ce,(Tt===null?e.memoizedState:Tt.next)===null&&(e=e.alternate,_e.H=e===null||e.memoizedState===null?Wx:Rg),t}function xd(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Pl(t);if(t.$$typeof===Ci)return Ft(t)}throw Error(H(438,String(t)))}function Tg(t){var e=null,n=Ce.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=Ce.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=bd(),Ce.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=eA;return e.index++,n}function Ui(t,e){return typeof e=="function"?e(t):e}function $c(t){var e=_t();return Eg(e,Qe,t)}function Eg(t,e,n){var i=t.queue;if(i===null)throw Error(H(311));i.lastRenderedReducer=n;var r=t.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}e.baseQueue=r=s,i.pending=null}if(s=t.baseState,r===null)t.memoizedState=s;else{e=r.next;var l=a=null,c=null,d=e,p=!1;do{var m=d.lane&-536870913;if(m!==d.lane?(Ne&m)===m:(Li&m)===m){var f=d.revertLane;if(f===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),m===Ea&&(p=!0);else if((Li&f)===f){d=d.next,f===Ea&&(p=!0);continue}else m={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=m,a=s):c=c.next=m,Ce.lanes|=f,Vr|=f;m=d.action,Es&&n(s,m),s=d.hasEagerState?d.eagerState:n(s,m)}else f={lane:m,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=f,a=s):c=c.next=f,Ce.lanes|=m,Vr|=m;d=d.next}while(d!==null&&d!==e);if(c===null?a=s:c.next=l,!wn(s,t.memoizedState)&&(At=!0,p&&(n=ha,n!==null)))throw n;t.memoizedState=s,t.baseState=a,t.baseQueue=c,i.lastRenderedState=s}return r===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function Ph(t){var e=_t(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=t(s,a.action),a=a.next;while(a!==r);wn(s,e.memoizedState)||(At=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function Tx(t,e,n){var i=Ce,r=_t(),s=Ve;if(s){if(n===void 0)throw Error(H(407));n=n()}else n=e();var a=!wn((Qe||r).memoizedState,n);if(a&&(r.memoizedState=n,At=!0),r=r.queue,Sg(wx.bind(null,i,r,t),[t]),r.getSnapshot!==e||a||Tt!==null&&Tt.memoizedState.tag&1){if(i.flags|=2048,wa(9,{destroy:void 0},Sx.bind(null,i,r,n,e),null),Xe===null)throw Error(H(349));s||Li&127||Ex(i,e,n)}return n}function Ex(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ce.updateQueue,e===null?(e=bd(),Ce.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Sx(t,e,n,i){e.value=n,e.getSnapshot=i,Ax(e)&&Ix(t)}function wx(t,e,n){return n(function(){Ax(e)&&Ix(t)})}function Ax(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wn(t,n)}catch{return!0}}function Ix(t){var e=js(t,2);e!==null&&hn(e,t,2)}function Gf(t){var e=tn();if(typeof t=="function"){var n=t;if(t=n(),Es){dr(!0);try{n()}finally{dr(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:t},e}function Cx(t,e,n,i){return t.baseState=n,Eg(t,Qe,typeof i=="function"?i:Ui)}function m2(t,e,n,i,r){if(Ed(t))throw Error(H(485));if(t=e.action,t!==null){var s={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};_e.T!==null?n(!0):s.isTransition=!1,i(s),n=e.pending,n===null?(s.next=e.pending=s,Rx(e,s)):(s.next=n.next,e.pending=n.next=s)}}function Rx(t,e){var n=e.action,i=e.payload,r=t.state;if(e.isTransition){var s=_e.T,a={};_e.T=a;try{var l=n(r,i),c=_e.S;c!==null&&c(a,l),Av(t,e,l)}catch(d){$f(t,e,d)}finally{s!==null&&a.types!==null&&(s.types=a.types),_e.T=s}}else try{s=n(r,i),Av(t,e,s)}catch(d){$f(t,e,d)}}function Av(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Iv(t,e,i)},function(i){return $f(t,e,i)}):Iv(t,e,n)}function Iv(t,e,n){e.status="fulfilled",e.value=n,Dx(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,Rx(t,n)))}function $f(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,Dx(e),e=e.next;while(e!==i)}t.action=null}function Dx(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Mx(t,e){return e}function Cv(t,e){if(Ve){var n=Xe.formState;if(n!==null){e:{var i=Ce;if(Ve){if(nt){t:{for(var r=nt,s=Vn;r.nodeType!==8;){if(!s){r=null;break t}if(r=Un(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){nt=Un(r.nextSibling),i=r.data==="F!";break e}}kr(i)}i=!1}i&&(e=n[0])}}return n=tn(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mx,lastRenderedState:e},n.queue=i,n=Yx.bind(null,Ce,i),i.dispatch=n,i=Gf(!1),s=Cg.bind(null,Ce,!1,i.queue),i=tn(),r={state:e,dispatch:null,action:t,pending:null},i.queue=r,n=m2.bind(null,Ce,r,s,n),r.dispatch=n,i.memoizedState=t,[e,n,!1]}function Rv(t){var e=_t();return Ox(e,Qe,t)}function Ox(t,e,n){if(e=Eg(t,e,Mx)[0],t=$c(Ui)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=Pl(e)}catch(a){throw a===$a?_d:a}else i=e;e=_t();var r=e.queue,s=r.dispatch;return n!==e.memoizedState&&(Ce.flags|=2048,wa(9,{destroy:void 0},y2.bind(null,r,n),null)),[i,s,t]}function y2(t,e){t.action=e}function Dv(t){var e=_t(),n=Qe;if(n!==null)return Ox(e,n,t);_t(),e=e.memoizedState,n=_t();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function wa(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=Ce.updateQueue,e===null&&(e=bd(),Ce.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function jx(){return _t().memoizedState}function Yc(t,e,n,i){var r=tn();Ce.flags|=t,r.memoizedState=wa(1|e,{destroy:void 0},n,i===void 0?null:i)}function Td(t,e,n,i){var r=_t();i=i===void 0?null:i;var s=r.memoizedState.inst;Qe!==null&&i!==null&&yg(i,Qe.memoizedState.deps)?r.memoizedState=wa(e,s,n,i):(Ce.flags|=t,r.memoizedState=wa(1|e,s,n,i))}function Mv(t,e){Yc(8390656,8,t,e)}function Sg(t,e){Td(2048,8,t,e)}function v2(t){Ce.flags|=4;var e=Ce.updateQueue;if(e===null)e=bd(),Ce.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function kx(t){var e=_t().memoizedState;return v2({ref:e,nextImpl:t}),function(){if(ze&2)throw Error(H(440));return e.impl.apply(void 0,arguments)}}function Nx(t,e){return Td(4,2,t,e)}function Vx(t,e){return Td(4,4,t,e)}function Px(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Lx(t,e,n){n=n!=null?n.concat([t]):null,Td(4,4,Px.bind(null,e,t),n)}function wg(){}function Ux(t,e){var n=_t();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&yg(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function zx(t,e){var n=_t();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&yg(e,i[1]))return i[0];if(i=t(),Es){dr(!0);try{t()}finally{dr(!1)}}return n.memoizedState=[i,e],i}function Ag(t,e,n){return n===void 0||Li&1073741824&&!(Ne&261930)?t.memoizedState=e:(t.memoizedState=n,t=C1(),Ce.lanes|=t,Vr|=t,n)}function Bx(t,e,n,i){return wn(n,e)?n:Sa.current!==null?(t=Ag(t,n,i),wn(t,e)||(At=!0),t):!(Li&42)||Li&1073741824&&!(Ne&261930)?(At=!0,t.memoizedState=n):(t=C1(),Ce.lanes|=t,Vr|=t,e)}function qx(t,e,n,i,r){var s=Be.p;Be.p=s!==0&&8>s?s:8;var a=_e.T,l={};_e.T=l,Cg(t,!1,e,n);try{var c=r(),d=_e.S;if(d!==null&&d(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var p=f2(c,i);Fo(t,e,p,Sn(t))}else Fo(t,e,i,Sn(t))}catch(m){Fo(t,e,{then:function(){},status:"rejected",reason:m},Sn())}finally{Be.p=s,a!==null&&l.types!==null&&(a.types=l.types),_e.T=a}}function _2(){}function Yf(t,e,n,i){if(t.tag!==5)throw Error(H(476));var r=Hx(t).queue;qx(t,r,e,us,n===null?_2:function(){return Fx(t),n(i)})}function Hx(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:us,baseState:us,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:us},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function Fx(t){var e=Hx(t);e.next===null&&(e=t.alternate.memoizedState),Fo(t,e.next.queue,{},Sn())}function Ig(){return Ft(pl)}function Gx(){return _t().memoizedState}function $x(){return _t().memoizedState}function b2(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Sn();t=br(n);var i=xr(e,t,n);i!==null&&(hn(i,e,n),Bo(i,e,n)),e={cache:hg()},t.payload=e;return}e=e.return}}function x2(t,e,n){var i=Sn();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ed(t)?Qx(e,n):(n=lg(t,e,n,i),n!==null&&(hn(n,t,i),Kx(n,e,i)))}function Yx(t,e,n){var i=Sn();Fo(t,e,n,i)}function Fo(t,e,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ed(t))Qx(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(r.hasEagerState=!0,r.eagerState=l,wn(l,a))return vd(t,e,r,0),Xe===null&&yd(),!1}catch{}finally{}if(n=lg(t,e,r,i),n!==null)return hn(n,t,i),Kx(n,e,i),!0}return!1}function Cg(t,e,n,i){if(i={lane:2,revertLane:Pg(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Ed(t)){if(e)throw Error(H(479))}else e=lg(t,n,i,2),e!==null&&hn(e,t,2)}function Ed(t){var e=t.alternate;return t===Ce||e!==null&&e===Ce}function Qx(t,e){pa=wu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Kx(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,kb(t,n)}}var dl={readContext:Ft,use:xd,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt};dl.useEffectEvent=pt;var Wx={readContext:Ft,use:xd,useCallback:function(t,e){return tn().memoizedState=[t,e===void 0?null:e],t},useContext:Ft,useEffect:Mv,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Yc(4194308,4,Px.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Yc(4194308,4,t,e)},useInsertionEffect:function(t,e){Yc(4,2,t,e)},useMemo:function(t,e){var n=tn();e=e===void 0?null:e;var i=t();if(Es){dr(!0);try{t()}finally{dr(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=tn();if(n!==void 0){var r=n(e);if(Es){dr(!0);try{n(e)}finally{dr(!1)}}}else r=e;return i.memoizedState=i.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},i.queue=t,t=t.dispatch=x2.bind(null,Ce,t),[i.memoizedState,t]},useRef:function(t){var e=tn();return t={current:t},e.memoizedState=t},useState:function(t){t=Gf(t);var e=t.queue,n=Yx.bind(null,Ce,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:wg,useDeferredValue:function(t,e){var n=tn();return Ag(n,t,e)},useTransition:function(){var t=Gf(!1);return t=qx.bind(null,Ce,t.queue,!0,!1),tn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=Ce,r=tn();if(Ve){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),Xe===null)throw Error(H(349));Ne&127||Ex(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,Mv(wx.bind(null,i,s,t),[t]),i.flags|=2048,wa(9,{destroy:void 0},Sx.bind(null,i,s,n,e),null),n},useId:function(){var t=tn(),e=Xe.identifierPrefix;if(Ve){var n=ai,i=si;n=(i&~(1<<32-En(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Au++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=p2++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:Ig,useFormState:Cv,useActionState:Cv,useOptimistic:function(t){var e=tn();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Cg.bind(null,Ce,!0,n),n.dispatch=e,[t,e]},useMemoCache:Tg,useCacheRefresh:function(){return tn().memoizedState=b2.bind(null,Ce)},useEffectEvent:function(t){var e=tn(),n={impl:t};return e.memoizedState=n,function(){if(ze&2)throw Error(H(440));return n.impl.apply(void 0,arguments)}}},Rg={readContext:Ft,use:xd,useCallback:Ux,useContext:Ft,useEffect:Sg,useImperativeHandle:Lx,useInsertionEffect:Nx,useLayoutEffect:Vx,useMemo:zx,useReducer:$c,useRef:jx,useState:function(){return $c(Ui)},useDebugValue:wg,useDeferredValue:function(t,e){var n=_t();return Bx(n,Qe.memoizedState,t,e)},useTransition:function(){var t=$c(Ui)[0],e=_t().memoizedState;return[typeof t=="boolean"?t:Pl(t),e]},useSyncExternalStore:Tx,useId:Gx,useHostTransitionStatus:Ig,useFormState:Rv,useActionState:Rv,useOptimistic:function(t,e){var n=_t();return Cx(n,Qe,t,e)},useMemoCache:Tg,useCacheRefresh:$x};Rg.useEffectEvent=kx;var Xx={readContext:Ft,use:xd,useCallback:Ux,useContext:Ft,useEffect:Sg,useImperativeHandle:Lx,useInsertionEffect:Nx,useLayoutEffect:Vx,useMemo:zx,useReducer:Ph,useRef:jx,useState:function(){return Ph(Ui)},useDebugValue:wg,useDeferredValue:function(t,e){var n=_t();return Qe===null?Ag(n,t,e):Bx(n,Qe.memoizedState,t,e)},useTransition:function(){var t=Ph(Ui)[0],e=_t().memoizedState;return[typeof t=="boolean"?t:Pl(t),e]},useSyncExternalStore:Tx,useId:Gx,useHostTransitionStatus:Ig,useFormState:Dv,useActionState:Dv,useOptimistic:function(t,e){var n=_t();return Qe!==null?Cx(n,Qe,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Tg,useCacheRefresh:$x};Xx.useEffectEvent=kx;function Lh(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:st({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Qf={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Sn(),r=br(i);r.payload=e,n!=null&&(r.callback=n),e=xr(t,r,i),e!==null&&(hn(e,t,i),Bo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Sn(),r=br(i);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=xr(t,r,i),e!==null&&(hn(e,t,i),Bo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Sn(),i=br(n);i.tag=2,e!=null&&(i.callback=e),e=xr(t,i,n),e!==null&&(hn(e,t,n),Bo(e,t,n))}};function Ov(t,e,n,i,r,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!al(n,i)||!al(r,s):!0}function jv(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Qf.enqueueReplaceState(e,e.state,null)}function Ss(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=st({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}function Jx(t){vu(t)}function Zx(t){console.error(t)}function e1(t){vu(t)}function Iu(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function kv(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Kf(t,e,n){return n=br(n),n.tag=3,n.payload={element:null},n.callback=function(){Iu(t,e)},n}function t1(t){return t=br(t),t.tag=3,t}function n1(t,e,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;t.payload=function(){return r(s)},t.callback=function(){kv(e,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){kv(e,n,i),typeof r!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function T2(t,e,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&Ga(e,n,r,!0),n=An.current,n!==null){switch(n.tag){case 31:case 13:return Ln===null?Ou():n.alternate===null&&gt===0&&(gt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Tu?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Kh(t,i,r)),!1;case 22:return n.flags|=65536,i===Tu?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Kh(t,i,r)),!1}throw Error(H(435,n.tag))}return Kh(t,i,r),Ou(),!1}if(Ve)return e=An.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,i!==Vf&&(t=Error(H(422),{cause:i}),ll(Nn(t,n)))):(i!==Vf&&(e=Error(H(423),{cause:i}),ll(Nn(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,i=Nn(i,n),r=Kf(t.stateNode,i,r),Vh(t,r),gt!==4&&(gt=2)),!1;var s=Error(H(520),{cause:i});if(s=Nn(s,n),Yo===null?Yo=[s]:Yo.push(s),gt!==4&&(gt=2),e===null)return!0;i=Nn(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=Kf(n.stateNode,i,t),Vh(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Tr===null||!Tr.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=t1(r),n1(r,t,n,i),Vh(n,r),!1}n=n.return}while(n!==null);return!1}var Dg=Error(H(461)),At=!1;function Ut(t,e,n,i){e.child=t===null?mx(e,null,n,i):Ts(e,t.child,n,i)}function Nv(t,e,n,i,r){n=n.render;var s=e.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return xs(e),i=vg(t,e,n,a,s,r),l=_g(),t!==null&&!At?(bg(t,e,r),zi(t,e,r)):(Ve&&l&&ug(e),e.flags|=1,Ut(t,e,i,r),e.child)}function Vv(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!cg(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,i1(t,e,s,i,r)):(t=Fc(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!Mg(t,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:al,n(a,i)&&t.ref===e.ref)return zi(t,e,r)}return e.flags|=1,t=ji(s,i),t.ref=e.ref,t.return=e,e.child=t}function i1(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(al(s,i)&&t.ref===e.ref)if(At=!1,e.pendingProps=i=s,Mg(t,r))t.flags&131072&&(At=!0);else return e.lanes=t.lanes,zi(t,e,r)}return Wf(t,e,n,i,r)}function r1(t,e,n,i){var r=i.children,s=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(e.flags&128){if(s=s!==null?s.baseLanes|n:n,t!==null){for(i=e.child=t.child,r=0;i!==null;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~s}else i=0,e.child=null;return Pv(t,e,s,n,i)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Gc(e,s!==null?s.cachePool:null),s!==null?wv(e,s):Hf(),_x(e);else return i=e.lanes=536870912,Pv(t,e,s!==null?s.baseLanes|n:n,n,i)}else s!==null?(Gc(e,s.cachePool),wv(e,s),ar(),e.memoizedState=null):(t!==null&&Gc(e,null),Hf(),ar());return Ut(t,e,r,n),e.child}function Ro(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function Pv(t,e,n,i,r){var s=fg();return s=s===null?null:{parent:St._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&Gc(e,null),Hf(),_x(e),t!==null&&Ga(t,e,i,!0),e.childLanes=r,null}function Qc(t,e){return e=Cu({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function Lv(t,e,n){return Ts(e,t.child,null,n),t=Qc(e,e.pendingProps),t.flags|=2,yn(e),e.memoizedState=null,t}function E2(t,e,n){var i=e.pendingProps,r=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(Ve){if(i.mode==="hidden")return t=Qc(e,i),e.lanes=536870912,Ro(null,t);if(Ff(e),(t=nt)?(t=W1(t,Vn),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:jr!==null?{id:si,overflow:ai}:null,retryLane:536870912,hydrationErrors:null},n=cx(t),n.return=e,e.child=n,qt=e,nt=null)):t=null,t===null)throw kr(e);return e.lanes=536870912,null}return Qc(e,i)}var s=t.memoizedState;if(s!==null){var a=s.dehydrated;if(Ff(e),r)if(e.flags&256)e.flags&=-257,e=Lv(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(H(558));else if(At||Ga(t,e,n,!1),r=(n&t.childLanes)!==0,At||r){if(i=Xe,i!==null&&(a=Nb(i,n),a!==0&&a!==s.retryLane))throw s.retryLane=a,js(t,a),hn(i,t,a),Dg;Ou(),e=Lv(t,e,n)}else t=s.treeContext,nt=Un(a.nextSibling),qt=e,Ve=!0,_r=null,Vn=!1,t!==null&&dx(e,t),e=Qc(e,i),e.flags|=4096;return e}return t=ji(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Kc(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(H(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Wf(t,e,n,i,r){return xs(e),n=vg(t,e,n,i,void 0,r),i=_g(),t!==null&&!At?(bg(t,e,r),zi(t,e,r)):(Ve&&i&&ug(e),e.flags|=1,Ut(t,e,n,r),e.child)}function Uv(t,e,n,i,r,s){return xs(e),e.updateQueue=null,n=xx(e,i,n,r),bx(t),i=_g(),t!==null&&!At?(bg(t,e,s),zi(t,e,s)):(Ve&&i&&ug(e),e.flags|=1,Ut(t,e,n,s),e.child)}function zv(t,e,n,i,r){if(xs(e),e.stateNode===null){var s=sa,a=n.contextType;typeof a=="object"&&a!==null&&(s=Ft(a)),s=new n(i,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Qf,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=i,s.state=e.memoizedState,s.refs={},gg(e),a=n.contextType,s.context=typeof a=="object"&&a!==null?Ft(a):sa,s.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Lh(e,n,a,i),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&Qf.enqueueReplaceState(s,s.state,null),Ho(e,i,s,r),qo(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){s=e.stateNode;var l=e.memoizedProps,c=Ss(n,l);s.props=c;var d=s.context,p=n.contextType;a=sa,typeof p=="object"&&p!==null&&(a=Ft(p));var m=n.getDerivedStateFromProps;p=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||d!==a)&&jv(e,s,i,a),ir=!1;var f=e.memoizedState;s.state=f,Ho(e,i,s,r),qo(),d=e.memoizedState,l||f!==d||ir?(typeof m=="function"&&(Lh(e,n,m,i),d=e.memoizedState),(c=ir||Ov(e,n,c,i,f,d,a))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),s.props=i,s.state=d,s.context=a,i=c):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,Bf(t,e),a=e.memoizedProps,p=Ss(n,a),s.props=p,m=e.pendingProps,f=s.context,d=n.contextType,c=sa,typeof d=="object"&&d!==null&&(c=Ft(d)),l=n.getDerivedStateFromProps,(d=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==m||f!==c)&&jv(e,s,i,c),ir=!1,f=e.memoizedState,s.state=f,Ho(e,i,s,r),qo();var y=e.memoizedState;a!==m||f!==y||ir||t!==null&&t.dependencies!==null&&xu(t.dependencies)?(typeof l=="function"&&(Lh(e,n,l,i),y=e.memoizedState),(p=ir||Ov(e,n,p,i,f,y,c)||t!==null&&t.dependencies!==null&&xu(t.dependencies))?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,y,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,y,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),s.props=i,s.state=y,s.context=c,i=p):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return s=i,Kc(t,e),i=(e.flags&128)!==0,s||i?(s=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&i?(e.child=Ts(e,t.child,null,r),e.child=Ts(e,null,n,r)):Ut(t,e,n,r),e.memoizedState=s.state,t=e.child):t=zi(t,e,r),t}function Bv(t,e,n,i){return bs(),e.flags|=256,Ut(t,e,n,i),e.child}var Uh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zh(t){return{baseLanes:t,cachePool:fx()}}function Bh(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=_n),t}function s1(t,e,n){var i=e.pendingProps,r=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(yt.current&2)!==0),a&&(r=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(Ve){if(r?sr(e):ar(),(t=nt)?(t=W1(t,Vn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:jr!==null?{id:si,overflow:ai}:null,retryLane:536870912,hydrationErrors:null},n=cx(t),n.return=e,e.child=n,qt=e,nt=null)):t=null,t===null)throw kr(e);return up(t)?e.lanes=32:e.lanes=536870912,null}var l=i.children;return i=i.fallback,r?(ar(),r=e.mode,l=Cu({mode:"hidden",children:l},r),i=ds(i,r,n,null),l.return=e,i.return=e,l.sibling=i,e.child=l,i=e.child,i.memoizedState=zh(n),i.childLanes=Bh(t,a,n),e.memoizedState=Uh,Ro(null,i)):(sr(e),Xf(e,l))}var c=t.memoizedState;if(c!==null&&(l=c.dehydrated,l!==null)){if(s)e.flags&256?(sr(e),e.flags&=-257,e=qh(t,e,n)):e.memoizedState!==null?(ar(),e.child=t.child,e.flags|=128,e=null):(ar(),l=i.fallback,r=e.mode,i=Cu({mode:"visible",children:i.children},r),l=ds(l,r,n,null),l.flags|=2,i.return=e,l.return=e,i.sibling=l,e.child=i,Ts(e,t.child,null,n),i=e.child,i.memoizedState=zh(n),i.childLanes=Bh(t,a,n),e.memoizedState=Uh,e=Ro(null,i));else if(sr(e),up(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var d=a.dgst;a=d,i=Error(H(419)),i.stack="",i.digest=a,ll({value:i,source:null,stack:null}),e=qh(t,e,n)}else if(At||Ga(t,e,n,!1),a=(n&t.childLanes)!==0,At||a){if(a=Xe,a!==null&&(i=Nb(a,n),i!==0&&i!==c.retryLane))throw c.retryLane=i,js(t,i),hn(a,t,i),Dg;cp(l)||Ou(),e=qh(t,e,n)}else cp(l)?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,nt=Un(l.nextSibling),qt=e,Ve=!0,_r=null,Vn=!1,t!==null&&dx(e,t),e=Xf(e,i.children),e.flags|=4096);return e}return r?(ar(),l=i.fallback,r=e.mode,c=t.child,d=c.sibling,i=ji(c,{mode:"hidden",children:i.children}),i.subtreeFlags=c.subtreeFlags&65011712,d!==null?l=ji(d,l):(l=ds(l,r,n,null),l.flags|=2),l.return=e,i.return=e,i.sibling=l,e.child=i,Ro(null,i),i=e.child,l=t.child.memoizedState,l===null?l=zh(n):(r=l.cachePool,r!==null?(c=St._currentValue,r=r.parent!==c?{parent:c,pool:c}:r):r=fx(),l={baseLanes:l.baseLanes|n,cachePool:r}),i.memoizedState=l,i.childLanes=Bh(t,a,n),e.memoizedState=Uh,Ro(t.child,i)):(sr(e),n=t.child,t=n.sibling,n=ji(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function Xf(t,e){return e=Cu({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Cu(t,e){return t=vn(22,t,null,e),t.lanes=0,t}function qh(t,e,n){return Ts(e,t.child,null,n),t=Xf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qv(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Lf(t.return,e,n)}function Hh(t,e,n,i,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r,a.treeForkCount=s)}function a1(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;i=i.children;var a=yt.current,l=(a&2)!==0;if(l?(a=a&1|2,e.flags|=128):a&=1,Ze(yt,a),Ut(t,e,i,n),i=Ve?ol:0,!l&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qv(t,n,e);else if(t.tag===19)qv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Su(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Hh(e,!1,r,n,s,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Su(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Hh(e,!0,n,null,s,i);break;case"together":Hh(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function zi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vr|=e.lanes,!(n&e.childLanes))if(t!==null){if(Ga(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=ji(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ji(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Mg(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&xu(t)))}function S2(t,e,n){switch(e.tag){case 3:pu(e,e.stateNode.containerInfo),rr(e,St,t.memoizedState.cache),bs();break;case 27:case 5:wf(e);break;case 4:pu(e,e.stateNode.containerInfo);break;case 10:rr(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Ff(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(sr(e),e.flags|=128,null):n&e.child.childLanes?s1(t,e,n):(sr(e),t=zi(t,e,n),t!==null?t.sibling:null);sr(e);break;case 19:var r=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(Ga(t,e,n,!1),i=(n&e.childLanes)!==0),r){if(i)return a1(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ze(yt,yt.current),i)break;return null;case 22:return e.lanes=0,r1(t,e,n,e.pendingProps);case 24:rr(e,St,t.memoizedState.cache)}return zi(t,e,n)}function o1(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)At=!0;else{if(!Mg(t,n)&&!(e.flags&128))return At=!1,S2(t,e,n);At=!!(t.flags&131072)}else At=!1,Ve&&e.flags&1048576&&ux(e,ol,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(t=ss(e.elementType),e.type=t,typeof t=="function")cg(t)?(i=Ss(t,i),e.tag=1,e=zv(null,e,t,i,n)):(e.tag=0,e=Wf(null,e,t,i,n));else{if(t!=null){var r=t.$$typeof;if(r===Kp){e.tag=11,e=Nv(null,e,t,i,n);break e}else if(r===Wp){e.tag=14,e=Vv(null,e,t,i,n);break e}}throw e=Ef(t)||t,Error(H(306,e,""))}}return e;case 0:return Wf(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,r=Ss(i,e.pendingProps),zv(t,e,i,r,n);case 3:e:{if(pu(e,e.stateNode.containerInfo),t===null)throw Error(H(387));i=e.pendingProps;var s=e.memoizedState;r=s.element,Bf(t,e),Ho(e,i,null,n);var a=e.memoizedState;if(i=a.cache,rr(e,St,i),i!==s.cache&&Uf(e,[St],n,!0),qo(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=Bv(t,e,i,n);break e}else if(i!==r){r=Nn(Error(H(424)),e),ll(r),e=Bv(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(nt=Un(t.firstChild),qt=e,Ve=!0,_r=null,Vn=!0,n=mx(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(bs(),i===r){e=zi(t,e,n);break e}Ut(t,e,i,n)}e=e.child}return e;case 26:return Kc(t,e),t===null?(n=l0(e.type,null,e.pendingProps,null))?e.memoizedState=n:Ve||(n=e.type,t=e.pendingProps,i=Vu(vr.current).createElement(n),i[Bt]=e,i[fn]=t,Gt(i,n,t),kt(i),e.stateNode=i):e.memoizedState=l0(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return wf(e),t===null&&Ve&&(i=e.stateNode=X1(e.type,e.pendingProps,vr.current),qt=e,Vn=!0,r=nt,Yr(e.type)?(dp=r,nt=Un(i.firstChild)):nt=r),Ut(t,e,e.pendingProps.children,n),Kc(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Ve&&((r=i=nt)&&(i=eI(i,e.type,e.pendingProps,Vn),i!==null?(e.stateNode=i,qt=e,nt=Un(i.firstChild),Vn=!1,r=!0):r=!1),r||kr(e)),wf(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,i=s.children,op(r,s)?i=null:a!==null&&op(r,a)&&(e.flags|=32),e.memoizedState!==null&&(r=vg(t,e,g2,null,null,n),pl._currentValue=r),Kc(t,e),Ut(t,e,i,n),e.child;case 6:return t===null&&Ve&&((t=n=nt)&&(n=tI(n,e.pendingProps,Vn),n!==null?(e.stateNode=n,qt=e,nt=null,t=!0):t=!1),t||kr(e)),null;case 13:return s1(t,e,n);case 4:return pu(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ts(e,null,i,n):Ut(t,e,i,n),e.child;case 11:return Nv(t,e,e.type,e.pendingProps,n);case 7:return Ut(t,e,e.pendingProps,n),e.child;case 8:return Ut(t,e,e.pendingProps.children,n),e.child;case 12:return Ut(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,rr(e,e.type,i.value),Ut(t,e,i.children,n),e.child;case 9:return r=e.type._context,i=e.pendingProps.children,xs(e),r=Ft(r),i=i(r),e.flags|=1,Ut(t,e,i,n),e.child;case 14:return Vv(t,e,e.type,e.pendingProps,n);case 15:return i1(t,e,e.type,e.pendingProps,n);case 19:return a1(t,e,n);case 31:return E2(t,e,n);case 22:return r1(t,e,n,e.pendingProps);case 24:return xs(e),i=Ft(St),t===null?(r=fg(),r===null&&(r=Xe,s=hg(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),e.memoizedState={parent:i,cache:r},gg(e),rr(e,St,r)):(t.lanes&n&&(Bf(t,e),Ho(e,null,null,n),qo()),r=t.memoizedState,s=e.memoizedState,r.parent!==i?(r={parent:i,cache:i},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),rr(e,St,i)):(i=s.cache,rr(e,St,i),i!==r.cache&&Uf(e,[St],n,!0))),Ut(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(H(156,e.tag))}function xi(t){t.flags|=4}function Fh(t,e,n,i,r){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(r&335544128)===r)if(t.stateNode.complete)t.flags|=8192;else if(M1())t.flags|=8192;else throw fs=Tu,pg}else t.flags&=-16777217}function Hv(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!eT(e))if(M1())t.flags|=8192;else throw fs=Tu,pg}function Cc(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?Ob():536870912,t.lanes|=e,Aa|=e)}function Eo(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function tt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function w2(t,e,n){var i=e.pendingProps;switch(dg(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(e),null;case 1:return tt(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),ki(St),ba(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(qs(e)?xi(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nh())),tt(e),null;case 26:var r=e.type,s=e.memoizedState;return t===null?(xi(e),s!==null?(tt(e),Hv(e,s)):(tt(e),Fh(e,r,null,i,n))):s?s!==t.memoizedState?(xi(e),tt(e),Hv(e,s)):(tt(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&xi(e),tt(e),Fh(e,r,t,i,n)),null;case 27:if(gu(e),n=vr.current,r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&xi(e);else{if(!i){if(e.stateNode===null)throw Error(H(166));return tt(e),null}t=li.current,qs(e)?vv(e):(t=X1(r,i,n),e.stateNode=t,xi(e))}return tt(e),null;case 5:if(gu(e),r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&xi(e);else{if(!i){if(e.stateNode===null)throw Error(H(166));return tt(e),null}if(s=li.current,qs(e))vv(e);else{var a=Vu(vr.current);switch(s){case 1:s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":s=a.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof i.is=="string"?a.createElement("select",{is:i.is}):a.createElement("select"),i.multiple?s.multiple=!0:i.size&&(s.size=i.size);break;default:s=typeof i.is=="string"?a.createElement(r,{is:i.is}):a.createElement(r)}}s[Bt]=e,s[fn]=i;e:for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)s.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}e.stateNode=s;e:switch(Gt(s,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&xi(e)}}return tt(e),Fh(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&xi(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(H(166));if(t=vr.current,qs(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,r=qt,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}t[Bt]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||Y1(t.nodeValue,n)),t||kr(e,!0)}else t=Vu(t).createTextNode(i),t[Bt]=e,e.stateNode=t}return tt(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=qs(e),n!==null){if(t===null){if(!i)throw Error(H(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(557));t[Bt]=e}else bs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tt(e),t=!1}else n=Nh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(yn(e),e):(yn(e),null);if(e.flags&128)throw Error(H(558))}return tt(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=qs(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(H(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(H(317));r[Bt]=e}else bs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tt(e),r=!1}else r=Nh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(yn(e),e):(yn(e),null)}return yn(e),e.flags&128?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Cc(e,e.updateQueue),tt(e),null);case 4:return ba(),t===null&&Lg(e.stateNode.containerInfo),tt(e),null;case 10:return ki(e.type),tt(e),null;case 19:if(Nt(yt),i=e.memoizedState,i===null)return tt(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)Eo(i,!1);else{if(gt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Su(t),s!==null){for(e.flags|=128,Eo(i,!1),t=s.updateQueue,e.updateQueue=t,Cc(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)lx(n,t),n=n.sibling;return Ze(yt,yt.current&1|2),Ve&&wi(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&xn()>Du&&(e.flags|=128,r=!0,Eo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Su(s),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,Cc(e,t),Eo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!Ve)return tt(e),null}else 2*xn()-i.renderingStartTime>Du&&n!==536870912&&(e.flags|=128,r=!0,Eo(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(t=i.last,t!==null?t.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=xn(),t.sibling=null,n=yt.current,Ze(yt,r?n&1|2:n&1),Ve&&wi(e,i.treeForkCount),t):(tt(e),null);case 22:case 23:return yn(e),mg(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(tt(e),e.subtreeFlags&6&&(e.flags|=8192)):tt(e),n=e.updateQueue,n!==null&&Cc(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&Nt(hs),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),ki(St),tt(e),null;case 25:return null;case 30:return null}throw Error(H(156,e.tag))}function A2(t,e){switch(dg(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ki(St),ba(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return gu(e),null;case 31:if(e.memoizedState!==null){if(yn(e),e.alternate===null)throw Error(H(340));bs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(yn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));bs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Nt(yt),null;case 4:return ba(),null;case 10:return ki(e.type),null;case 22:case 23:return yn(e),mg(),t!==null&&Nt(hs),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return ki(St),null;case 25:return null;default:return null}}function l1(t,e){switch(dg(e),e.tag){case 3:ki(St),ba();break;case 26:case 27:case 5:gu(e);break;case 4:ba();break;case 31:e.memoizedState!==null&&yn(e);break;case 13:yn(e);break;case 19:Nt(yt);break;case 10:ki(e.type);break;case 22:case 23:yn(e),mg(),t!==null&&Nt(hs);break;case 24:ki(St)}}function Ll(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&t)===t){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(l){Fe(e,e.return,l)}}function Nr(t,e,n){try{var i=e.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&t)===t){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,r=e;var c=n,d=l;try{d()}catch(p){Fe(r,c,p)}}}i=i.next}while(i!==s)}}catch(p){Fe(e,e.return,p)}}function c1(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{vx(e,n)}catch(i){Fe(t,t.return,i)}}}function u1(t,e,n){n.props=Ss(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){Fe(t,e,i)}}function Go(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(r){Fe(t,e,r)}}function oi(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Fe(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function d1(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Fe(t,t.return,r)}}function Gh(t,e,n){try{var i=t.stateNode;Q2(i,t.type,n,e),i[fn]=e}catch(r){Fe(t,t.return,r)}}function h1(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Yr(t.type)||t.tag===4}function $h(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||h1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Yr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ri));else if(i!==4&&(i===27&&Yr(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Jf(t,e,n),t=t.sibling;t!==null;)Jf(t,e,n),t=t.sibling}function Ru(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&Yr(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Ru(t,e,n),t=t.sibling;t!==null;)Ru(t,e,n),t=t.sibling}function f1(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);Gt(e,i,n),e[Bt]=t,e[fn]=n}catch(s){Fe(t,t.return,s)}}var Ai=!1,Et=!1,Yh=!1,Fv=typeof WeakSet=="function"?WeakSet:Set,jt=null;function I2(t,e){if(t=t.containerInfo,sp=zu,t=ex(t),ag(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,p=0,m=t,f=null;t:for(;;){for(var y;m!==n||r!==0&&m.nodeType!==3||(l=a+r),m!==s||i!==0&&m.nodeType!==3||(c=a+i),m.nodeType===3&&(a+=m.nodeValue.length),(y=m.firstChild)!==null;)f=m,m=y;for(;;){if(m===t)break t;if(f===n&&++d===r&&(l=a),f===s&&++p===i&&(c=a),(y=m.nextSibling)!==null)break;m=f,f=m.parentNode}m=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ap={focusedElem:t,selectionRange:n},zu=!1,jt=e;jt!==null;)if(e=jt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,jt=t;else for(;jt!==null;){switch(e=jt,s=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)r=t[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,n=e,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var S=Ss(n.type,r);t=i.getSnapshotBeforeUpdate(S,s),i.__reactInternalSnapshotBeforeUpdate=t}catch(D){Fe(n,n.return,D)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)lp(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":lp(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(H(163))}if(t=e.sibling,t!==null){t.return=e.return,jt=t;break}jt=e.return}}function p1(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Ei(t,n),i&4&&Ll(5,n);break;case 1:if(Ei(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){Fe(n,n.return,a)}else{var r=Ss(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){Fe(n,n.return,a)}}i&64&&c1(n),i&512&&Go(n,n.return);break;case 3:if(Ei(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{vx(t,e)}catch(a){Fe(n,n.return,a)}}break;case 27:e===null&&i&4&&f1(n);case 26:case 5:Ei(t,n),e===null&&i&4&&d1(n),i&512&&Go(n,n.return);break;case 12:Ei(t,n);break;case 31:Ei(t,n),i&4&&y1(t,n);break;case 13:Ei(t,n),i&4&&v1(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=V2.bind(null,n),nI(t,n))));break;case 22:if(i=n.memoizedState!==null||Ai,!i){e=e!==null&&e.memoizedState!==null||Et,r=Ai;var s=Et;Ai=i,(Et=e)&&!s?Si(t,n,(n.subtreeFlags&8772)!==0):Ei(t,n),Ai=r,Et=s}break;case 30:break;default:Ei(t,n)}}function g1(t){var e=t.alternate;e!==null&&(t.alternate=null,g1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&eg(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ct=null,ln=!1;function Ti(t,e,n){for(n=n.child;n!==null;)m1(t,e,n),n=n.sibling}function m1(t,e,n){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(Ml,n)}catch{}switch(n.tag){case 26:Et||oi(n,e),Ti(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Et||oi(n,e);var i=ct,r=ln;Yr(n.type)&&(ct=n.stateNode,ln=!1),Ti(t,e,n),Ko(n.stateNode),ct=i,ln=r;break;case 5:Et||oi(n,e);case 6:if(i=ct,r=ln,ct=null,Ti(t,e,n),ct=i,ln=r,ct!==null)if(ln)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(n.stateNode)}catch(s){Fe(n,e,s)}else try{ct.removeChild(n.stateNode)}catch(s){Fe(n,e,s)}break;case 18:ct!==null&&(ln?(t=ct,i0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Da(t)):i0(ct,n.stateNode));break;case 4:i=ct,r=ln,ct=n.stateNode.containerInfo,ln=!0,Ti(t,e,n),ct=i,ln=r;break;case 0:case 11:case 14:case 15:Nr(2,n,e),Et||Nr(4,n,e),Ti(t,e,n);break;case 1:Et||(oi(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&u1(n,e,i)),Ti(t,e,n);break;case 21:Ti(t,e,n);break;case 22:Et=(i=Et)||n.memoizedState!==null,Ti(t,e,n),Et=i;break;default:Ti(t,e,n)}}function y1(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Da(t)}catch(n){Fe(e,e.return,n)}}}function v1(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Da(t)}catch(n){Fe(e,e.return,n)}}function C2(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Fv),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Fv),e;default:throw Error(H(435,t.tag))}}function Rc(t,e){var n=C2(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var r=P2.bind(null,t,i);i.then(r,r)}})}function an(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 27:if(Yr(l.type)){ct=l.stateNode,ln=!1;break e}break;case 5:ct=l.stateNode,ln=!1;break e;case 3:case 4:ct=l.stateNode.containerInfo,ln=!0;break e}l=l.return}if(ct===null)throw Error(H(160));m1(s,a,r),ct=null,ln=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)_1(e,t),e=e.sibling}var Qn=null;function _1(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:an(e,t),on(t),i&4&&(Nr(3,t,t.return),Ll(3,t),Nr(5,t,t.return));break;case 1:an(e,t),on(t),i&512&&(Et||n===null||oi(n,n.return)),i&64&&Ai&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=Qn;if(an(e,t),on(t),i&512&&(Et||n===null||oi(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[kl]||s[Bt]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),Gt(s,i,n),s[Bt]=t,kt(s),i=s;break e;case"link":var a=u0("link","href",r).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(s=a[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break t}}s=r.createElement(i),Gt(s,i,n),r.head.appendChild(s);break;case"meta":if(a=u0("meta","content",r).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(s=a[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break t}}s=r.createElement(i),Gt(s,i,n),r.head.appendChild(s);break;default:throw Error(H(468,i))}s[Bt]=t,kt(s),i=s}t.stateNode=i}else d0(r,t.type,t.stateNode);else t.stateNode=c0(r,i,t.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?d0(r,t.type,t.stateNode):c0(r,i,t.memoizedProps)):i===null&&t.stateNode!==null&&Gh(t,t.memoizedProps,n.memoizedProps)}break;case 27:an(e,t),on(t),i&512&&(Et||n===null||oi(n,n.return)),n!==null&&i&4&&Gh(t,t.memoizedProps,n.memoizedProps);break;case 5:if(an(e,t),on(t),i&512&&(Et||n===null||oi(n,n.return)),t.flags&32){r=t.stateNode;try{Ta(r,"")}catch(S){Fe(t,t.return,S)}}i&4&&t.stateNode!=null&&(r=t.memoizedProps,Gh(t,r,n!==null?n.memoizedProps:r)),i&1024&&(Yh=!0);break;case 6:if(an(e,t),on(t),i&4){if(t.stateNode===null)throw Error(H(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(S){Fe(t,t.return,S)}}break;case 3:if(Jc=null,r=Qn,Qn=Pu(e.containerInfo),an(e,t),Qn=r,on(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Da(e.containerInfo)}catch(S){Fe(t,t.return,S)}Yh&&(Yh=!1,b1(t));break;case 4:i=Qn,Qn=Pu(t.stateNode.containerInfo),an(e,t),on(t),Qn=i;break;case 12:an(e,t),on(t);break;case 31:an(e,t),on(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Rc(t,i)));break;case 13:an(e,t),on(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Sd=xn()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Rc(t,i)));break;case 22:r=t.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,d=Ai,p=Et;if(Ai=d||r,Et=p||c,an(e,t),Et=p,Ai=d,on(t),i&8192)e:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||c||Ai||Et||as(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){c=n=e;try{if(s=c.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var m=c.memoizedProps.style,f=m!=null&&m.hasOwnProperty("display")?m.display:null;l.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(S){Fe(c,c.return,S)}}}else if(e.tag===6){if(n===null){c=e;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(S){Fe(c,c.return,S)}}}else if(e.tag===18){if(n===null){c=e;try{var y=c.stateNode;r?r0(y,!0):r0(c.stateNode,!1)}catch(S){Fe(c,c.return,S)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Rc(t,n))));break;case 19:an(e,t),on(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Rc(t,i)));break;case 30:break;case 21:break;default:an(e,t),on(t)}}function on(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(h1(i)){n=i;break}i=i.return}if(n==null)throw Error(H(160));switch(n.tag){case 27:var r=n.stateNode,s=$h(t);Ru(t,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(Ta(a,""),n.flags&=-33);var l=$h(t);Ru(t,l,a);break;case 3:case 4:var c=n.stateNode.containerInfo,d=$h(t);Jf(t,d,c);break;default:throw Error(H(161))}}catch(p){Fe(t,t.return,p)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function b1(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;b1(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Ei(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)p1(t,e.alternate,e),e=e.sibling}function as(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Nr(4,e,e.return),as(e);break;case 1:oi(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&u1(e,e.return,n),as(e);break;case 27:Ko(e.stateNode);case 26:case 5:oi(e,e.return),as(e);break;case 22:e.memoizedState===null&&as(e);break;case 30:as(e);break;default:as(e)}t=t.sibling}}function Si(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,r=t,s=e,a=s.flags;switch(s.tag){case 0:case 11:case 15:Si(r,s,n),Ll(4,s);break;case 1:if(Si(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(d){Fe(i,i.return,d)}if(i=s,r=i.updateQueue,r!==null){var l=i.stateNode;try{var c=r.shared.hiddenCallbacks;if(c!==null)for(r.shared.hiddenCallbacks=null,r=0;r<c.length;r++)yx(c[r],l)}catch(d){Fe(i,i.return,d)}}n&&a&64&&c1(s),Go(s,s.return);break;case 27:f1(s);case 26:case 5:Si(r,s,n),n&&i===null&&a&4&&d1(s),Go(s,s.return);break;case 12:Si(r,s,n);break;case 31:Si(r,s,n),n&&a&4&&y1(r,s);break;case 13:Si(r,s,n),n&&a&4&&v1(r,s);break;case 22:s.memoizedState===null&&Si(r,s,n),Go(s,s.return);break;case 30:break;default:Si(r,s,n)}e=e.sibling}}function Og(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Vl(n))}function jg(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Vl(t))}function $n(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)x1(t,e,n,i),e=e.sibling}function x1(t,e,n,i){var r=e.flags;switch(e.tag){case 0:case 11:case 15:$n(t,e,n,i),r&2048&&Ll(9,e);break;case 1:$n(t,e,n,i);break;case 3:$n(t,e,n,i),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Vl(t)));break;case 12:if(r&2048){$n(t,e,n,i),t=e.stateNode;try{var s=e.memoizedProps,a=s.id,l=s.onPostCommit;typeof l=="function"&&l(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){Fe(e,e.return,c)}}else $n(t,e,n,i);break;case 31:$n(t,e,n,i);break;case 13:$n(t,e,n,i);break;case 23:break;case 22:s=e.stateNode,a=e.alternate,e.memoizedState!==null?s._visibility&2?$n(t,e,n,i):$o(t,e):s._visibility&2?$n(t,e,n,i):(s._visibility|=2,Gs(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),r&2048&&Og(a,e);break;case 24:$n(t,e,n,i),r&2048&&jg(e.alternate,e);break;default:$n(t,e,n,i)}}function Gs(t,e,n,i,r){for(r=r&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var s=t,a=e,l=n,c=i,d=a.flags;switch(a.tag){case 0:case 11:case 15:Gs(s,a,l,c,r),Ll(8,a);break;case 23:break;case 22:var p=a.stateNode;a.memoizedState!==null?p._visibility&2?Gs(s,a,l,c,r):$o(s,a):(p._visibility|=2,Gs(s,a,l,c,r)),r&&d&2048&&Og(a.alternate,a);break;case 24:Gs(s,a,l,c,r),r&&d&2048&&jg(a.alternate,a);break;default:Gs(s,a,l,c,r)}e=e.sibling}}function $o(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,r=i.flags;switch(i.tag){case 22:$o(n,i),r&2048&&Og(i.alternate,i);break;case 24:$o(n,i),r&2048&&jg(i.alternate,i);break;default:$o(n,i)}e=e.sibling}}var Do=8192;function Hs(t,e,n){if(t.subtreeFlags&Do)for(t=t.child;t!==null;)T1(t,e,n),t=t.sibling}function T1(t,e,n){switch(t.tag){case 26:Hs(t,e,n),t.flags&Do&&t.memoizedState!==null&&pI(n,Qn,t.memoizedState,t.memoizedProps);break;case 5:Hs(t,e,n);break;case 3:case 4:var i=Qn;Qn=Pu(t.stateNode.containerInfo),Hs(t,e,n),Qn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Do,Do=16777216,Hs(t,e,n),Do=i):Hs(t,e,n));break;default:Hs(t,e,n)}}function E1(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function So(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];jt=i,w1(i,t)}E1(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)S1(t),t=t.sibling}function S1(t){switch(t.tag){case 0:case 11:case 15:So(t),t.flags&2048&&Nr(9,t,t.return);break;case 3:So(t);break;case 12:So(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Wc(t)):So(t);break;default:So(t)}}function Wc(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];jt=i,w1(i,t)}E1(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Nr(8,e,e.return),Wc(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Wc(e));break;default:Wc(e)}t=t.sibling}}function w1(t,e){for(;jt!==null;){var n=jt;switch(n.tag){case 0:case 11:case 15:Nr(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Vl(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,jt=i;else e:for(n=t;jt!==null;){i=jt;var r=i.sibling,s=i.return;if(g1(i),i===n){jt=null;break e}if(r!==null){r.return=s,jt=r;break e}jt=s}}}var R2={getCacheForType:function(t){var e=Ft(St),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Ft(St).controller.signal}},D2=typeof WeakMap=="function"?WeakMap:Map,ze=0,Xe=null,Oe=null,Ne=0,He=0,mn=null,fr=!1,Ya=!1,kg=!1,Bi=0,gt=0,Vr=0,ps=0,Ng=0,_n=0,Aa=0,Yo=null,cn=null,Zf=!1,Sd=0,A1=0,Du=1/0,Mu=null,Tr=null,Rt=0,Er=null,Ia=null,Ni=0,ep=0,tp=null,I1=null,Qo=0,np=null;function Sn(){return ze&2&&Ne!==0?Ne&-Ne:_e.T!==null?Pg():Vb()}function C1(){if(_n===0)if(!(Ne&536870912)||Ve){var t=xc;xc<<=1,!(xc&3932160)&&(xc=262144),_n=t}else _n=536870912;return t=An.current,t!==null&&(t.flags|=32),_n}function hn(t,e,n){(t===Xe&&(He===2||He===9)||t.cancelPendingCommit!==null)&&(Ca(t,0),pr(t,Ne,_n,!1)),jl(t,n),(!(ze&2)||t!==Xe)&&(t===Xe&&(!(ze&2)&&(ps|=n),gt===4&&pr(t,Ne,_n,!1)),yi(t))}function R1(t,e,n){if(ze&6)throw Error(H(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Ol(t,e),r=i?j2(t,e):Qh(t,e,!0),s=i;do{if(r===0){Ya&&!i&&pr(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!M2(n)){r=Qh(t,e,!1),s=!1;continue}if(r===2){if(s=e,t.errorRecoveryDisabledLanes&s)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var l=t;r=Yo;var c=l.current.memoizedState.isDehydrated;if(c&&(Ca(l,a).flags|=256),a=Qh(l,a,!1),a!==2){if(kg&&!c){l.errorRecoveryDisabledLanes|=s,ps|=s,r=4;break e}s=cn,cn=r,s!==null&&(cn===null?cn=s:cn.push.apply(cn,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){Ca(t,0),pr(t,e,0,!0);break}e:{switch(i=t,s=r,s){case 0:case 1:throw Error(H(345));case 4:if((e&4194048)!==e)break;case 6:pr(i,e,_n,!fr);break e;case 2:cn=null;break;case 3:case 5:break;default:throw Error(H(329))}if((e&62914560)===e&&(r=Sd+300-xn(),10<r)){if(pr(i,e,_n,!fr),fd(i,0,!0)!==0)break e;Ni=e,i.timeoutHandle=K1(Gv.bind(null,i,n,cn,Mu,Zf,e,_n,ps,Aa,fr,s,"Throttled",-0,0),r);break e}Gv(i,n,cn,Mu,Zf,e,_n,ps,Aa,fr,s,null,-0,0)}}break}while(!0);yi(t)}function Gv(t,e,n,i,r,s,a,l,c,d,p,m,f,y){if(t.timeoutHandle=-1,m=e.subtreeFlags,m&8192||(m&16785408)===16785408){m={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ri},T1(e,s,m);var S=(s&62914560)===s?Sd-xn():(s&4194048)===s?A1-xn():0;if(S=gI(m,S),S!==null){Ni=s,t.cancelPendingCommit=S(Yv.bind(null,t,e,s,n,i,r,a,l,c,p,m,null,f,y)),pr(t,s,a,!d);return}}Yv(t,e,s,n,i,r,a,l,c)}function M2(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!wn(s(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pr(t,e,n,i){e&=~Ng,e&=~ps,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var r=e;0<r;){var s=31-En(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&jb(t,n,e)}function wd(){return ze&6?!0:(Ul(0),!1)}function Vg(){if(Oe!==null){if(He===0)var t=Oe.return;else t=Oe,Di=ks=null,xg(t),fa=null,cl=0,t=Oe;for(;t!==null;)l1(t.alternate,t),t=t.return;Oe=null}}function Ca(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,X2(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Ni=0,Vg(),Xe=t,Oe=n=ji(t.current,null),Ne=e,He=0,mn=null,fr=!1,Ya=Ol(t,e),kg=!1,Aa=_n=Ng=ps=Vr=gt=0,cn=Yo=null,Zf=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var r=31-En(i),s=1<<r;e|=t[r],i&=~s}return Bi=e,yd(),n}function D1(t,e){Ce=null,_e.H=dl,e===$a||e===_d?(e=Ev(),He=3):e===pg?(e=Ev(),He=4):He=e===Dg?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,mn=e,Oe===null&&(gt=1,Iu(t,Nn(e,t.current)))}function M1(){var t=An.current;return t===null?!0:(Ne&4194048)===Ne?Ln===null:(Ne&62914560)===Ne||Ne&536870912?t===Ln:!1}function O1(){var t=_e.H;return _e.H=dl,t===null?dl:t}function j1(){var t=_e.A;return _e.A=R2,t}function Ou(){gt=4,fr||(Ne&4194048)!==Ne&&An.current!==null||(Ya=!0),!(Vr&134217727)&&!(ps&134217727)||Xe===null||pr(Xe,Ne,_n,!1)}function Qh(t,e,n){var i=ze;ze|=2;var r=O1(),s=j1();(Xe!==t||Ne!==e)&&(Mu=null,Ca(t,e)),e=!1;var a=gt;e:do try{if(He!==0&&Oe!==null){var l=Oe,c=mn;switch(He){case 8:Vg(),a=6;break e;case 3:case 2:case 9:case 6:An.current===null&&(e=!0);var d=He;if(He=0,mn=null,la(t,l,c,d),n&&Ya){a=0;break e}break;default:d=He,He=0,mn=null,la(t,l,c,d)}}O2(),a=gt;break}catch(p){D1(t,p)}while(!0);return e&&t.shellSuspendCounter++,Di=ks=null,ze=i,_e.H=r,_e.A=s,Oe===null&&(Xe=null,Ne=0,yd()),a}function O2(){for(;Oe!==null;)k1(Oe)}function j2(t,e){var n=ze;ze|=2;var i=O1(),r=j1();Xe!==t||Ne!==e?(Mu=null,Du=xn()+500,Ca(t,e)):Ya=Ol(t,e);e:do try{if(He!==0&&Oe!==null){e=Oe;var s=mn;t:switch(He){case 1:He=0,mn=null,la(t,e,s,1);break;case 2:case 9:if(Tv(s)){He=0,mn=null,$v(e);break}e=function(){He!==2&&He!==9||Xe!==t||(He=7),yi(t)},s.then(e,e);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:Tv(s)?(He=0,mn=null,$v(e)):(He=0,mn=null,la(t,e,s,7));break;case 5:var a=null;switch(Oe.tag){case 26:a=Oe.memoizedState;case 5:case 27:var l=Oe;if(a?eT(a):l.stateNode.complete){He=0,mn=null;var c=l.sibling;if(c!==null)Oe=c;else{var d=l.return;d!==null?(Oe=d,Ad(d)):Oe=null}break t}}He=0,mn=null,la(t,e,s,5);break;case 6:He=0,mn=null,la(t,e,s,6);break;case 8:Vg(),gt=6;break e;default:throw Error(H(462))}}k2();break}catch(p){D1(t,p)}while(!0);return Di=ks=null,_e.H=i,_e.A=r,ze=n,Oe!==null?0:(Xe=null,Ne=0,yd(),gt)}function k2(){for(;Oe!==null&&!iA();)k1(Oe)}function k1(t){var e=o1(t.alternate,t,Bi);t.memoizedProps=t.pendingProps,e===null?Ad(t):Oe=e}function $v(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=Uv(n,e,e.pendingProps,e.type,void 0,Ne);break;case 11:e=Uv(n,e,e.pendingProps,e.type.render,e.ref,Ne);break;case 5:xg(e);default:l1(n,e),e=Oe=lx(e,Bi),e=o1(n,e,Bi)}t.memoizedProps=t.pendingProps,e===null?Ad(t):Oe=e}function la(t,e,n,i){Di=ks=null,xg(e),fa=null,cl=0;var r=e.return;try{if(T2(t,r,e,n,Ne)){gt=1,Iu(t,Nn(n,t.current)),Oe=null;return}}catch(s){if(r!==null)throw Oe=r,s;gt=1,Iu(t,Nn(n,t.current)),Oe=null;return}e.flags&32768?(Ve||i===1?t=!0:Ya||Ne&536870912?t=!1:(fr=t=!0,(i===2||i===9||i===3||i===6)&&(i=An.current,i!==null&&i.tag===13&&(i.flags|=16384))),N1(e,t)):Ad(e)}function Ad(t){var e=t;do{if(e.flags&32768){N1(e,fr);return}t=e.return;var n=w2(e.alternate,e,Bi);if(n!==null){Oe=n;return}if(e=e.sibling,e!==null){Oe=e;return}Oe=e=t}while(e!==null);gt===0&&(gt=5)}function N1(t,e){do{var n=A2(t.alternate,t);if(n!==null){n.flags&=32767,Oe=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){Oe=t;return}Oe=t=n}while(t!==null);gt=6,Oe=null}function Yv(t,e,n,i,r,s,a,l,c){t.cancelPendingCommit=null;do Id();while(Rt!==0);if(ze&6)throw Error(H(327));if(e!==null){if(e===t.current)throw Error(H(177));if(s=e.lanes|e.childLanes,s|=og,fA(t,n,s,a,l,c),t===Xe&&(Oe=Xe=null,Ne=0),Ia=e,Er=t,Ni=n,ep=s,tp=r,I1=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,L2(mu,function(){return z1(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=_e.T,_e.T=null,r=Be.p,Be.p=2,a=ze,ze|=4;try{I2(t,e,n)}finally{ze=a,Be.p=r,_e.T=i}}Rt=1,V1(),P1(),L1()}}function V1(){if(Rt===1){Rt=0;var t=Er,e=Ia,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=_e.T,_e.T=null;var i=Be.p;Be.p=2;var r=ze;ze|=4;try{_1(e,t);var s=ap,a=ex(t.containerInfo),l=s.focusedElem,c=s.selectionRange;if(a!==l&&l&&l.ownerDocument&&Zb(l.ownerDocument.documentElement,l)){if(c!==null&&ag(l)){var d=c.start,p=c.end;if(p===void 0&&(p=d),"selectionStart"in l)l.selectionStart=d,l.selectionEnd=Math.min(p,l.value.length);else{var m=l.ownerDocument||document,f=m&&m.defaultView||window;if(f.getSelection){var y=f.getSelection(),S=l.textContent.length,D=Math.min(c.start,S),j=c.end===void 0?D:Math.min(c.end,S);!y.extend&&D>j&&(a=j,j=D,D=a);var T=gv(l,D),x=gv(l,j);if(T&&x&&(y.rangeCount!==1||y.anchorNode!==T.node||y.anchorOffset!==T.offset||y.focusNode!==x.node||y.focusOffset!==x.offset)){var A=m.createRange();A.setStart(T.node,T.offset),y.removeAllRanges(),D>j?(y.addRange(A),y.extend(x.node,x.offset)):(A.setEnd(x.node,x.offset),y.addRange(A))}}}}for(m=[],y=l;y=y.parentNode;)y.nodeType===1&&m.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<m.length;l++){var M=m[l];M.element.scrollLeft=M.left,M.element.scrollTop=M.top}}zu=!!sp,ap=sp=null}finally{ze=r,Be.p=i,_e.T=n}}t.current=e,Rt=2}}function P1(){if(Rt===2){Rt=0;var t=Er,e=Ia,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=_e.T,_e.T=null;var i=Be.p;Be.p=2;var r=ze;ze|=4;try{p1(t,e.alternate,e)}finally{ze=r,Be.p=i,_e.T=n}}Rt=3}}function L1(){if(Rt===4||Rt===3){Rt=0,rA();var t=Er,e=Ia,n=Ni,i=I1;e.subtreeFlags&10256||e.flags&10256?Rt=5:(Rt=0,Ia=Er=null,U1(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(Tr=null),Zp(n),e=e.stateNode,Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(Ml,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=_e.T,r=Be.p,Be.p=2,_e.T=null;try{for(var s=t.onRecoverableError,a=0;a<i.length;a++){var l=i[a];s(l.value,{componentStack:l.stack})}}finally{_e.T=e,Be.p=r}}Ni&3&&Id(),yi(t),r=t.pendingLanes,n&261930&&r&42?t===np?Qo++:(Qo=0,np=t):Qo=0,Ul(0)}}function U1(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Vl(e)))}function Id(){return V1(),P1(),L1(),z1()}function z1(){if(Rt!==5)return!1;var t=Er,e=ep;ep=0;var n=Zp(Ni),i=_e.T,r=Be.p;try{Be.p=32>n?32:n,_e.T=null,n=tp,tp=null;var s=Er,a=Ni;if(Rt=0,Ia=Er=null,Ni=0,ze&6)throw Error(H(331));var l=ze;if(ze|=4,S1(s.current),x1(s,s.current,a,n),ze=l,Ul(0,!1),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(Ml,s)}catch{}return!0}finally{Be.p=r,_e.T=i,U1(t,e)}}function Qv(t,e,n){e=Nn(n,e),e=Kf(t.stateNode,e,2),t=xr(t,e,2),t!==null&&(jl(t,2),yi(t))}function Fe(t,e,n){if(t.tag===3)Qv(t,t,n);else for(;e!==null;){if(e.tag===3){Qv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Tr===null||!Tr.has(i))){t=Nn(n,t),n=t1(2),i=xr(e,n,2),i!==null&&(n1(n,i,e,t),jl(i,2),yi(i));break}}e=e.return}}function Kh(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new D2;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(kg=!0,r.add(n),t=N2.bind(null,t,e,n),e.then(t,t))}function N2(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Xe===t&&(Ne&n)===n&&(gt===4||gt===3&&(Ne&62914560)===Ne&&300>xn()-Sd?!(ze&2)&&Ca(t,0):Ng|=n,Aa===Ne&&(Aa=0)),yi(t)}function B1(t,e){e===0&&(e=Ob()),t=js(t,e),t!==null&&(jl(t,e),yi(t))}function V2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),B1(t,n)}function P2(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(H(314))}i!==null&&i.delete(e),B1(t,n)}function L2(t,e){return Xp(t,e)}var ju=null,$s=null,ip=!1,ku=!1,Wh=!1,gr=0;function yi(t){t!==$s&&t.next===null&&($s===null?ju=$s=t:$s=$s.next=t),ku=!0,ip||(ip=!0,z2())}function Ul(t,e){if(!Wh&&ku){Wh=!0;do for(var n=!1,i=ju;i!==null;){if(t!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-En(42|t)+1)-1,s&=r&~(a&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,Kv(i,s))}else s=Ne,s=fd(i,i===Xe?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||Ol(i,s)||(n=!0,Kv(i,s));i=i.next}while(n);Wh=!1}}function U2(){q1()}function q1(){ku=ip=!1;var t=0;gr!==0&&W2()&&(t=gr);for(var e=xn(),n=null,i=ju;i!==null;){var r=i.next,s=H1(i,e);s===0?(i.next=null,n===null?ju=r:n.next=r,r===null&&($s=n)):(n=i,(t!==0||s&3)&&(ku=!0)),i=r}Rt!==0&&Rt!==5||Ul(t),gr!==0&&(gr=0)}function H1(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var a=31-En(s),l=1<<a,c=r[a];c===-1?(!(l&n)||l&i)&&(r[a]=hA(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}if(e=Xe,n=Ne,n=fd(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(He===2||He===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&Sh(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Ol(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&Sh(i),Zp(n)){case 2:case 8:n=Db;break;case 32:n=mu;break;case 268435456:n=Mb;break;default:n=mu}return i=F1.bind(null,t),n=Xp(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&Sh(i),t.callbackPriority=2,t.callbackNode=null,2}function F1(t,e){if(Rt!==0&&Rt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Id()&&t.callbackNode!==n)return null;var i=Ne;return i=fd(t,t===Xe?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(R1(t,i,e),H1(t,xn()),t.callbackNode!=null&&t.callbackNode===n?F1.bind(null,t):null)}function Kv(t,e){if(Id())return null;R1(t,e,!0)}function z2(){J2(function(){ze&6?Xp(Rb,U2):q1()})}function Pg(){if(gr===0){var t=Ea;t===0&&(t=bc,bc<<=1,!(bc&261888)&&(bc=256)),gr=t}return gr}function Wv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Bc(""+t)}function Xv(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function B2(t,e,n,i,r){if(e==="submit"&&n&&n.stateNode===r){var s=Wv((r[fn]||null).action),a=i.submitter;a&&(e=(e=a[fn]||null)?Wv(e.formAction):a.getAttribute("formAction"),e!==null&&(s=e,a=null));var l=new pd("action","action",null,i,r);t.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(gr!==0){var c=a?Xv(r,a):new FormData(r);Yf(n,{pending:!0,data:c,method:r.method,action:s},null,c)}}else typeof s=="function"&&(l.preventDefault(),c=a?Xv(r,a):new FormData(r),Yf(n,{pending:!0,data:c,method:r.method,action:s},s,c))},currentTarget:r}]})}}for(var Xh=0;Xh<Nf.length;Xh++){var Jh=Nf[Xh],q2=Jh.toLowerCase(),H2=Jh[0].toUpperCase()+Jh.slice(1);ni(q2,"on"+H2)}ni(nx,"onAnimationEnd");ni(ix,"onAnimationIteration");ni(rx,"onAnimationStart");ni("dblclick","onDoubleClick");ni("focusin","onFocus");ni("focusout","onBlur");ni(s2,"onTransitionRun");ni(a2,"onTransitionStart");ni(o2,"onTransitionCancel");ni(sx,"onTransitionEnd");xa("onMouseEnter",["mouseout","mouseover"]);xa("onMouseLeave",["mouseout","mouseover"]);xa("onPointerEnter",["pointerout","pointerover"]);xa("onPointerLeave",["pointerout","pointerover"]);Ds("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ds("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ds("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ds("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ds("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ds("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hl));function G1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==s&&r.isPropagationStopped())break e;s=l,r.currentTarget=d;try{s(r)}catch(p){vu(p)}r.currentTarget=null,s=c}else for(a=0;a<i.length;a++){if(l=i[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==s&&r.isPropagationStopped())break e;s=l,r.currentTarget=d;try{s(r)}catch(p){vu(p)}r.currentTarget=null,s=c}}}}function Me(t,e){var n=e[If];n===void 0&&(n=e[If]=new Set);var i=t+"__bubble";n.has(i)||($1(e,t,2,!1),n.add(i))}function Zh(t,e,n){var i=0;e&&(i|=4),$1(n,t,i,e)}var Dc="_reactListening"+Math.random().toString(36).slice(2);function Lg(t){if(!t[Dc]){t[Dc]=!0,Pb.forEach(function(n){n!=="selectionchange"&&(F2.has(n)||Zh(n,!1,t),Zh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Dc]||(e[Dc]=!0,Zh("selectionchange",!1,e))}}function $1(t,e,n,i){switch(sT(e)){case 2:var r=vI;break;case 8:r=_I;break;default:r=qg}n=r.bind(null,e,n,t),r=void 0,!Of||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function ef(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===r)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;l!==null;){if(a=Zs(l),a===null)return;if(c=a.tag,c===5||c===6||c===26||c===27){i=s=a;continue e}l=l.parentNode}}i=i.return}Gb(function(){var d=s,p=ng(n),m=[];e:{var f=ax.get(t);if(f!==void 0){var y=pd,S=t;switch(t){case"keypress":if(Hc(n)===0)break e;case"keydown":case"keyup":y=PA;break;case"focusin":S="focus",y=Rh;break;case"focusout":S="blur",y=Rh;break;case"beforeblur":case"afterblur":y=Rh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=sv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=wA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=zA;break;case nx:case ix:case rx:y=CA;break;case sx:y=qA;break;case"scroll":case"scrollend":y=EA;break;case"wheel":y=FA;break;case"copy":case"cut":case"paste":y=DA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=ov;break;case"toggle":case"beforetoggle":y=$A}var D=(e&4)!==0,j=!D&&(t==="scroll"||t==="scrollend"),T=D?f!==null?f+"Capture":null:f;D=[];for(var x=d,A;x!==null;){var M=x;if(A=M.stateNode,M=M.tag,M!==5&&M!==26&&M!==27||A===null||T===null||(M=rl(x,T),M!=null&&D.push(fl(x,M,A))),j)break;x=x.return}0<D.length&&(f=new y(f,S,null,n,p),m.push({event:f,listeners:D}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&n!==Mf&&(S=n.relatedTarget||n.fromElement)&&(Zs(S)||S[Ha]))break e;if((y||f)&&(f=p.window===p?p:(f=p.ownerDocument)?f.defaultView||f.parentWindow:window,y?(S=n.relatedTarget||n.toElement,y=d,S=S?Zs(S):null,S!==null&&(j=Dl(S),D=S.tag,S!==j||D!==5&&D!==27&&D!==6)&&(S=null)):(y=null,S=d),y!==S)){if(D=sv,M="onMouseLeave",T="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(D=ov,M="onPointerLeave",T="onPointerEnter",x="pointer"),j=y==null?f:Co(y),A=S==null?f:Co(S),f=new D(M,x+"leave",y,n,p),f.target=j,f.relatedTarget=A,M=null,Zs(p)===d&&(D=new D(T,x+"enter",S,n,p),D.target=A,D.relatedTarget=j,M=D),j=M,y&&S)t:{for(D=G2,T=y,x=S,A=0,M=T;M;M=D(M))A++;M=0;for(var $=x;$;$=D($))M++;for(;0<A-M;)T=D(T),A--;for(;0<M-A;)x=D(x),M--;for(;A--;){if(T===x||x!==null&&T===x.alternate){D=T;break t}T=D(T),x=D(x)}D=null}else D=null;y!==null&&Jv(m,f,y,D,!1),S!==null&&j!==null&&Jv(m,j,S,D,!0)}}e:{if(f=d?Co(d):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var Q=dv;else if(uv(f))if(Xb)Q=n2;else{Q=e2;var w=ZA}else y=f.nodeName,!y||y.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?d&&tg(d.elementType)&&(Q=dv):Q=t2;if(Q&&(Q=Q(t,d))){Wb(m,Q,n,p);break e}w&&w(t,f,d),t==="focusout"&&d&&f.type==="number"&&d.memoizedProps.value!=null&&Df(f,"number",f.value)}switch(w=d?Co(d):window,t){case"focusin":(uv(w)||w.contentEditable==="true")&&(na=w,jf=d,Uo=null);break;case"focusout":Uo=jf=na=null;break;case"mousedown":kf=!0;break;case"contextmenu":case"mouseup":case"dragend":kf=!1,mv(m,n,p);break;case"selectionchange":if(r2)break;case"keydown":case"keyup":mv(m,n,p)}var b;if(sg)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else ta?Qb(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Yb&&n.locale!=="ko"&&(ta||E!=="onCompositionStart"?E==="onCompositionEnd"&&ta&&(b=$b()):(hr=p,ig="value"in hr?hr.value:hr.textContent,ta=!0)),w=Nu(d,E),0<w.length&&(E=new av(E,t,null,n,p),m.push({event:E,listeners:w}),b?E.data=b:(b=Kb(n),b!==null&&(E.data=b)))),(b=QA?KA(t,n):WA(t,n))&&(E=Nu(d,"onBeforeInput"),0<E.length&&(w=new av("onBeforeInput","beforeinput",null,n,p),m.push({event:w,listeners:E}),w.data=b)),B2(m,t,d,n,p)}G1(m,e)})}function fl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Nu(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=rl(t,n),r!=null&&i.unshift(fl(t,r,s)),r=rl(t,e),r!=null&&i.push(fl(t,r,s))),t.tag===3)return i;t=t.return}return[]}function G2(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Jv(t,e,n,i,r){for(var s=e._reactName,a=[];n!==null&&n!==i;){var l=n,c=l.alternate,d=l.stateNode;if(l=l.tag,c!==null&&c===i)break;l!==5&&l!==26&&l!==27||d===null||(c=d,r?(d=rl(n,s),d!=null&&a.unshift(fl(n,d,c))):r||(d=rl(n,s),d!=null&&a.push(fl(n,d,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var $2=/\r\n?/g,Y2=/\u0000|\uFFFD/g;function Zv(t){return(typeof t=="string"?t:""+t).replace($2,`
`).replace(Y2,"")}function Y1(t,e){return e=Zv(e),Zv(t)===e}function Ye(t,e,n,i,r,s){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Ta(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Ta(t,""+i);break;case"className":Ec(t,"class",i);break;case"tabIndex":Ec(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Ec(t,n,i);break;case"style":Fb(t,i,s);break;case"data":if(e!=="object"){Ec(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Bc(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&Ye(t,e,"name",r.name,r,null),Ye(t,e,"formEncType",r.formEncType,r,null),Ye(t,e,"formMethod",r.formMethod,r,null),Ye(t,e,"formTarget",r.formTarget,r,null)):(Ye(t,e,"encType",r.encType,r,null),Ye(t,e,"method",r.method,r,null),Ye(t,e,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Bc(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=Ri);break;case"onScroll":i!=null&&Me("scroll",t);break;case"onScrollEnd":i!=null&&Me("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(H(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(H(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=Bc(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":Me("beforetoggle",t),Me("toggle",t),zc(t,"popover",i);break;case"xlinkActuate":bi(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":bi(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":bi(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":bi(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":bi(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":bi(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":bi(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":bi(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":bi(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":zc(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=xA.get(n)||n,zc(t,n,i))}}function rp(t,e,n,i,r,s){switch(n){case"style":Fb(t,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(H(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(H(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Ta(t,i):(typeof i=="number"||typeof i=="bigint")&&Ta(t,""+i);break;case"onScroll":i!=null&&Me("scroll",t);break;case"onScrollEnd":i!=null&&Me("scrollend",t);break;case"onClick":i!=null&&(t.onclick=Ri);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Lb.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),s=t[fn]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,r);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):zc(t,n,i)}}}function Gt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",t),Me("load",t);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(H(137,e));default:Ye(t,e,s,a,n,null)}}r&&Ye(t,e,"srcSet",n.srcSet,n,null),i&&Ye(t,e,"src",n.src,n,null);return;case"input":Me("invalid",t);var l=s=a=r=null,c=null,d=null;for(i in n)if(n.hasOwnProperty(i)){var p=n[i];if(p!=null)switch(i){case"name":r=p;break;case"type":a=p;break;case"checked":c=p;break;case"defaultChecked":d=p;break;case"value":s=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(H(137,e));break;default:Ye(t,e,i,p,n,null)}}Bb(t,s,l,c,d,a,r,!1);return;case"select":Me("invalid",t),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Ye(t,e,r,l,n,null)}e=s,n=a,t.multiple=!!i,e!=null?ua(t,!!i,e,!1):n!=null&&ua(t,!!i,n,!0);return;case"textarea":Me("invalid",t),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":r=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(H(91));break;default:Ye(t,e,a,l,n,null)}Hb(t,i,r,s);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Ye(t,e,c,i,n,null)}return;case"dialog":Me("beforetoggle",t),Me("toggle",t),Me("cancel",t),Me("close",t);break;case"iframe":case"object":Me("load",t);break;case"video":case"audio":for(i=0;i<hl.length;i++)Me(hl[i],t);break;case"image":Me("error",t),Me("load",t);break;case"details":Me("toggle",t);break;case"embed":case"source":case"link":Me("error",t),Me("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&(i=n[d],i!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(H(137,e));default:Ye(t,e,d,i,n,null)}return;default:if(tg(e)){for(p in n)n.hasOwnProperty(p)&&(i=n[p],i!==void 0&&rp(t,e,p,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&Ye(t,e,l,i,n,null))}function Q2(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,l=null,c=null,d=null,p=null;for(y in n){var m=n[y];if(n.hasOwnProperty(y)&&m!=null)switch(y){case"checked":break;case"value":break;case"defaultValue":c=m;default:i.hasOwnProperty(y)||Ye(t,e,y,null,i,m)}}for(var f in i){var y=i[f];if(m=n[f],i.hasOwnProperty(f)&&(y!=null||m!=null))switch(f){case"type":s=y;break;case"name":r=y;break;case"checked":d=y;break;case"defaultChecked":p=y;break;case"value":a=y;break;case"defaultValue":l=y;break;case"children":case"dangerouslySetInnerHTML":if(y!=null)throw Error(H(137,e));break;default:y!==m&&Ye(t,e,f,y,i,m)}}Rf(t,a,l,c,d,p,s,r);return;case"select":y=a=l=f=null;for(s in n)if(c=n[s],n.hasOwnProperty(s)&&c!=null)switch(s){case"value":break;case"multiple":y=c;default:i.hasOwnProperty(s)||Ye(t,e,s,null,i,c)}for(r in i)if(s=i[r],c=n[r],i.hasOwnProperty(r)&&(s!=null||c!=null))switch(r){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==c&&Ye(t,e,r,s,i,c)}e=l,n=a,i=y,f!=null?ua(t,!!n,f,!1):!!i!=!!n&&(e!=null?ua(t,!!n,e,!0):ua(t,!!n,n?[]:"",!1));return;case"textarea":y=f=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Ye(t,e,l,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":f=r;break;case"defaultValue":y=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(H(91));break;default:r!==s&&Ye(t,e,a,r,i,s)}qb(t,f,y);return;case"option":for(var S in n)if(f=n[S],n.hasOwnProperty(S)&&f!=null&&!i.hasOwnProperty(S))switch(S){case"selected":t.selected=!1;break;default:Ye(t,e,S,null,i,f)}for(c in i)if(f=i[c],y=n[c],i.hasOwnProperty(c)&&f!==y&&(f!=null||y!=null))switch(c){case"selected":t.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Ye(t,e,c,f,i,y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var D in n)f=n[D],n.hasOwnProperty(D)&&f!=null&&!i.hasOwnProperty(D)&&Ye(t,e,D,null,i,f);for(d in i)if(f=i[d],y=n[d],i.hasOwnProperty(d)&&f!==y&&(f!=null||y!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(H(137,e));break;default:Ye(t,e,d,f,i,y)}return;default:if(tg(e)){for(var j in n)f=n[j],n.hasOwnProperty(j)&&f!==void 0&&!i.hasOwnProperty(j)&&rp(t,e,j,void 0,i,f);for(p in i)f=i[p],y=n[p],!i.hasOwnProperty(p)||f===y||f===void 0&&y===void 0||rp(t,e,p,f,i,y);return}}for(var T in n)f=n[T],n.hasOwnProperty(T)&&f!=null&&!i.hasOwnProperty(T)&&Ye(t,e,T,null,i,f);for(m in i)f=i[m],y=n[m],!i.hasOwnProperty(m)||f===y||f==null&&y==null||Ye(t,e,m,f,i,y)}function e0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function K2(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],s=r.transferSize,a=r.initiatorType,l=r.duration;if(s&&l&&e0(a)){for(a=0,l=r.responseEnd,i+=1;i<n.length;i++){var c=n[i],d=c.startTime;if(d>l)break;var p=c.transferSize,m=c.initiatorType;p&&e0(m)&&(c=c.responseEnd,a+=p*(c<l?1:(l-d)/(c-d)))}if(--i,e+=8*(s+a)/(r.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var sp=null,ap=null;function Vu(t){return t.nodeType===9?t:t.ownerDocument}function t0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Q1(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function op(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tf=null;function W2(){var t=window.event;return t&&t.type==="popstate"?t===tf?!1:(tf=t,!0):(tf=null,!1)}var K1=typeof setTimeout=="function"?setTimeout:void 0,X2=typeof clearTimeout=="function"?clearTimeout:void 0,n0=typeof Promise=="function"?Promise:void 0,J2=typeof queueMicrotask=="function"?queueMicrotask:typeof n0<"u"?function(t){return n0.resolve(null).then(t).catch(Z2)}:K1;function Z2(t){setTimeout(function(){throw t})}function Yr(t){return t==="head"}function i0(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(r),Da(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Ko(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Ko(n);for(var s=n.firstChild;s;){var a=s.nextSibling,l=s.nodeName;s[kl]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=a}}else n==="body"&&Ko(t.ownerDocument.body);n=r}while(n);Da(e)}function r0(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function lp(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":lp(n),eg(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function eI(t,e,n,i){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[kl])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=Un(t.nextSibling),t===null)break}return null}function tI(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Un(t.nextSibling),t===null))return null;return t}function W1(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Un(t.nextSibling),t===null))return null;return t}function cp(t){return t.data==="$?"||t.data==="$~"}function up(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function nI(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function Un(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var dp=null;function s0(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return Un(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function a0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function X1(t,e,n){switch(e=Vu(n),t){case"html":if(t=e.documentElement,!t)throw Error(H(452));return t;case"head":if(t=e.head,!t)throw Error(H(453));return t;case"body":if(t=e.body,!t)throw Error(H(454));return t;default:throw Error(H(451))}}function Ko(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);eg(t)}var Bn=new Map,o0=new Set;function Pu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Yi=Be.d;Be.d={f:iI,r:rI,D:sI,C:aI,L:oI,m:lI,X:uI,S:cI,M:dI};function iI(){var t=Yi.f(),e=wd();return t||e}function rI(t){var e=Fa(t);e!==null&&e.tag===5&&e.type==="form"?Fx(e):Yi.r(t)}var Qa=typeof document>"u"?null:document;function J1(t,e,n){var i=Qa;if(i&&typeof e=="string"&&e){var r=kn(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),o0.has(r)||(o0.add(r),t={rel:t,crossOrigin:n,href:e},i.querySelector(r)===null&&(e=i.createElement("link"),Gt(e,"link",t),kt(e),i.head.appendChild(e)))}}function sI(t){Yi.D(t),J1("dns-prefetch",t,null)}function aI(t,e){Yi.C(t,e),J1("preconnect",t,e)}function oI(t,e,n){Yi.L(t,e,n);var i=Qa;if(i&&t&&e){var r='link[rel="preload"][as="'+kn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+kn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+kn(n.imageSizes)+'"]')):r+='[href="'+kn(t)+'"]';var s=r;switch(e){case"style":s=Ra(t);break;case"script":s=Ka(t)}Bn.has(s)||(t=st({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Bn.set(s,t),i.querySelector(r)!==null||e==="style"&&i.querySelector(zl(s))||e==="script"&&i.querySelector(Bl(s))||(e=i.createElement("link"),Gt(e,"link",t),kt(e),i.head.appendChild(e)))}}function lI(t,e){Yi.m(t,e);var n=Qa;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+kn(i)+'"][href="'+kn(t)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Ka(t)}if(!Bn.has(s)&&(t=st({rel:"modulepreload",href:t},e),Bn.set(s,t),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Bl(s)))return}i=n.createElement("link"),Gt(i,"link",t),kt(i),n.head.appendChild(i)}}}function cI(t,e,n){Yi.S(t,e,n);var i=Qa;if(i&&t){var r=ca(i).hoistableStyles,s=Ra(t);e=e||"default";var a=r.get(s);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(zl(s)))l.loading=5;else{t=st({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Bn.get(s))&&Ug(t,n);var c=a=i.createElement("link");kt(c),Gt(c,"link",t),c._p=new Promise(function(d,p){c.onload=d,c.onerror=p}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Xc(a,e,i)}a={type:"stylesheet",instance:a,count:1,state:l},r.set(s,a)}}}function uI(t,e){Yi.X(t,e);var n=Qa;if(n&&t){var i=ca(n).hoistableScripts,r=Ka(t),s=i.get(r);s||(s=n.querySelector(Bl(r)),s||(t=st({src:t,async:!0},e),(e=Bn.get(r))&&zg(t,e),s=n.createElement("script"),kt(s),Gt(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function dI(t,e){Yi.M(t,e);var n=Qa;if(n&&t){var i=ca(n).hoistableScripts,r=Ka(t),s=i.get(r);s||(s=n.querySelector(Bl(r)),s||(t=st({src:t,async:!0,type:"module"},e),(e=Bn.get(r))&&zg(t,e),s=n.createElement("script"),kt(s),Gt(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function l0(t,e,n,i){var r=(r=vr.current)?Pu(r):null;if(!r)throw Error(H(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Ra(n.href),n=ca(r).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Ra(n.href);var s=ca(r).hoistableStyles,a=s.get(t);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,a),(s=r.querySelector(zl(t)))&&!s._p&&(a.instance=s,a.state.loading=5),Bn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Bn.set(t,n),s||hI(r,t,n,a.state))),e&&i===null)throw Error(H(528,""));return a}if(e&&i!==null)throw Error(H(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Ka(n),n=ca(r).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(H(444,t))}}function Ra(t){return'href="'+kn(t)+'"'}function zl(t){return'link[rel="stylesheet"]['+t+"]"}function Z1(t){return st({},t,{"data-precedence":t.precedence,precedence:null})}function hI(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),Gt(e,"link",n),kt(e),t.head.appendChild(e))}function Ka(t){return'[src="'+kn(t)+'"]'}function Bl(t){return"script[async]"+t}function c0(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+kn(n.href)+'"]');if(i)return e.instance=i,kt(i),i;var r=st({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),kt(i),Gt(i,"style",r),Xc(i,n.precedence,t),e.instance=i;case"stylesheet":r=Ra(n.href);var s=t.querySelector(zl(r));if(s)return e.state.loading|=4,e.instance=s,kt(s),s;i=Z1(n),(r=Bn.get(r))&&Ug(i,r),s=(t.ownerDocument||t).createElement("link"),kt(s);var a=s;return a._p=new Promise(function(l,c){a.onload=l,a.onerror=c}),Gt(s,"link",i),e.state.loading|=4,Xc(s,n.precedence,t),e.instance=s;case"script":return s=Ka(n.src),(r=t.querySelector(Bl(s)))?(e.instance=r,kt(r),r):(i=n,(r=Bn.get(s))&&(i=st({},n),zg(i,r)),t=t.ownerDocument||t,r=t.createElement("script"),kt(r),Gt(r,"link",i),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(H(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,Xc(i,n.precedence,t));return e.instance}function Xc(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===e)s=l;else if(s!==r)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Ug(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function zg(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Jc=null;function u0(t,e,n){if(Jc===null){var i=new Map,r=Jc=new Map;r.set(n,i)}else r=Jc,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var s=n[r];if(!(s[kl]||s[Bt]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(e)||"";a=t+a;var l=i.get(a);l?l.push(s):i.set(a,[s])}}return i}function d0(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function fI(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function eT(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function pI(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var r=Ra(i.href),s=e.querySelector(zl(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Lu.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=s,kt(s);return}s=e.ownerDocument||e,i=Z1(i),(r=Bn.get(r))&&Ug(i,r),s=s.createElement("link"),kt(s);var a=s;a._p=new Promise(function(l,c){a.onload=l,a.onerror=c}),Gt(s,"link",i),n.instance=s}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=Lu.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var nf=0;function gI(t,e){return t.stylesheets&&t.count===0&&Zc(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&Zc(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4+e);0<t.imgBytes&&nf===0&&(nf=62500*K2());var r=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Zc(t,t.stylesheets),t.unsuspend)){var s=t.unsuspend;t.unsuspend=null,s()}},(t.imgBytes>nf?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}function Lu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Uu=null;function Zc(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Uu=new Map,e.forEach(mI,t),Uu=null,Lu.call(t))}function mI(t,e){if(!(e.state.loading&4)){var n=Uu.get(t);if(n)var i=n.get(null);else{n=new Map,Uu.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=e.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=Lu.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var pl={$$typeof:Ci,Provider:null,Consumer:null,_currentValue:us,_currentValue2:us,_threadCount:0};function yI(t,e,n,i,r,s,a,l,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wh(0),this.hiddenUpdates=wh(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function tT(t,e,n,i,r,s,a,l,c,d,p,m){return t=new yI(t,e,n,a,c,d,p,m,l),e=1,s===!0&&(e|=24),s=vn(3,null,null,e),t.current=s,s.stateNode=t,e=hg(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:e},gg(s),t}function nT(t){return t?(t=sa,t):sa}function iT(t,e,n,i,r,s){r=nT(r),i.context===null?i.context=r:i.pendingContext=r,i=br(e),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=xr(t,i,e),n!==null&&(hn(n,t,e),Bo(n,t,e))}function h0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Bg(t,e){h0(t,e),(t=t.alternate)&&h0(t,e)}function rT(t){if(t.tag===13||t.tag===31){var e=js(t,67108864);e!==null&&hn(e,t,67108864),Bg(t,67108864)}}function f0(t){if(t.tag===13||t.tag===31){var e=Sn();e=Jp(e);var n=js(t,e);n!==null&&hn(n,t,e),Bg(t,e)}}var zu=!0;function vI(t,e,n,i){var r=_e.T;_e.T=null;var s=Be.p;try{Be.p=2,qg(t,e,n,i)}finally{Be.p=s,_e.T=r}}function _I(t,e,n,i){var r=_e.T;_e.T=null;var s=Be.p;try{Be.p=8,qg(t,e,n,i)}finally{Be.p=s,_e.T=r}}function qg(t,e,n,i){if(zu){var r=hp(i);if(r===null)ef(t,e,i,Bu,n),p0(t,i);else if(xI(r,t,e,n,i))i.stopPropagation();else if(p0(t,i),e&4&&-1<bI.indexOf(t)){for(;r!==null;){var s=Fa(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=rs(s.pendingLanes);if(a!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var c=1<<31-En(a);l.entanglements[1]|=c,a&=~c}yi(s),!(ze&6)&&(Du=xn()+500,Ul(0))}}break;case 31:case 13:l=js(s,2),l!==null&&hn(l,s,2),wd(),Bg(s,2)}if(s=hp(i),s===null&&ef(t,e,i,Bu,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else ef(t,e,i,null,n)}}function hp(t){return t=ng(t),Hg(t)}var Bu=null;function Hg(t){if(Bu=null,t=Zs(t),t!==null){var e=Dl(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=Sb(e),t!==null)return t;t=null}else if(n===31){if(t=wb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Bu=t,null}function sT(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(sA()){case Rb:return 2;case Db:return 8;case mu:case aA:return 32;case Mb:return 268435456;default:return 32}default:return 32}}var fp=!1,Sr=null,wr=null,Ar=null,gl=new Map,ml=new Map,or=[],bI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function p0(t,e){switch(t){case"focusin":case"focusout":Sr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":Ar=null;break;case"pointerover":case"pointerout":gl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ml.delete(e.pointerId)}}function wo(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Fa(e),e!==null&&rT(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function xI(t,e,n,i,r){switch(e){case"focusin":return Sr=wo(Sr,t,e,n,i,r),!0;case"dragenter":return wr=wo(wr,t,e,n,i,r),!0;case"mouseover":return Ar=wo(Ar,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return gl.set(s,wo(gl.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ml.set(s,wo(ml.get(s)||null,t,e,n,i,r)),!0}return!1}function aT(t){var e=Zs(t.target);if(e!==null){var n=Dl(e);if(n!==null){if(e=n.tag,e===13){if(e=Sb(n),e!==null){t.blockedOn=e,Jy(t.priority,function(){f0(n)});return}}else if(e===31){if(e=wb(n),e!==null){t.blockedOn=e,Jy(t.priority,function(){f0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function eu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=hp(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Mf=i,n.target.dispatchEvent(i),Mf=null}else return e=Fa(n),e!==null&&rT(e),t.blockedOn=n,!1;e.shift()}return!0}function g0(t,e,n){eu(t)&&n.delete(e)}function TI(){fp=!1,Sr!==null&&eu(Sr)&&(Sr=null),wr!==null&&eu(wr)&&(wr=null),Ar!==null&&eu(Ar)&&(Ar=null),gl.forEach(g0),ml.forEach(g0)}function Mc(t,e){t.blockedOn===e&&(t.blockedOn=null,fp||(fp=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,TI)))}var Oc=null;function m0(t){Oc!==t&&(Oc=t,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,function(){Oc===t&&(Oc=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],r=t[e+2];if(typeof i!="function"){if(Hg(i||n)===null)continue;break}var s=Fa(n);s!==null&&(t.splice(e,3),e-=3,Yf(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Da(t){function e(c){return Mc(c,t)}Sr!==null&&Mc(Sr,t),wr!==null&&Mc(wr,t),Ar!==null&&Mc(Ar,t),gl.forEach(e),ml.forEach(e);for(var n=0;n<or.length;n++){var i=or[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<or.length&&(n=or[0],n.blockedOn===null);)aT(n),n.blockedOn===null&&or.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[fn]||null;if(typeof s=="function")a||m0(n);else if(a){var l=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[fn]||null)l=a.formAction;else if(Hg(r)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),m0(n)}}}function oT(){function t(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(a){return r=a})},focusReset:"manual",scroll:"manual"})}function e(){r!==null&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,r=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),r!==null&&(r(),r=null)}}}function Fg(t){this._internalRoot=t}Cd.prototype.render=Fg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));var n=e.current,i=Sn();iT(n,i,t,e,null,null)};Cd.prototype.unmount=Fg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;iT(t.current,2,null,t,null,null),wd(),e[Ha]=null}};function Cd(t){this._internalRoot=t}Cd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Vb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<or.length&&e!==0&&e<or[n].priority;n++);or.splice(n,0,t),n===0&&aT(t)}};var y0=Tb.version;if(y0!=="19.2.1")throw Error(H(527,y0,"19.2.1"));Be.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=Jw(e),t=t!==null?Ab(t):null,t=t===null?null:t.stateNode,t};var EI={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:_e,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jc.isDisabled&&jc.supportsFiber)try{Ml=jc.inject(EI),Tn=jc}catch{}}dd.createRoot=function(t,e){if(!Eb(t))throw Error(H(299));var n=!1,i="",r=Jx,s=Zx,a=e1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=tT(t,1,!1,null,null,n,i,null,r,s,a,oT),t[Ha]=e.current,Lg(t),new Fg(e)};dd.hydrateRoot=function(t,e,n){if(!Eb(t))throw Error(H(299));var i=!1,r="",s=Jx,a=Zx,l=e1,c=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(c=n.formState)),e=tT(t,1,!0,e,n??null,i,r,c,s,a,l,oT),e.context=nT(null),n=e.current,i=Sn(),i=Jp(i),r=br(i),r.callback=null,xr(n,r,i),n=i,e.current.lanes=n,jl(e,n),yi(e),t[Ha]=e.current,Lg(t),new Cd(e)};dd.version="19.2.1";function lT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lT)}catch(t){console.error(t)}}lT(),mb.exports=dd;var SI=mb.exports;const wI=ab(SI);/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yl(){return yl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},yl.apply(this,arguments)}var mr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(mr||(mr={}));const v0="popstate";function AI(t){t===void 0&&(t={});function e(r,s){let{pathname:a="/",search:l="",hash:c=""}=Ns(r.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),pp("",{pathname:a,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){let a=r.document.querySelector("base"),l="";if(a&&a.getAttribute("href")){let c=r.location.href,d=c.indexOf("#");l=d===-1?c:c.slice(0,d)}return l+"#"+(typeof s=="string"?s:cT(s))}function i(r,s){Rd(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return CI(e,n,i,t)}function Ct(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Rd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function II(){return Math.random().toString(36).substr(2,8)}function _0(t,e){return{usr:t.state,key:t.key,idx:e}}function pp(t,e,n,i){return n===void 0&&(n=null),yl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ns(e):e,{state:n,key:e&&e.key||i||II()})}function cT(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ns(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function CI(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,l=mr.Pop,c=null,d=p();d==null&&(d=0,a.replaceState(yl({},a.state,{idx:d}),""));function p(){return(a.state||{idx:null}).idx}function m(){l=mr.Pop;let j=p(),T=j==null?null:j-d;d=j,c&&c({action:l,location:D.location,delta:T})}function f(j,T){l=mr.Push;let x=pp(D.location,j,T);n&&n(x,j),d=p()+1;let A=_0(x,d),M=D.createHref(x);try{a.pushState(A,"",M)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;r.location.assign(M)}s&&c&&c({action:l,location:D.location,delta:1})}function y(j,T){l=mr.Replace;let x=pp(D.location,j,T);n&&n(x,j),d=p();let A=_0(x,d),M=D.createHref(x);a.replaceState(A,"",M),s&&c&&c({action:l,location:D.location,delta:0})}function S(j){let T=r.location.origin!=="null"?r.location.origin:r.location.href,x=typeof j=="string"?j:cT(j);return x=x.replace(/ $/,"%20"),Ct(T,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,T)}let D={get action(){return l},get location(){return t(r,a)},listen(j){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(v0,m),c=j,()=>{r.removeEventListener(v0,m),c=null}},createHref(j){return e(r,j)},createURL:S,encodeLocation(j){let T=S(j);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:f,replace:y,go(j){return a.go(j)}};return D}var b0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(b0||(b0={}));function RI(t,e,n){return n===void 0&&(n="/"),DI(t,e,n)}function DI(t,e,n,i){let r=typeof e=="string"?Ns(e):e,s=hT(r.pathname||"/",n);if(s==null)return null;let a=uT(t);MI(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let d=HI(s);l=zI(a[c],d)}return l}function uT(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,a,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(Ct(c.relativePath.startsWith(i),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(i.length));let d=gs([i,c.relativePath]),p=n.concat(c);s.children&&s.children.length>0&&(Ct(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),uT(s.children,e,p,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:LI(d,s.index),routesMeta:p})};return t.forEach((s,a)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))r(s,a);else for(let c of dT(s.path))r(s,a,c)}),e}function dT(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=dT(i.join("/")),l=[];return l.push(...a.map(c=>c===""?s:[s,c].join("/"))),r&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function MI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:UI(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const OI=/^:[\w-]+$/,jI=3,kI=2,NI=1,VI=10,PI=-2,x0=t=>t==="*";function LI(t,e){let n=t.split("/"),i=n.length;return n.some(x0)&&(i+=PI),e&&(i+=kI),n.filter(r=>!x0(r)).reduce((r,s)=>r+(OI.test(s)?jI:s===""?NI:VI),i)}function UI(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function zI(t,e,n){let{routesMeta:i}=t,r={},s="/",a=[];for(let l=0;l<i.length;++l){let c=i[l],d=l===i.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=BI({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},p),f=c.route;if(!m)return null;Object.assign(r,m.params),a.push({params:r,pathname:gs([s,m.pathname]),pathnameBase:QI(gs([s,m.pathnameBase])),route:f}),m.pathnameBase!=="/"&&(s=gs([s,m.pathnameBase]))}return a}function BI(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=qI(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:i.reduce((d,p,m)=>{let{paramName:f,isOptional:y}=p;if(f==="*"){let D=l[m]||"";a=s.slice(0,s.length-D.length).replace(/(.)\/+$/,"$1")}const S=l[m];return y&&!S?d[f]=void 0:d[f]=(S||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:a,pattern:t}}function qI(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Rd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(i.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function HI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rd(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function hT(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const FI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GI=t=>FI.test(t);function $I(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Ns(t):t,s;if(n)if(GI(n))s=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Rd(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?s=T0(n.substring(1),"/"):s=T0(n,e)}else s=e;return{pathname:s,search:KI(i),hash:WI(r)}}function T0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function rf(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function YI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function fT(t,e){let n=YI(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function pT(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Ns(t):(r=yl({},t),Ct(!r.pathname||!r.pathname.includes("?"),rf("?","pathname","search",r)),Ct(!r.pathname||!r.pathname.includes("#"),rf("#","pathname","hash",r)),Ct(!r.search||!r.search.includes("#"),rf("#","search","hash",r)));let s=t===""||r.pathname==="",a=s?"/":r.pathname,l;if(a==null)l=n;else{let m=e.length-1;if(!i&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),m-=1;r.pathname=f.join("/")}l=m>=0?e[m]:"/"}let c=$I(r,l),d=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||p)&&(c.pathname+="/"),c}const gs=t=>t.join("/").replace(/\/\/+/g,"/"),QI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),KI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,WI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function XI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const gT=["post","put","patch","delete"];new Set(gT);const JI=["get",...gT];new Set(JI);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vl(){return vl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},vl.apply(this,arguments)}const Gg=N.createContext(null),ZI=N.createContext(null),ql=N.createContext(null),Dd=N.createContext(null),Qr=N.createContext({outlet:null,matches:[],isDataRoute:!1}),mT=N.createContext(null);function Hl(){return N.useContext(Dd)!=null}function Md(){return Hl()||Ct(!1),N.useContext(Dd).location}function yT(t){N.useContext(ql).static||N.useLayoutEffect(t)}function Rn(){let{isDataRoute:t}=N.useContext(Qr);return t?hC():eC()}function eC(){Hl()||Ct(!1);let t=N.useContext(Gg),{basename:e,future:n,navigator:i}=N.useContext(ql),{matches:r}=N.useContext(Qr),{pathname:s}=Md(),a=JSON.stringify(fT(r,n.v7_relativeSplatPath)),l=N.useRef(!1);return yT(()=>{l.current=!0}),N.useCallback(function(d,p){if(p===void 0&&(p={}),!l.current)return;if(typeof d=="number"){i.go(d);return}let m=pT(d,JSON.parse(a),s,p.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:gs([e,m.pathname])),(p.replace?i.replace:i.push)(m,p.state,p)},[e,i,a,s,t])}function vT(){let{matches:t}=N.useContext(Qr),e=t[t.length-1];return e?e.params:{}}function tC(t,e){return nC(t,e)}function nC(t,e,n,i){Hl()||Ct(!1);let{navigator:r}=N.useContext(ql),{matches:s}=N.useContext(Qr),a=s[s.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=Md(),p;if(e){var m;let j=typeof e=="string"?Ns(e):e;c==="/"||(m=j.pathname)!=null&&m.startsWith(c)||Ct(!1),p=j}else p=d;let f=p.pathname||"/",y=f;if(c!=="/"){let j=c.replace(/^\//,"").split("/");y="/"+f.replace(/^\//,"").split("/").slice(j.length).join("/")}let S=RI(t,{pathname:y}),D=oC(S&&S.map(j=>Object.assign({},j,{params:Object.assign({},l,j.params),pathname:gs([c,r.encodeLocation?r.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?c:gs([c,r.encodeLocation?r.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),s,n,i);return e&&D?N.createElement(Dd.Provider,{value:{location:vl({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:mr.Pop}},D):D}function iC(){let t=dC(),e=XI(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:r},n):null,null)}const rC=N.createElement(iC,null);class sC extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?N.createElement(Qr.Provider,{value:this.props.routeContext},N.createElement(mT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function aC(t){let{routeContext:e,match:n,children:i}=t,r=N.useContext(Gg);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(Qr.Provider,{value:e},i)}function oC(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=(r=n)==null?void 0:r.errors;if(l!=null){let p=a.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);p>=0||Ct(!1),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,d=-1;if(n&&i&&i.v7_partialHydration)for(let p=0;p<a.length;p++){let m=a[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=p),m.route.id){let{loaderData:f,errors:y}=n,S=m.route.loader&&f[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||S){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((p,m,f)=>{let y,S=!1,D=null,j=null;n&&(y=l&&m.route.id?l[m.route.id]:void 0,D=m.route.errorElement||rC,c&&(d<0&&f===0?(fC("route-fallback"),S=!0,j=null):d===f&&(S=!0,j=m.route.hydrateFallbackElement||null)));let T=e.concat(a.slice(0,f+1)),x=()=>{let A;return y?A=D:S?A=j:m.route.Component?A=N.createElement(m.route.Component,null):m.route.element?A=m.route.element:A=p,N.createElement(aC,{match:m,routeContext:{outlet:p,matches:T,isDataRoute:n!=null},children:A})};return n&&(m.route.ErrorBoundary||m.route.errorElement||f===0)?N.createElement(sC,{location:n.location,revalidation:n.revalidation,component:D,error:y,children:x(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):x()},null)}var _T=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(_T||{}),bT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(bT||{});function lC(t){let e=N.useContext(Gg);return e||Ct(!1),e}function cC(t){let e=N.useContext(ZI);return e||Ct(!1),e}function uC(t){let e=N.useContext(Qr);return e||Ct(!1),e}function xT(t){let e=uC(),n=e.matches[e.matches.length-1];return n.route.id||Ct(!1),n.route.id}function dC(){var t;let e=N.useContext(mT),n=cC(),i=xT();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function hC(){let{router:t}=lC(_T.UseNavigateStable),e=xT(bT.UseNavigateStable),n=N.useRef(!1);return yT(()=>{n.current=!0}),N.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,vl({fromRouteId:e},s)))},[t,e])}const E0={};function fC(t,e,n){E0[t]||(E0[t]=!0)}function pC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function S0(t){let{to:e,replace:n,state:i,relative:r}=t;Hl()||Ct(!1);let{future:s,static:a}=N.useContext(ql),{matches:l}=N.useContext(Qr),{pathname:c}=Md(),d=Rn(),p=pT(e,fT(l,s.v7_relativeSplatPath),c,r==="path"),m=JSON.stringify(p);return N.useEffect(()=>d(JSON.parse(m),{replace:n,state:i,relative:r}),[d,m,r,n,i]),null}function Yn(t){Ct(!1)}function gC(t){let{basename:e="/",children:n=null,location:i,navigationType:r=mr.Pop,navigator:s,static:a=!1,future:l}=t;Hl()&&Ct(!1);let c=e.replace(/^\/*/,"/"),d=N.useMemo(()=>({basename:c,navigator:s,static:a,future:vl({v7_relativeSplatPath:!1},l)}),[c,l,s,a]);typeof i=="string"&&(i=Ns(i));let{pathname:p="/",search:m="",hash:f="",state:y=null,key:S="default"}=i,D=N.useMemo(()=>{let j=hT(p,c);return j==null?null:{location:{pathname:j,search:m,hash:f,state:y,key:S},navigationType:r}},[c,p,m,f,y,S,r]);return D==null?null:N.createElement(ql.Provider,{value:d},N.createElement(Dd.Provider,{children:n,value:D}))}function mC(t){let{children:e,location:n}=t;return tC(gp(e),n)}new Promise(()=>{});function gp(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(i,r)=>{if(!N.isValidElement(i))return;let s=[...e,r];if(i.type===N.Fragment){n.push.apply(n,gp(i.props.children,s));return}i.type!==Yn&&Ct(!1),!i.props.index||!i.props.children||Ct(!1);let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=gp(i.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mp(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let i=t[n];return e.concat(Array.isArray(i)?i.map(r=>[n,r]):[[n,i]])},[]))}function yC(t,e){let n=mp(t);return e&&e.forEach((i,r)=>{n.has(r)||e.getAll(r).forEach(s=>{n.append(r,s)})}),n}const vC="6";try{window.__reactRouterVersion=vC}catch{}const _C="startTransition",w0=Gw[_C];function bC(t){let{basename:e,children:n,future:i,window:r}=t,s=N.useRef();s.current==null&&(s.current=AI({window:r,v5Compat:!0}));let a=s.current,[l,c]=N.useState({action:a.action,location:a.location}),{v7_startTransition:d}=i||{},p=N.useCallback(m=>{d&&w0?w0(()=>c(m)):c(m)},[c,d]);return N.useLayoutEffect(()=>a.listen(p),[a,p]),N.useEffect(()=>pC(i),[i]),N.createElement(gC,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:a,future:i})}var A0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(A0||(A0={}));var I0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(I0||(I0={}));function $g(t){let e=N.useRef(mp(t)),n=N.useRef(!1),i=Md(),r=N.useMemo(()=>yC(i.search,n.current?null:e.current),[i.search]),s=Rn(),a=N.useCallback((l,c)=>{const d=mp(typeof l=="function"?l(r):l);n.current=!0,s("?"+d,c)},[s,r]);return[r,a]}const xC=()=>{};var C0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},TC=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],a=t[n++],l=t[n++],c=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},ET={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],a=r+1<t.length,l=a?t[r+1]:0,c=r+2<t.length,d=c?t[r+2]:0,p=s>>2,m=(s&3)<<4|l>>4;let f=(l&15)<<2|d>>6,y=d&63;c||(y=64,a||(f=64)),i.push(n[p],n[m],n[f],n[y])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(TT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):TC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const m=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||l==null||d==null||m==null)throw new EC;const f=s<<2|l>>4;if(i.push(f),d!==64){const y=l<<4&240|d>>2;if(i.push(y),m!==64){const S=d<<6&192|m;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class EC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SC=function(t){const e=TT(t);return ET.encodeByteArray(e,!0)},qu=function(t){return SC(t).replace(/\./g,"")},ST=function(t){try{return ET.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=()=>wC().__FIREBASE_DEFAULTS__,IC=()=>{if(typeof process>"u"||typeof C0>"u")return;const t=C0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},CC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ST(t[1]);return e&&JSON.parse(e)},Od=()=>{try{return xC()||AC()||IC()||CC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},wT=t=>{var e,n;return(n=(e=Od())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},RC=t=>{const e=wT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},AT=()=>{var t;return(t=Od())===null||t===void 0?void 0:t.config},IT=t=>{var e;return(e=Od())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function CT(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[qu(JSON.stringify(n)),qu(JSON.stringify(a)),""].join(".")}const Wo={};function OC(){const t={prod:[],emulator:[]};for(const e of Object.keys(Wo))Wo[e]?t.emulator.push(e):t.prod.push(e);return t}function jC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let R0=!1;function RT(t,e){if(typeof window>"u"||typeof document>"u"||!Wa(window.location.host)||Wo[t]===e||Wo[t]||R0)return;Wo[t]=e;function n(f){return`__firebase__banner__${f}`}const i="__firebase__banner",s=OC().prod.length>0;function a(){const f=document.getElementById(i);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,y){f.setAttribute("width","24"),f.setAttribute("id",y),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function d(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{R0=!0,a()},f}function p(f,y){f.setAttribute("id",y),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function m(){const f=jC(i),y=n("text"),S=document.getElementById(y)||document.createElement("span"),D=n("learnmore"),j=document.getElementById(D)||document.createElement("a"),T=n("preprendIcon"),x=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const A=f.element;l(A),p(j,D);const M=d();c(x,T),A.append(x,S,j,M),document.body.appendChild(A)}s?(S.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function NC(){var t;const e=(t=Od())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function LC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UC(){const t=Zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function zC(){return!NC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function BC(){try{return typeof indexedDB=="object"}catch{return!1}}function qC(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="FirebaseError";class Qi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=HC,Object.setPrototypeOf(this,Qi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fl.prototype.create)}}class Fl{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?FC(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new Qi(r,l,i)}}function FC(t,e){return t.replace(GC,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const GC=/\{\$([^}]+)}/g;function $C(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ws(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],a=e[r];if(D0(s)&&D0(a)){if(!ws(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function D0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function YC(t,e){const n=new QC(t,e);return n.subscribe.bind(n)}class QC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");KC(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=sf),r.error===void 0&&(r.error=sf),r.complete===void 0&&(r.complete=sf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function sf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){return t&&t._delegate?t._delegate:t}class As{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new DC;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JC(e))try{this.getOrInitializeService({instanceIdentifier:os})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=os){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=os){return this.instances.has(e)}getOptions(e=os){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:XC(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=os){return this.component?this.component.multipleInstances?e:os:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XC(t){return t===os?void 0:t}function JC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new WC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(je||(je={}));const eR={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},tR=je.INFO,nR={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},iR=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=nR[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yg{constructor(e){this.name=e,this._logLevel=tR,this._logHandler=iR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const rR=(t,e)=>e.some(n=>t instanceof n);let M0,O0;function sR(){return M0||(M0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aR(){return O0||(O0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const DT=new WeakMap,yp=new WeakMap,MT=new WeakMap,af=new WeakMap,Qg=new WeakMap;function oR(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Ir(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&DT.set(n,t)}).catch(()=>{}),Qg.set(e,t),e}function lR(t){if(yp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});yp.set(t,e)}let vp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return yp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||MT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ir(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cR(t){vp=t(vp)}function uR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(of(this),e,...n);return MT.set(i,e.sort?e.sort():[e]),Ir(i)}:aR().includes(t)?function(...e){return t.apply(of(this),e),Ir(DT.get(this))}:function(...e){return Ir(t.apply(of(this),e))}}function dR(t){return typeof t=="function"?uR(t):(t instanceof IDBTransaction&&lR(t),rR(t,sR())?new Proxy(t,vp):t)}function Ir(t){if(t instanceof IDBRequest)return oR(t);if(af.has(t))return af.get(t);const e=dR(t);return e!==t&&(af.set(t,e),Qg.set(e,t)),e}const of=t=>Qg.get(t);function hR(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(t,e),l=Ir(a);return i&&a.addEventListener("upgradeneeded",c=>{i(Ir(a.result),c.oldVersion,c.newVersion,Ir(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const fR=["get","getKey","getAll","getAllKeys","count"],pR=["put","add","delete","clear"],lf=new Map;function j0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lf.get(e))return lf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=pR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||fR.includes(n)))return;const s=async function(a,...l){const c=this.transaction(a,r?"readwrite":"readonly");let d=c.store;return i&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),r&&c.done]))[0]};return lf.set(e,s),s}cR(t=>({...t,get:(e,n,i)=>j0(e,n)||t.get(e,n,i),has:(e,n)=>!!j0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function mR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _p="@firebase/app",k0="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new Yg("@firebase/app"),yR="@firebase/app-compat",vR="@firebase/analytics-compat",_R="@firebase/analytics",bR="@firebase/app-check-compat",xR="@firebase/app-check",TR="@firebase/auth",ER="@firebase/auth-compat",SR="@firebase/database",wR="@firebase/data-connect",AR="@firebase/database-compat",IR="@firebase/functions",CR="@firebase/functions-compat",RR="@firebase/installations",DR="@firebase/installations-compat",MR="@firebase/messaging",OR="@firebase/messaging-compat",jR="@firebase/performance",kR="@firebase/performance-compat",NR="@firebase/remote-config",VR="@firebase/remote-config-compat",PR="@firebase/storage",LR="@firebase/storage-compat",UR="@firebase/firestore",zR="@firebase/ai",BR="@firebase/firestore-compat",qR="firebase",HR="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp="[DEFAULT]",FR={[_p]:"fire-core",[yR]:"fire-core-compat",[_R]:"fire-analytics",[vR]:"fire-analytics-compat",[xR]:"fire-app-check",[bR]:"fire-app-check-compat",[TR]:"fire-auth",[ER]:"fire-auth-compat",[SR]:"fire-rtdb",[wR]:"fire-data-connect",[AR]:"fire-rtdb-compat",[IR]:"fire-fn",[CR]:"fire-fn-compat",[RR]:"fire-iid",[DR]:"fire-iid-compat",[MR]:"fire-fcm",[OR]:"fire-fcm-compat",[jR]:"fire-perf",[kR]:"fire-perf-compat",[NR]:"fire-rc",[VR]:"fire-rc-compat",[PR]:"fire-gcs",[LR]:"fire-gcs-compat",[UR]:"fire-fst",[BR]:"fire-fst-compat",[zR]:"fire-vertex","fire-js":"fire-js",[qR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu=new Map,GR=new Map,xp=new Map;function N0(t,e){try{t.container.addComponent(e)}catch(n){qi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ma(t){const e=t.name;if(xp.has(e))return qi.debug(`There were multiple attempts to register component ${e}.`),!1;xp.set(e,t);for(const n of Hu.values())N0(n,t);for(const n of GR.values())N0(n,t);return!0}function Kg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Kn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cr=new Fl("app","Firebase",$R);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new As("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa=HR;function OT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:bp,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw Cr.create("bad-app-name",{appName:String(r)});if(n||(n=AT()),!n)throw Cr.create("no-options");const s=Hu.get(r);if(s){if(ws(n,s.options)&&ws(i,s.config))return s;throw Cr.create("duplicate-app",{appName:r})}const a=new ZC(r);for(const c of xp.values())a.addComponent(c);const l=new YR(n,i,a);return Hu.set(r,l),l}function jT(t=bp){const e=Hu.get(t);if(!e&&t===bp&&AT())return OT();if(!e)throw Cr.create("no-app",{appName:t});return e}function Rr(t,e,n){var i;let r=(i=FR[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qi.warn(l.join(" "));return}Ma(new As(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR="firebase-heartbeat-database",KR=1,_l="firebase-heartbeat-store";let cf=null;function kT(){return cf||(cf=hR(QR,KR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_l)}catch(n){console.warn(n)}}}}).catch(t=>{throw Cr.create("idb-open",{originalErrorMessage:t.message})})),cf}async function WR(t){try{const n=(await kT()).transaction(_l),i=await n.objectStore(_l).get(NT(t));return await n.done,i}catch(e){if(e instanceof Qi)qi.warn(e.message);else{const n=Cr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qi.warn(n.message)}}}async function V0(t,e){try{const i=(await kT()).transaction(_l,"readwrite");await i.objectStore(_l).put(e,NT(t)),await i.done}catch(n){if(n instanceof Qi)qi.warn(n.message);else{const i=Cr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qi.warn(i.message)}}}function NT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=1024,JR=30;class ZR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new tD(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=P0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>JR){const a=nD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){qi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=P0(),{heartbeatsToSend:i,unsentEntries:r}=eD(this._heartbeatsCache.heartbeats),s=qu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return qi.warn(n),""}}}function P0(){return new Date().toISOString().substring(0,10)}function eD(t,e=XR){const n=[];let i=t.slice();for(const r of t){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),L0(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),L0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class tD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BC()?qC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await WR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return V0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return V0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function L0(t){return qu(JSON.stringify({version:2,heartbeats:t})).length}function nD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t){Ma(new As("platform-logger",e=>new gR(e),"PRIVATE")),Ma(new As("heartbeat",e=>new ZR(e),"PRIVATE")),Rr(_p,k0,t),Rr(_p,k0,"esm2017"),Rr("fire-js","")}iD("");var rD="firebase",sD="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rr(rD,sD,"app");function Wg(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function VT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aD=VT,PT=new Fl("auth","Firebase",VT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=new Yg("@firebase/auth");function oD(t,...e){Fu.logLevel<=je.WARN&&Fu.warn(`Auth (${Xa}): ${t}`,...e)}function tu(t,...e){Fu.logLevel<=je.ERROR&&Fu.error(`Auth (${Xa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(t,...e){throw Jg(t,...e)}function Xn(t,...e){return Jg(t,...e)}function Xg(t,e,n){const i=Object.assign(Object.assign({},aD()),{[e]:n});return new Fl("auth","Firebase",i).create(e,{appName:t.name})}function ms(t){return Xg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lD(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&pi(t,"argument-error"),Xg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Jg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return PT.create(t,...e)}function be(t,e,...n){if(!t)throw Jg(e,...n)}function Mi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw tu(e),new Error(e)}function Hi(t,e){t||Mi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function cD(){return U0()==="http:"||U0()==="https:"}function U0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cD()||PC()||"connection"in navigator)?navigator.onLine:!0}function dD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hi(n>e,"Short delay should be less than long delay!"),this.isMobile=kC()||LC()}get(){return uD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(t,e){Hi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pD=new $l(3e4,6e4);function em(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ja(t,e,n,i,r={}){return UT(t,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const l=Gl(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},s);return VC()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Wa(t.emulatorConfig.host)&&(d.credentials="include"),LT.fetch()(await zT(t,t.config.apiHost,n,l),d)})}async function UT(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},hD),e);try{const r=new mD(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw kc(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw kc(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw kc(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw kc(t,"user-disabled",a);const p=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Xg(t,p,d);pi(t,p)}}catch(r){if(r instanceof Qi)throw r;pi(t,"network-request-failed",{message:String(r)})}}async function gD(t,e,n,i,r={}){const s=await Ja(t,e,n,i,r);return"mfaPendingCredential"in s&&pi(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function zT(t,e,n,i){const r=`${e}${n}?${i}`,s=t,a=s.config.emulator?Zg(t.config,r):`${t.config.apiScheme}://${r}`;return fD.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class mD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Xn(this.auth,"network-request-failed")),pD.get())})}}function kc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Xn(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yD(t,e){return Ja(t,"POST","/v1/accounts:delete",e)}async function Gu(t,e){return Ja(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vD(t,e=!1){const n=Vt(t),i=await n.getIdToken(e),r=tm(i);be(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Xo(uf(r.auth_time)),issuedAtTime:Xo(uf(r.iat)),expirationTime:Xo(uf(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function uf(t){return Number(t)*1e3}function tm(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return tu("JWT malformed, contained fewer than 3 sections"),null;try{const r=ST(n);return r?JSON.parse(r):(tu("Failed to decode base64 JWT payload"),null)}catch(r){return tu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function z0(t){const e=tm(t);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Qi&&_D(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function _D({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xo(this.lastLoginAt),this.creationTime=Xo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $u(t){var e;const n=t.auth,i=await t.getIdToken(),r=await bl(t,Gu(n,{idToken:i}));be(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?BT(s.providerUserInfo):[],l=TD(t.providerData,a),c=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),p=c?d:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Ep(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function xD(t){const e=Vt(t);await $u(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TD(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function BT(t){return t.map(e=>{var{providerId:n}=e,i=Wg(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ED(t,e){const n=await UT(t,{},async()=>{const i=Gl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=await zT(t,r,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:i};return t.emulatorConfig&&Wa(t.emulatorConfig.host)&&(c.credentials="include"),LT.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function SD(t,e){return Ja(t,"POST","/v2/accounts:revokeToken",em(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):z0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){be(e.length!==0,"internal-error");const n=z0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await ED(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new ma;return i&&(be(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(be(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(be(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ma,this.toJSON())}_performRefresh(){return Mi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(t,e){be(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Wn{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=Wg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ep(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await bl(this,this.stsTokenManager.getToken(this.auth,e));return be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return vD(this,e)}reload(){return xD(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Wn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await $u(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kn(this.auth.app))return Promise.reject(ms(this.auth));const e=await this.getIdToken();return await bl(this,yD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,a,l,c,d,p;const m=(i=n.displayName)!==null&&i!==void 0?i:void 0,f=(r=n.email)!==null&&r!==void 0?r:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,S=(a=n.photoURL)!==null&&a!==void 0?a:void 0,D=(l=n.tenantId)!==null&&l!==void 0?l:void 0,j=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,T=(d=n.createdAt)!==null&&d!==void 0?d:void 0,x=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:A,emailVerified:M,isAnonymous:$,providerData:Q,stsTokenManager:w}=n;be(A&&w,e,"internal-error");const b=ma.fromJSON(this.name,w);be(typeof A=="string",e,"internal-error"),er(m,e.name),er(f,e.name),be(typeof M=="boolean",e,"internal-error"),be(typeof $=="boolean",e,"internal-error"),er(y,e.name),er(S,e.name),er(D,e.name),er(j,e.name),er(T,e.name),er(x,e.name);const E=new Wn({uid:A,auth:e,email:f,emailVerified:M,displayName:m,isAnonymous:$,photoURL:S,phoneNumber:y,tenantId:D,stsTokenManager:b,createdAt:T,lastLoginAt:x});return Q&&Array.isArray(Q)&&(E.providerData=Q.map(C=>Object.assign({},C))),j&&(E._redirectEventId=j),E}static async _fromIdTokenResponse(e,n,i=!1){const r=new ma;r.updateFromServerResponse(n);const s=new Wn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await $u(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];be(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?BT(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new ma;l.updateFromIdToken(i);const c=new Wn({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Ep(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0=new Map;function Oi(t){Hi(t instanceof Function,"Expected a class definition");let e=B0.get(t);return e?(Hi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,B0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}qT.type="NONE";const q0=qT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(t,e,n){return`firebase:${t}:${e}:${n}`}class ya{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=nu(this.userKey,r.apiKey,s),this.fullPersistenceKey=nu("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Gu(this.auth,{idToken:e}).catch(()=>{});return n?Wn._fromGetAccountInfoResponse(this.auth,n,e):null}return Wn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new ya(Oi(q0),e,i);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=r[0]||Oi(q0);const a=nu(i,e.config.apiKey,e.name);let l=null;for(const d of n)try{const p=await d._get(a);if(p){let m;if(typeof p=="string"){const f=await Gu(e,{idToken:p}).catch(()=>{});if(!f)break;m=await Wn._fromGetAccountInfoResponse(e,f,p)}else m=Wn._fromJSON(e,p);d!==s&&(l=m),s=d;break}}catch{}const c=r.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new ya(s,e,i):(s=c[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(a)}catch{}})),new ya(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($T(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QT(e))return"Blackberry";if(KT(e))return"Webos";if(FT(e))return"Safari";if((e.includes("chrome/")||GT(e))&&!e.includes("edge/"))return"Chrome";if(YT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function HT(t=Zt()){return/firefox\//i.test(t)}function FT(t=Zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GT(t=Zt()){return/crios\//i.test(t)}function $T(t=Zt()){return/iemobile/i.test(t)}function YT(t=Zt()){return/android/i.test(t)}function QT(t=Zt()){return/blackberry/i.test(t)}function KT(t=Zt()){return/webos/i.test(t)}function nm(t=Zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function wD(t=Zt()){var e;return nm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function AD(){return UC()&&document.documentMode===10}function WT(t=Zt()){return nm(t)||YT(t)||KT(t)||QT(t)||/windows phone/i.test(t)||$T(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(t,e=[]){let n;switch(t){case"Browser":n=H0(Zt());break;case"Worker":n=`${H0(Zt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,l)=>{try{const c=e(s);a(c)}catch(c){l(c)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CD(t,e={}){return Ja(t,"GET","/v2/passwordPolicy",em(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD=6;class DD{constructor(e){var n,i,r,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:RD,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,a,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new F0(this),this.idTokenSubscription=new F0(this),this.beforeStateQueue=new ID(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Oi(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await ya.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Gu(this,{idToken:e}),i=await Wn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Kn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await $u(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kn(this.app))return Promise.reject(ms(this));const n=e?Vt(e):null;return n&&be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kn(this.app)?Promise.reject(ms(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kn(this.app)?Promise.reject(ms(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Oi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CD(this),n=new DD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fl("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await SD(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Oi(e)||this._popupRedirectResolver;be(n,this,"argument-error"),this.redirectPersistenceManager=await ya.create(this,[Oi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,i,r);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=XT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(Kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&oD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function jd(t){return Vt(t)}class F0{constructor(e){this.auth=e,this.observer=null,this.addObserver=YC(n=>this.observer=n)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let im={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OD(t){im=t}function jD(t){return im.loadJS(t)}function kD(){return im.gapiScript}function ND(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(t,e){const n=Kg(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(ws(s,e??{}))return r;pi(r,"already-initialized")}return n.initialize({options:e})}function PD(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Oi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function LD(t,e,n){const i=jd(t);be(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=JT(e),{host:a,port:l}=UD(e),c=l===null?"":`:${l}`,d={url:`${s}//${a}${c}/`},p=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){be(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),be(ws(d,i.config.emulator)&&ws(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=d,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,Wa(a)?(CT(`${s}//${a}${c}`),RT("Auth",!0)):zD()}function JT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function UD(t){const e=JT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:G0(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:G0(a)}}}function G0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function zD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Mi("not implemented")}_getIdTokenResponse(e){return Mi("not implemented")}_linkToIdToken(e,n){return Mi("not implemented")}_getReauthenticationResolver(e){return Mi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function va(t,e){return gD(t,"POST","/v1/accounts:signInWithIdp",em(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD="http://localhost";class Is extends ZT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Is(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):pi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=Wg(n,["providerId","signInMethod"]);if(!i||!r)return null;const a=new Is(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return va(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,va(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,va(e,n)}buildRequest(){const e={requestUri:BD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Gl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl extends rm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends Yl{constructor(){super("facebook.com")}static credential(e){return Is._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lr.credential(e.oauthAccessToken)}catch{return null}}}lr.FACEBOOK_SIGN_IN_METHOD="facebook.com";lr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends Yl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Is._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ii.credential(n,i)}catch{return null}}}Ii.GOOGLE_SIGN_IN_METHOD="google.com";Ii.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends Yl{constructor(){super("github.com")}static credential(e){return Is._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cr.credential(e.oauthAccessToken)}catch{return null}}}cr.GITHUB_SIGN_IN_METHOD="github.com";cr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends Yl{constructor(){super("twitter.com")}static credential(e,n){return Is._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ur.credential(n,i)}catch{return null}}}ur.TWITTER_SIGN_IN_METHOD="twitter.com";ur.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await Wn._fromIdTokenResponse(e,i,r),a=$0(i);return new Oa({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=$0(i);return new Oa({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function $0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu extends Qi{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Yu.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Yu(e,n,i,r)}}function eE(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Yu._fromErrorAndOperation(t,s,e,i):s})}async function qD(t,e,n=!1){const i=await bl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Oa._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HD(t,e,n=!1){const{auth:i}=t;if(Kn(i.app))return Promise.reject(ms(i));const r="reauthenticate";try{const s=await bl(t,eE(i,r,e,t),n);be(s.idToken,i,"internal-error");const a=tm(s.idToken);be(a,i,"internal-error");const{sub:l}=a;return be(t.uid===l,i,"user-mismatch"),Oa._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&pi(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FD(t,e,n=!1){if(Kn(t.app))return Promise.reject(ms(t));const i="signIn",r=await eE(t,i,e),s=await Oa._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}function GD(t,e,n,i){return Vt(t).onIdTokenChanged(e,n,i)}function $D(t,e,n){return Vt(t).beforeAuthStateChanged(e,n)}function tE(t,e,n,i){return Vt(t).onAuthStateChanged(e,n,i)}function YD(t){return Vt(t).signOut()}const Qu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Qu,"1"),this.storage.removeItem(Qu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=1e3,KD=10;class iE extends nE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=WT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);AD()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,KD):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},QD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}iE.type="LOCAL";const WD=iE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE extends nE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}rE.type="SESSION";const sE=rE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new kd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(a).map(async d=>d(n.origin,s)),c=await XD(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((l,c)=>{const d=sm("",20);r.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(m){const f=m;if(f.data.eventId===d)switch(f.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(f.data.response);break;default:clearTimeout(p),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(){return window}function ZD(t){ci().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(){return typeof ci().WorkerGlobalScope<"u"&&typeof ci().importScripts=="function"}async function e4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function t4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function n4(){return aE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="firebaseLocalStorageDb",i4=1,Ku="firebaseLocalStorage",lE="fbase_key";class Ql{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Nd(t,e){return t.transaction([Ku],e?"readwrite":"readonly").objectStore(Ku)}function r4(){const t=indexedDB.deleteDatabase(oE);return new Ql(t).toPromise()}function Sp(){const t=indexedDB.open(oE,i4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Ku,{keyPath:lE})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Ku)?e(i):(i.close(),await r4(),e(await Sp()))})})}async function Y0(t,e,n){const i=Nd(t,!0).put({[lE]:e,value:n});return new Ql(i).toPromise()}async function s4(t,e){const n=Nd(t,!1).get(e),i=await new Ql(n).toPromise();return i===void 0?null:i.value}function Q0(t,e){const n=Nd(t,!0).delete(e);return new Ql(n).toPromise()}const a4=800,o4=3;class cE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>o4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kd._getInstance(n4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await e4(),!this.activeServiceWorker)return;this.sender=new JD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||t4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sp();return await Y0(e,Qu,"1"),await Q0(e,Qu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Y0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>s4(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Q0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Nd(r,!1).getAll();return new Ql(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),a4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cE.type="LOCAL";const l4=cE;new $l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(t,e){return e?Oi(e):(be(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am extends ZT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return va(e,this._buildIdpRequest())}_linkToIdToken(e,n){return va(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return va(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function c4(t){return FD(t.auth,new am(t),t.bypassAuthState)}function u4(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),HD(n,new am(t),t.bypassAuthState)}async function d4(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),qD(n,new am(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return c4;case"linkViaPopup":case"linkViaRedirect":return d4;case"reauthViaPopup":case"reauthViaRedirect":return u4;default:pi(this.auth,"internal-error")}}resolve(e){Hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=new $l(2e3,1e4);async function f4(t,e,n){if(Kn(t.app))return Promise.reject(Xn(t,"operation-not-supported-in-this-environment"));const i=jd(t);lD(t,e,rm);const r=uE(i,n);return new ls(i,"signInViaPopup",e,r).executeNotNull()}class ls extends dE{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,ls.currentPopupAction&&ls.currentPopupAction.cancel(),ls.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Hi(this.filter.length===1,"Popup operations only handle one event");const e=sm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ls.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,h4.get())};e()}}ls.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4="pendingRedirect",iu=new Map;class g4 extends dE{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=iu.get(this.auth._key());if(!e){try{const i=await m4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}iu.set(this.auth._key(),e)}return this.bypassAuthState||iu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function m4(t,e){const n=_4(e),i=v4(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function y4(t,e){iu.set(t._key(),e)}function v4(t){return Oi(t._redirectPersistence)}function _4(t){return nu(p4,t.config.apiKey,t.name)}async function b4(t,e,n=!1){if(Kn(t.app))return Promise.reject(ms(t));const i=jd(t),r=uE(i,e),a=await new g4(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4=10*60*1e3;class T4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!E4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!hE(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Xn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=x4&&this.cachedEventUids.clear(),this.cachedEventUids.has(K0(e))}saveEventToCache(e){this.cachedEventUids.add(K0(e)),this.lastProcessedEventTime=Date.now()}}function K0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function hE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function E4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S4(t,e={}){return Ja(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,A4=/^https?/;async function I4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await S4(t);for(const n of e)try{if(C4(n))return}catch{}pi(t,"unauthorized-domain")}function C4(t){const e=Tp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!A4.test(n))return!1;if(w4.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=new $l(3e4,6e4);function W0(){const t=ci().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function D4(t){return new Promise((e,n)=>{var i,r,s;function a(){W0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{W0(),n(Xn(t,"network-request-failed"))},timeout:R4.get()})}if(!((r=(i=ci().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=ci().gapi)===null||s===void 0)&&s.load)a();else{const l=ND("iframefcb");return ci()[l]=()=>{gapi.load?a():n(Xn(t,"network-request-failed"))},jD(`${kD()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw ru=null,e})}let ru=null;function M4(t){return ru=ru||D4(t),ru}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=new $l(5e3,15e3),j4="__/auth/iframe",k4="emulator/auth/iframe",N4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},V4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function P4(t){const e=t.config;be(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Zg(e,k4):`https://${t.config.authDomain}/${j4}`,i={apiKey:e.apiKey,appName:t.name,v:Xa},r=V4.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Gl(i).slice(1)}`}async function L4(t){const e=await M4(t),n=ci().gapi;return be(n,t,"internal-error"),e.open({where:document.body,url:P4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:N4,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=Xn(t,"network-request-failed"),l=ci().setTimeout(()=>{s(a)},O4.get());function c(){ci().clearTimeout(l),r(i)}i.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},z4=500,B4=600,q4="_blank",H4="http://localhost";class X0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function F4(t,e,n,i=z4,r=B4){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const c=Object.assign(Object.assign({},U4),{width:i.toString(),height:r.toString(),top:s,left:a}),d=Zt().toLowerCase();n&&(l=GT(d)?q4:n),HT(d)&&(e=e||H4,c.scrollbars="yes");const p=Object.entries(c).reduce((f,[y,S])=>`${f}${y}=${S},`,"");if(wD(d)&&l!=="_self")return G4(e||"",l),new X0(null);const m=window.open(e||"",l,p);be(m,t,"popup-blocked");try{m.focus()}catch{}return new X0(m)}function G4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4="__/auth/handler",Y4="emulator/auth/handler",Q4=encodeURIComponent("fac");async function J0(t,e,n,i,r,s){be(t.config.authDomain,t,"auth-domain-config-required"),be(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Xa,eventId:r};if(e instanceof rm){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",$C(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))a[p]=m}if(e instanceof Yl){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(a.scopes=p.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const c=await t._getAppCheckToken(),d=c?`#${Q4}=${encodeURIComponent(c)}`:"";return`${K4(t)}?${Gl(l).slice(1)}${d}`}function K4({config:t}){return t.emulator?Zg(t,Y4):`https://${t.authDomain}/${$4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df="webStorageSupport";class W4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sE,this._completeRedirectFn=b4,this._overrideRedirectResult=y4}async _openPopup(e,n,i,r){var s;Hi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await J0(e,n,i,Tp(),r);return F4(e,a,sm())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await J0(e,n,i,Tp(),r);return ZD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Hi(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await L4(e),i=new T4(e);return n.register("authEvent",r=>(be(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(df,{type:df},r=>{var s;const a=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[df];a!==void 0&&n(!!a),pi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=I4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return WT()||FT()||nm()}}const X4=W4;var Z0="@firebase/auth",e_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eM(t){Ma(new As("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;be(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XT(t)},d=new MD(i,r,s,c);return PD(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ma(new As("auth-internal",e=>{const n=jd(e.getProvider("auth").getImmediate());return(i=>new J4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rr(Z0,e_,Z4(t)),Rr(Z0,e_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=5*60,nM=IT("authIdTokenMaxAge")||tM;let t_=null;const iM=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>nM)return;const r=n==null?void 0:n.token;t_!==r&&(t_=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function rM(t=jT()){const e=Kg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=VD(t,{popupRedirectResolver:X4,persistence:[l4,WD,sE]}),i=IT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=iM(s.toString());$D(n,a,()=>a(n.currentUser)),GD(n,l=>a(l))}}const r=wT("auth");return r&&LD(n,`http://${r}`),n}function sM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}OD({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Xn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",sM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eM("Browser");var n_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dr,fE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,b){function E(){}E.prototype=b.prototype,w.D=b.prototype,w.prototype=new E,w.prototype.constructor=w,w.C=function(C,I,R){for(var v=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)v[Z-2]=arguments[Z];return b.prototype[I].apply(C,v)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(w,b,E){E||(E=0);var C=Array(16);if(typeof b=="string")for(var I=0;16>I;++I)C[I]=b.charCodeAt(E++)|b.charCodeAt(E++)<<8|b.charCodeAt(E++)<<16|b.charCodeAt(E++)<<24;else for(I=0;16>I;++I)C[I]=b[E++]|b[E++]<<8|b[E++]<<16|b[E++]<<24;b=w.g[0],E=w.g[1],I=w.g[2];var R=w.g[3],v=b+(R^E&(I^R))+C[0]+3614090360&4294967295;b=E+(v<<7&4294967295|v>>>25),v=R+(I^b&(E^I))+C[1]+3905402710&4294967295,R=b+(v<<12&4294967295|v>>>20),v=I+(E^R&(b^E))+C[2]+606105819&4294967295,I=R+(v<<17&4294967295|v>>>15),v=E+(b^I&(R^b))+C[3]+3250441966&4294967295,E=I+(v<<22&4294967295|v>>>10),v=b+(R^E&(I^R))+C[4]+4118548399&4294967295,b=E+(v<<7&4294967295|v>>>25),v=R+(I^b&(E^I))+C[5]+1200080426&4294967295,R=b+(v<<12&4294967295|v>>>20),v=I+(E^R&(b^E))+C[6]+2821735955&4294967295,I=R+(v<<17&4294967295|v>>>15),v=E+(b^I&(R^b))+C[7]+4249261313&4294967295,E=I+(v<<22&4294967295|v>>>10),v=b+(R^E&(I^R))+C[8]+1770035416&4294967295,b=E+(v<<7&4294967295|v>>>25),v=R+(I^b&(E^I))+C[9]+2336552879&4294967295,R=b+(v<<12&4294967295|v>>>20),v=I+(E^R&(b^E))+C[10]+4294925233&4294967295,I=R+(v<<17&4294967295|v>>>15),v=E+(b^I&(R^b))+C[11]+2304563134&4294967295,E=I+(v<<22&4294967295|v>>>10),v=b+(R^E&(I^R))+C[12]+1804603682&4294967295,b=E+(v<<7&4294967295|v>>>25),v=R+(I^b&(E^I))+C[13]+4254626195&4294967295,R=b+(v<<12&4294967295|v>>>20),v=I+(E^R&(b^E))+C[14]+2792965006&4294967295,I=R+(v<<17&4294967295|v>>>15),v=E+(b^I&(R^b))+C[15]+1236535329&4294967295,E=I+(v<<22&4294967295|v>>>10),v=b+(I^R&(E^I))+C[1]+4129170786&4294967295,b=E+(v<<5&4294967295|v>>>27),v=R+(E^I&(b^E))+C[6]+3225465664&4294967295,R=b+(v<<9&4294967295|v>>>23),v=I+(b^E&(R^b))+C[11]+643717713&4294967295,I=R+(v<<14&4294967295|v>>>18),v=E+(R^b&(I^R))+C[0]+3921069994&4294967295,E=I+(v<<20&4294967295|v>>>12),v=b+(I^R&(E^I))+C[5]+3593408605&4294967295,b=E+(v<<5&4294967295|v>>>27),v=R+(E^I&(b^E))+C[10]+38016083&4294967295,R=b+(v<<9&4294967295|v>>>23),v=I+(b^E&(R^b))+C[15]+3634488961&4294967295,I=R+(v<<14&4294967295|v>>>18),v=E+(R^b&(I^R))+C[4]+3889429448&4294967295,E=I+(v<<20&4294967295|v>>>12),v=b+(I^R&(E^I))+C[9]+568446438&4294967295,b=E+(v<<5&4294967295|v>>>27),v=R+(E^I&(b^E))+C[14]+3275163606&4294967295,R=b+(v<<9&4294967295|v>>>23),v=I+(b^E&(R^b))+C[3]+4107603335&4294967295,I=R+(v<<14&4294967295|v>>>18),v=E+(R^b&(I^R))+C[8]+1163531501&4294967295,E=I+(v<<20&4294967295|v>>>12),v=b+(I^R&(E^I))+C[13]+2850285829&4294967295,b=E+(v<<5&4294967295|v>>>27),v=R+(E^I&(b^E))+C[2]+4243563512&4294967295,R=b+(v<<9&4294967295|v>>>23),v=I+(b^E&(R^b))+C[7]+1735328473&4294967295,I=R+(v<<14&4294967295|v>>>18),v=E+(R^b&(I^R))+C[12]+2368359562&4294967295,E=I+(v<<20&4294967295|v>>>12),v=b+(E^I^R)+C[5]+4294588738&4294967295,b=E+(v<<4&4294967295|v>>>28),v=R+(b^E^I)+C[8]+2272392833&4294967295,R=b+(v<<11&4294967295|v>>>21),v=I+(R^b^E)+C[11]+1839030562&4294967295,I=R+(v<<16&4294967295|v>>>16),v=E+(I^R^b)+C[14]+4259657740&4294967295,E=I+(v<<23&4294967295|v>>>9),v=b+(E^I^R)+C[1]+2763975236&4294967295,b=E+(v<<4&4294967295|v>>>28),v=R+(b^E^I)+C[4]+1272893353&4294967295,R=b+(v<<11&4294967295|v>>>21),v=I+(R^b^E)+C[7]+4139469664&4294967295,I=R+(v<<16&4294967295|v>>>16),v=E+(I^R^b)+C[10]+3200236656&4294967295,E=I+(v<<23&4294967295|v>>>9),v=b+(E^I^R)+C[13]+681279174&4294967295,b=E+(v<<4&4294967295|v>>>28),v=R+(b^E^I)+C[0]+3936430074&4294967295,R=b+(v<<11&4294967295|v>>>21),v=I+(R^b^E)+C[3]+3572445317&4294967295,I=R+(v<<16&4294967295|v>>>16),v=E+(I^R^b)+C[6]+76029189&4294967295,E=I+(v<<23&4294967295|v>>>9),v=b+(E^I^R)+C[9]+3654602809&4294967295,b=E+(v<<4&4294967295|v>>>28),v=R+(b^E^I)+C[12]+3873151461&4294967295,R=b+(v<<11&4294967295|v>>>21),v=I+(R^b^E)+C[15]+530742520&4294967295,I=R+(v<<16&4294967295|v>>>16),v=E+(I^R^b)+C[2]+3299628645&4294967295,E=I+(v<<23&4294967295|v>>>9),v=b+(I^(E|~R))+C[0]+4096336452&4294967295,b=E+(v<<6&4294967295|v>>>26),v=R+(E^(b|~I))+C[7]+1126891415&4294967295,R=b+(v<<10&4294967295|v>>>22),v=I+(b^(R|~E))+C[14]+2878612391&4294967295,I=R+(v<<15&4294967295|v>>>17),v=E+(R^(I|~b))+C[5]+4237533241&4294967295,E=I+(v<<21&4294967295|v>>>11),v=b+(I^(E|~R))+C[12]+1700485571&4294967295,b=E+(v<<6&4294967295|v>>>26),v=R+(E^(b|~I))+C[3]+2399980690&4294967295,R=b+(v<<10&4294967295|v>>>22),v=I+(b^(R|~E))+C[10]+4293915773&4294967295,I=R+(v<<15&4294967295|v>>>17),v=E+(R^(I|~b))+C[1]+2240044497&4294967295,E=I+(v<<21&4294967295|v>>>11),v=b+(I^(E|~R))+C[8]+1873313359&4294967295,b=E+(v<<6&4294967295|v>>>26),v=R+(E^(b|~I))+C[15]+4264355552&4294967295,R=b+(v<<10&4294967295|v>>>22),v=I+(b^(R|~E))+C[6]+2734768916&4294967295,I=R+(v<<15&4294967295|v>>>17),v=E+(R^(I|~b))+C[13]+1309151649&4294967295,E=I+(v<<21&4294967295|v>>>11),v=b+(I^(E|~R))+C[4]+4149444226&4294967295,b=E+(v<<6&4294967295|v>>>26),v=R+(E^(b|~I))+C[11]+3174756917&4294967295,R=b+(v<<10&4294967295|v>>>22),v=I+(b^(R|~E))+C[2]+718787259&4294967295,I=R+(v<<15&4294967295|v>>>17),v=E+(R^(I|~b))+C[9]+3951481745&4294967295,w.g[0]=w.g[0]+b&4294967295,w.g[1]=w.g[1]+(I+(v<<21&4294967295|v>>>11))&4294967295,w.g[2]=w.g[2]+I&4294967295,w.g[3]=w.g[3]+R&4294967295}i.prototype.u=function(w,b){b===void 0&&(b=w.length);for(var E=b-this.blockSize,C=this.B,I=this.h,R=0;R<b;){if(I==0)for(;R<=E;)r(this,w,R),R+=this.blockSize;if(typeof w=="string"){for(;R<b;)if(C[I++]=w.charCodeAt(R++),I==this.blockSize){r(this,C),I=0;break}}else for(;R<b;)if(C[I++]=w[R++],I==this.blockSize){r(this,C),I=0;break}}this.h=I,this.o+=b},i.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var b=1;b<w.length-8;++b)w[b]=0;var E=8*this.o;for(b=w.length-8;b<w.length;++b)w[b]=E&255,E/=256;for(this.u(w),w=Array(16),b=E=0;4>b;++b)for(var C=0;32>C;C+=8)w[E++]=this.g[b]>>>C&255;return w};function s(w,b){var E=l;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=b(w)}function a(w,b){this.h=b;for(var E=[],C=!0,I=w.length-1;0<=I;I--){var R=w[I]|0;C&&R==b||(E[I]=R,C=!1)}this.g=E}var l={};function c(w){return-128<=w&&128>w?s(w,function(b){return new a([b|0],0>b?-1:0)}):new a([w|0],0>w?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return m;if(0>w)return j(d(-w));for(var b=[],E=1,C=0;w>=E;C++)b[C]=w/E|0,E*=4294967296;return new a(b,0)}function p(w,b){if(w.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(w.charAt(0)=="-")return j(p(w.substring(1),b));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=d(Math.pow(b,8)),C=m,I=0;I<w.length;I+=8){var R=Math.min(8,w.length-I),v=parseInt(w.substring(I,I+R),b);8>R?(R=d(Math.pow(b,R)),C=C.j(R).add(d(v))):(C=C.j(E),C=C.add(d(v)))}return C}var m=c(0),f=c(1),y=c(16777216);t=a.prototype,t.m=function(){if(D(this))return-j(this).m();for(var w=0,b=1,E=0;E<this.g.length;E++){var C=this.i(E);w+=(0<=C?C:4294967296+C)*b,b*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(S(this))return"0";if(D(this))return"-"+j(this).toString(w);for(var b=d(Math.pow(w,6)),E=this,C="";;){var I=M(E,b).g;E=T(E,I.j(b));var R=((0<E.g.length?E.g[0]:E.h)>>>0).toString(w);if(E=I,S(E))return R+C;for(;6>R.length;)R="0"+R;C=R+C}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function S(w){if(w.h!=0)return!1;for(var b=0;b<w.g.length;b++)if(w.g[b]!=0)return!1;return!0}function D(w){return w.h==-1}t.l=function(w){return w=T(this,w),D(w)?-1:S(w)?0:1};function j(w){for(var b=w.g.length,E=[],C=0;C<b;C++)E[C]=~w.g[C];return new a(E,~w.h).add(f)}t.abs=function(){return D(this)?j(this):this},t.add=function(w){for(var b=Math.max(this.g.length,w.g.length),E=[],C=0,I=0;I<=b;I++){var R=C+(this.i(I)&65535)+(w.i(I)&65535),v=(R>>>16)+(this.i(I)>>>16)+(w.i(I)>>>16);C=v>>>16,R&=65535,v&=65535,E[I]=v<<16|R}return new a(E,E[E.length-1]&-2147483648?-1:0)};function T(w,b){return w.add(j(b))}t.j=function(w){if(S(this)||S(w))return m;if(D(this))return D(w)?j(this).j(j(w)):j(j(this).j(w));if(D(w))return j(this.j(j(w)));if(0>this.l(y)&&0>w.l(y))return d(this.m()*w.m());for(var b=this.g.length+w.g.length,E=[],C=0;C<2*b;C++)E[C]=0;for(C=0;C<this.g.length;C++)for(var I=0;I<w.g.length;I++){var R=this.i(C)>>>16,v=this.i(C)&65535,Z=w.i(I)>>>16,se=w.i(I)&65535;E[2*C+2*I]+=v*se,x(E,2*C+2*I),E[2*C+2*I+1]+=R*se,x(E,2*C+2*I+1),E[2*C+2*I+1]+=v*Z,x(E,2*C+2*I+1),E[2*C+2*I+2]+=R*Z,x(E,2*C+2*I+2)}for(C=0;C<b;C++)E[C]=E[2*C+1]<<16|E[2*C];for(C=b;C<2*b;C++)E[C]=0;return new a(E,0)};function x(w,b){for(;(w[b]&65535)!=w[b];)w[b+1]+=w[b]>>>16,w[b]&=65535,b++}function A(w,b){this.g=w,this.h=b}function M(w,b){if(S(b))throw Error("division by zero");if(S(w))return new A(m,m);if(D(w))return b=M(j(w),b),new A(j(b.g),j(b.h));if(D(b))return b=M(w,j(b)),new A(j(b.g),b.h);if(30<w.g.length){if(D(w)||D(b))throw Error("slowDivide_ only works with positive integers.");for(var E=f,C=b;0>=C.l(w);)E=$(E),C=$(C);var I=Q(E,1),R=Q(C,1);for(C=Q(C,2),E=Q(E,2);!S(C);){var v=R.add(C);0>=v.l(w)&&(I=I.add(E),R=v),C=Q(C,1),E=Q(E,1)}return b=T(w,I.j(b)),new A(I,b)}for(I=m;0<=w.l(b);){for(E=Math.max(1,Math.floor(w.m()/b.m())),C=Math.ceil(Math.log(E)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),R=d(E),v=R.j(b);D(v)||0<v.l(w);)E-=C,R=d(E),v=R.j(b);S(R)&&(R=f),I=I.add(R),w=T(w,v)}return new A(I,w)}t.A=function(w){return M(this,w).h},t.and=function(w){for(var b=Math.max(this.g.length,w.g.length),E=[],C=0;C<b;C++)E[C]=this.i(C)&w.i(C);return new a(E,this.h&w.h)},t.or=function(w){for(var b=Math.max(this.g.length,w.g.length),E=[],C=0;C<b;C++)E[C]=this.i(C)|w.i(C);return new a(E,this.h|w.h)},t.xor=function(w){for(var b=Math.max(this.g.length,w.g.length),E=[],C=0;C<b;C++)E[C]=this.i(C)^w.i(C);return new a(E,this.h^w.h)};function $(w){for(var b=w.g.length+1,E=[],C=0;C<b;C++)E[C]=w.i(C)<<1|w.i(C-1)>>>31;return new a(E,w.h)}function Q(w,b){var E=b>>5;b%=32;for(var C=w.g.length-E,I=[],R=0;R<C;R++)I[R]=0<b?w.i(R+E)>>>b|w.i(R+E+1)<<32-b:w.i(R+E);return new a(I,w.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,fE=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,Dr=a}).apply(typeof n_<"u"?n_:typeof self<"u"?self:typeof window<"u"?window:{});var Nc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pE,Mo,gE,su,wp,mE,yE,vE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,h,g){return o==Array.prototype||o==Object.prototype||(o[h]=g.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nc=="object"&&Nc];for(var h=0;h<o.length;++h){var g=o[h];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function r(o,h){if(h)e:{var g=i;o=o.split(".");for(var _=0;_<o.length-1;_++){var V=o[_];if(!(V in g))break e;g=g[V]}o=o[o.length-1],_=g[o],h=h(_),h!=_&&h!=null&&e(g,o,{configurable:!0,writable:!0,value:h})}}function s(o,h){o instanceof String&&(o+="");var g=0,_=!1,V={next:function(){if(!_&&g<o.length){var z=g++;return{value:h(z,o[z]),done:!1}}return _=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}r("Array.prototype.values",function(o){return o||function(){return s(this,function(h,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(o){var h=typeof o;return h=h!="object"?h:o?Array.isArray(o)?"array":h:"null",h=="array"||h=="object"&&typeof o.length=="number"}function d(o){var h=typeof o;return h=="object"&&o!=null||h=="function"}function p(o,h,g){return o.call.apply(o.bind,arguments)}function m(o,h,g){if(!o)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,_),o.apply(h,V)}}return function(){return o.apply(h,arguments)}}function f(o,h,g){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,f.apply(null,arguments)}function y(o,h){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),o.apply(this,_)}}function S(o,h){function g(){}g.prototype=h.prototype,o.aa=h.prototype,o.prototype=new g,o.prototype.constructor=o,o.Qb=function(_,V,z){for(var X=Array(arguments.length-2),We=2;We<arguments.length;We++)X[We-2]=arguments[We];return h.prototype[V].apply(_,X)}}function D(o){const h=o.length;if(0<h){const g=Array(h);for(let _=0;_<h;_++)g[_]=o[_];return g}return[]}function j(o,h){for(let g=1;g<arguments.length;g++){const _=arguments[g];if(c(_)){const V=o.length||0,z=_.length||0;o.length=V+z;for(let X=0;X<z;X++)o[V+X]=_[X]}else o.push(_)}}class T{constructor(h,g){this.i=h,this.j=g,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function x(o){return/^[\s\xa0]*$/.test(o)}function A(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function M(o){return M[" "](o),o}M[" "]=function(){};var $=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function Q(o,h,g){for(const _ in o)h.call(g,o[_],_,o)}function w(o,h){for(const g in o)h.call(void 0,o[g],g,o)}function b(o){const h={};for(const g in o)h[g]=o[g];return h}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(o,h){let g,_;for(let V=1;V<arguments.length;V++){_=arguments[V];for(g in _)o[g]=_[g];for(let z=0;z<E.length;z++)g=E[z],Object.prototype.hasOwnProperty.call(_,g)&&(o[g]=_[g])}}function I(o){var h=1;o=o.split(":");const g=[];for(;0<h&&o.length;)g.push(o.shift()),h--;return o.length&&g.push(o.join(":")),g}function R(o){l.setTimeout(()=>{throw o},0)}function v(){var o=de;let h=null;return o.g&&(h=o.g,o.g=o.g.next,o.g||(o.h=null),h.next=null),h}class Z{constructor(){this.h=this.g=null}add(h,g){const _=se.get();_.set(h,g),this.h?this.h.next=_:this.g=_,this.h=_}}var se=new T(()=>new F,o=>o.reset());class F{constructor(){this.next=this.g=this.h=null}set(h,g){this.h=h,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let re,W=!1,de=new Z,Ae=()=>{const o=l.Promise.resolve(void 0);re=()=>{o.then(at)}};var at=()=>{for(var o;o=v();){try{o.h.call(o.g)}catch(g){R(g)}var h=se;h.j(o),100>h.h&&(h.h++,o.next=h.g,h.g=o)}W=!1};function O(){this.s=this.s,this.C=this.C}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(o,h){this.type=o,this.g=this.target=h,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var dt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,h=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const g=()=>{};l.addEventListener("test",g,h),l.removeEventListener("test",g,h)}catch{}return o}();function ht(o,h){if(ye.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var g=this.type=o.type,_=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=h,h=o.relatedTarget){if($){e:{try{M(h.nodeName);var V=!0;break e}catch{}V=!1}V||(h=null)}}else g=="mouseover"?h=o.fromElement:g=="mouseout"&&(h=o.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:qn[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&ht.aa.h.call(this)}}S(ht,ye);var qn={2:"touch",3:"pen",4:"mouse"};ht.prototype.h=function(){ht.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Hn="closure_listenable_"+(1e6*Math.random()|0),U=0;function te(o,h,g,_,V){this.listener=o,this.proxy=null,this.src=h,this.type=g,this.capture=!!_,this.ha=V,this.key=++U,this.da=this.fa=!1}function L(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function J(o){this.src=o,this.g={},this.h=0}J.prototype.add=function(o,h,g,_,V){var z=o.toString();o=this.g[z],o||(o=this.g[z]=[],this.h++);var X=le(o,h,_,V);return-1<X?(h=o[X],g||(h.fa=!1)):(h=new te(h,this.src,z,!!_,V),h.fa=g,o.push(h)),h};function fe(o,h){var g=h.type;if(g in o.g){var _=o.g[g],V=Array.prototype.indexOf.call(_,h,void 0),z;(z=0<=V)&&Array.prototype.splice.call(_,V,1),z&&(L(h),o.g[g].length==0&&(delete o.g[g],o.h--))}}function le(o,h,g,_){for(var V=0;V<o.length;++V){var z=o[V];if(!z.da&&z.listener==h&&z.capture==!!g&&z.ha==_)return V}return-1}var ae="closure_lm_"+(1e6*Math.random()|0),ot={};function $e(o,h,g,_,V){if(Array.isArray(h)){for(var z=0;z<h.length;z++)$e(o,h[z],g,_,V);return null}return g=xe(g),o&&o[Hn]?o.K(h,g,d(_)?!!_.capture:!1,V):bt(o,h,g,!1,_,V)}function bt(o,h,g,_,V,z){if(!h)throw Error("Invalid event type");var X=d(V)?!!V.capture:!!V,We=ve(o);if(We||(o[ae]=We=new J(o)),g=We.add(h,g,_,X,z),g.proxy)return g;if(_=Fn(),g.proxy=_,_.src=o,_.listener=g,o.addEventListener)dt||(V=X),V===void 0&&(V=!1),o.addEventListener(h.toString(),_,V);else if(o.attachEvent)o.attachEvent(K(h.toString()),_);else if(o.addListener&&o.removeListener)o.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Fn(){function o(g){return h.call(o.src,o.listener,g)}const h=Ee;return o}function P(o,h,g,_,V){if(Array.isArray(h))for(var z=0;z<h.length;z++)P(o,h[z],g,_,V);else _=d(_)?!!_.capture:!!_,g=xe(g),o&&o[Hn]?(o=o.i,h=String(h).toString(),h in o.g&&(z=o.g[h],g=le(z,g,_,V),-1<g&&(L(z[g]),Array.prototype.splice.call(z,g,1),z.length==0&&(delete o.g[h],o.h--)))):o&&(o=ve(o))&&(h=o.g[h.toString()],o=-1,h&&(o=le(h,g,_,V)),(g=-1<o?h[o]:null)&&B(g))}function B(o){if(typeof o!="number"&&o&&!o.da){var h=o.src;if(h&&h[Hn])fe(h.i,o);else{var g=o.type,_=o.proxy;h.removeEventListener?h.removeEventListener(g,_,o.capture):h.detachEvent?h.detachEvent(K(g),_):h.addListener&&h.removeListener&&h.removeListener(_),(g=ve(h))?(fe(g,o),g.h==0&&(g.src=null,h[ae]=null)):L(o)}}}function K(o){return o in ot?ot[o]:ot[o]="on"+o}function Ee(o,h){if(o.da)o=!0;else{h=new ht(h,this);var g=o.listener,_=o.ha||o.src;o.fa&&B(o),o=g.call(_,h)}return o}function ve(o){return o=o[ae],o instanceof J?o:null}var ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function xe(o){return typeof o=="function"?o:(o[ue]||(o[ue]=function(h){return o.handleEvent(h)}),o[ue])}function ge(){O.call(this),this.i=new J(this),this.M=this,this.F=null}S(ge,O),ge.prototype[Hn]=!0,ge.prototype.removeEventListener=function(o,h,g,_){P(this,o,h,g,_)};function Se(o,h){var g,_=o.F;if(_)for(g=[];_;_=_.F)g.push(_);if(o=o.M,_=h.type||h,typeof h=="string")h=new ye(h,o);else if(h instanceof ye)h.target=h.target||o;else{var V=h;h=new ye(_,o),C(h,V)}if(V=!0,g)for(var z=g.length-1;0<=z;z--){var X=h.g=g[z];V=Ke(X,_,!0,h)&&V}if(X=h.g=o,V=Ke(X,_,!0,h)&&V,V=Ke(X,_,!1,h)&&V,g)for(z=0;z<g.length;z++)X=h.g=g[z],V=Ke(X,_,!1,h)&&V}ge.prototype.N=function(){if(ge.aa.N.call(this),this.i){var o=this.i,h;for(h in o.g){for(var g=o.g[h],_=0;_<g.length;_++)L(g[_]);delete o.g[h],o.h--}}this.F=null},ge.prototype.K=function(o,h,g,_){return this.i.add(String(o),h,!1,g,_)},ge.prototype.L=function(o,h,g,_){return this.i.add(String(o),h,!0,g,_)};function Ke(o,h,g,_){if(h=o.i.g[String(h)],!h)return!0;h=h.concat();for(var V=!0,z=0;z<h.length;++z){var X=h[z];if(X&&!X.da&&X.capture==g){var We=X.listener,Lt=X.ha||X.src;X.fa&&fe(o.i,X),V=We.call(Lt,_)!==!1&&V}}return V&&!_.defaultPrevented}function sn(o,h,g){if(typeof o=="function")g&&(o=f(o,g));else if(o&&typeof o.handleEvent=="function")o=f(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(o,h||0)}function ii(o){o.g=sn(()=>{o.g=null,o.i&&(o.i=!1,ii(o))},o.l);const h=o.h;o.h=null,o.m.apply(null,h)}class ew extends O{constructor(h,g){super(),this.m=h,this.l=g,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:ii(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function so(o){O.call(this),this.h=o,this.g={}}S(so,O);var Xm=[];function Jm(o){Q(o.g,function(h,g){this.g.hasOwnProperty(g)&&B(h)},o),o.g={}}so.prototype.N=function(){so.aa.N.call(this),Jm(this)},so.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rh=l.JSON.stringify,tw=l.JSON.parse,nw=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function sh(){}sh.prototype.h=null;function Zm(o){return o.h||(o.h=o.i())}function ey(){}var ao={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ah(){ye.call(this,"d")}S(ah,ye);function oh(){ye.call(this,"c")}S(oh,ye);var Jr={},ty=null;function ic(){return ty=ty||new ge}Jr.La="serverreachability";function ny(o){ye.call(this,Jr.La,o)}S(ny,ye);function oo(o){const h=ic();Se(h,new ny(h))}Jr.STAT_EVENT="statevent";function iy(o,h){ye.call(this,Jr.STAT_EVENT,o),this.stat=h}S(iy,ye);function en(o){const h=ic();Se(h,new iy(h,o))}Jr.Ma="timingevent";function ry(o,h){ye.call(this,Jr.Ma,o),this.size=h}S(ry,ye);function lo(o,h){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},h)}function co(){this.g=!0}co.prototype.xa=function(){this.g=!1};function iw(o,h,g,_,V,z){o.info(function(){if(o.g)if(z)for(var X="",We=z.split("&"),Lt=0;Lt<We.length;Lt++){var Ue=We[Lt].split("=");if(1<Ue.length){var Yt=Ue[0];Ue=Ue[1];var Qt=Yt.split("_");X=2<=Qt.length&&Qt[1]=="type"?X+(Yt+"="+Ue+"&"):X+(Yt+"=redacted&")}}else X=null;else X=z;return"XMLHTTP REQ ("+_+") [attempt "+V+"]: "+h+`
`+g+`
`+X})}function rw(o,h,g,_,V,z,X){o.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+V+"]: "+h+`
`+g+`
`+z+" "+X})}function Ls(o,h,g,_){o.info(function(){return"XMLHTTP TEXT ("+h+"): "+aw(o,g)+(_?" "+_:"")})}function sw(o,h){o.info(function(){return"TIMEOUT: "+h})}co.prototype.info=function(){};function aw(o,h){if(!o.g)return h;if(!h)return null;try{var g=JSON.parse(h);if(g){for(o=0;o<g.length;o++)if(Array.isArray(g[o])){var _=g[o];if(!(2>_.length)){var V=_[1];if(Array.isArray(V)&&!(1>V.length)){var z=V[0];if(z!="noop"&&z!="stop"&&z!="close")for(var X=1;X<V.length;X++)V[X]=""}}}}return rh(g)}catch{return h}}var rc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},lh;function sc(){}S(sc,sh),sc.prototype.g=function(){return new XMLHttpRequest},sc.prototype.i=function(){return{}},lh=new sc;function Wi(o,h,g,_){this.j=o,this.i=h,this.l=g,this.R=_||1,this.U=new so(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ay}function ay(){this.i=null,this.g="",this.h=!1}var oy={},ch={};function uh(o,h,g){o.L=1,o.v=cc(vi(h)),o.m=g,o.P=!0,ly(o,null)}function ly(o,h){o.F=Date.now(),ac(o),o.A=vi(o.v);var g=o.A,_=o.R;Array.isArray(_)||(_=[String(_)]),Ty(g.i,"t",_),o.C=0,g=o.j.J,o.h=new ay,o.g=zy(o.j,g?h:null,!o.m),0<o.O&&(o.M=new ew(f(o.Y,o,o.g),o.O)),h=o.U,g=o.g,_=o.ca;var V="readystatechange";Array.isArray(V)||(V&&(Xm[0]=V.toString()),V=Xm);for(var z=0;z<V.length;z++){var X=$e(g,V[z],_||h.handleEvent,!1,h.h||h);if(!X)break;h.g[X.key]=X}h=o.H?b(o.H):{},o.m?(o.u||(o.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,h)):(o.u="GET",o.g.ea(o.A,o.u,null,h)),oo(),iw(o.i,o.u,o.A,o.l,o.R,o.m)}Wi.prototype.ca=function(o){o=o.target;const h=this.M;h&&_i(o)==3?h.j():this.Y(o)},Wi.prototype.Y=function(o){try{if(o==this.g)e:{const Qt=_i(this.g);var h=this.g.Ba();const Bs=this.g.Z();if(!(3>Qt)&&(Qt!=3||this.g&&(this.h.h||this.g.oa()||Ry(this.g)))){this.J||Qt!=4||h==7||(h==8||0>=Bs?oo(3):oo(2)),dh(this);var g=this.g.Z();this.X=g;t:if(cy(this)){var _=Ry(this.g);o="";var V=_.length,z=_i(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zr(this),uo(this);var X="";break t}this.h.i=new l.TextDecoder}for(h=0;h<V;h++)this.h.h=!0,o+=this.h.i.decode(_[h],{stream:!(z&&h==V-1)});_.length=0,this.h.g+=o,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=g==200,rw(this.i,this.u,this.A,this.l,this.R,Qt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var We,Lt=this.g;if((We=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(We)){var Ue=We;break t}}Ue=null}if(g=Ue)Ls(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hh(this,g);else{this.o=!1,this.s=3,en(12),Zr(this),uo(this);break e}}if(this.P){g=!0;let Gn;for(;!this.J&&this.C<X.length;)if(Gn=ow(this,X),Gn==ch){Qt==4&&(this.s=4,en(14),g=!1),Ls(this.i,this.l,null,"[Incomplete Response]");break}else if(Gn==oy){this.s=4,en(15),Ls(this.i,this.l,X,"[Invalid Chunk]"),g=!1;break}else Ls(this.i,this.l,Gn,null),hh(this,Gn);if(cy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||X.length!=0||this.h.h||(this.s=1,en(16),g=!1),this.o=this.o&&g,!g)Ls(this.i,this.l,X,"[Invalid Chunked Response]"),Zr(this),uo(this);else if(0<X.length&&!this.W){this.W=!0;var Yt=this.j;Yt.g==this&&Yt.ba&&!Yt.M&&(Yt.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),vh(Yt),Yt.M=!0,en(11))}}else Ls(this.i,this.l,X,null),hh(this,X);Qt==4&&Zr(this),this.o&&!this.J&&(Qt==4?Vy(this.j,this):(this.o=!1,ac(this)))}else Sw(this.g),g==400&&0<X.indexOf("Unknown SID")?(this.s=3,en(12)):(this.s=0,en(13)),Zr(this),uo(this)}}}catch{}finally{}};function cy(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function ow(o,h){var g=o.C,_=h.indexOf(`
`,g);return _==-1?ch:(g=Number(h.substring(g,_)),isNaN(g)?oy:(_+=1,_+g>h.length?ch:(h=h.slice(_,_+g),o.C=_+g,h)))}Wi.prototype.cancel=function(){this.J=!0,Zr(this)};function ac(o){o.S=Date.now()+o.I,uy(o,o.I)}function uy(o,h){if(o.B!=null)throw Error("WatchDog timer not null");o.B=lo(f(o.ba,o),h)}function dh(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Wi.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(sw(this.i,this.A),this.L!=2&&(oo(),en(17)),Zr(this),this.s=2,uo(this)):uy(this,this.S-o)};function uo(o){o.j.G==0||o.J||Vy(o.j,o)}function Zr(o){dh(o);var h=o.M;h&&typeof h.ma=="function"&&h.ma(),o.M=null,Jm(o.U),o.g&&(h=o.g,o.g=null,h.abort(),h.ma())}function hh(o,h){try{var g=o.j;if(g.G!=0&&(g.g==o||fh(g.h,o))){if(!o.K&&fh(g.h,o)&&g.G==3){try{var _=g.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var V=_;if(V[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<o.F)gc(g),fc(g);else break e;yh(g),en(18)}}else g.za=V[1],0<g.za-g.T&&37500>V[2]&&g.F&&g.v==0&&!g.C&&(g.C=lo(f(g.Za,g),6e3));if(1>=fy(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ts(g,11)}else if((o.K||g.g==o)&&gc(g),!x(h))for(V=g.Da.g.parse(h),h=0;h<V.length;h++){let Ue=V[h];if(g.T=Ue[0],Ue=Ue[1],g.G==2)if(Ue[0]=="c"){g.K=Ue[1],g.ia=Ue[2];const Yt=Ue[3];Yt!=null&&(g.la=Yt,g.j.info("VER="+g.la));const Qt=Ue[4];Qt!=null&&(g.Aa=Qt,g.j.info("SVER="+g.Aa));const Bs=Ue[5];Bs!=null&&typeof Bs=="number"&&0<Bs&&(_=1.5*Bs,g.L=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const Gn=o.g;if(Gn){const yc=Gn.g?Gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yc){var z=_.h;z.g||yc.indexOf("spdy")==-1&&yc.indexOf("quic")==-1&&yc.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(ph(z,z.h),z.h=null))}if(_.D){const _h=Gn.g?Gn.g.getResponseHeader("X-HTTP-Session-Id"):null;_h&&(_.ya=_h,et(_.I,_.D,_h))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-o.F,g.j.info("Handshake RTT: "+g.R+"ms")),_=g;var X=o;if(_.qa=Uy(_,_.J?_.ia:null,_.W),X.K){py(_.h,X);var We=X,Lt=_.L;Lt&&(We.I=Lt),We.B&&(dh(We),ac(We)),_.g=X}else ky(_);0<g.i.length&&pc(g)}else Ue[0]!="stop"&&Ue[0]!="close"||ts(g,7);else g.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?ts(g,7):mh(g):Ue[0]!="noop"&&g.l&&g.l.ta(Ue),g.v=0)}}oo(4)}catch{}}var lw=class{constructor(o,h){this.g=o,this.map=h}};function dy(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hy(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function fy(o){return o.h?1:o.g?o.g.size:0}function fh(o,h){return o.h?o.h==h:o.g?o.g.has(h):!1}function ph(o,h){o.g?o.g.add(h):o.h=h}function py(o,h){o.h&&o.h==h?o.h=null:o.g&&o.g.has(h)&&o.g.delete(h)}dy.prototype.cancel=function(){if(this.i=gy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function gy(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let h=o.i;for(const g of o.g.values())h=h.concat(g.D);return h}return D(o.i)}function cw(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var h=[],g=o.length,_=0;_<g;_++)h.push(o[_]);return h}h=[],g=0;for(_ in o)h[g++]=o[_];return h}function uw(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(c(o)||typeof o=="string"){var h=[];o=o.length;for(var g=0;g<o;g++)h.push(g);return h}h=[],g=0;for(const _ in o)h[g++]=_;return h}}}function my(o,h){if(o.forEach&&typeof o.forEach=="function")o.forEach(h,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,h,void 0);else for(var g=uw(o),_=cw(o),V=_.length,z=0;z<V;z++)h.call(void 0,_[z],g&&g[z],o)}var yy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dw(o,h){if(o){o=o.split("&");for(var g=0;g<o.length;g++){var _=o[g].indexOf("="),V=null;if(0<=_){var z=o[g].substring(0,_);V=o[g].substring(_+1)}else z=o[g];h(z,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function es(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof es){this.h=o.h,oc(this,o.j),this.o=o.o,this.g=o.g,lc(this,o.s),this.l=o.l;var h=o.i,g=new po;g.i=h.i,h.g&&(g.g=new Map(h.g),g.h=h.h),vy(this,g),this.m=o.m}else o&&(h=String(o).match(yy))?(this.h=!1,oc(this,h[1]||"",!0),this.o=ho(h[2]||""),this.g=ho(h[3]||"",!0),lc(this,h[4]),this.l=ho(h[5]||"",!0),vy(this,h[6]||"",!0),this.m=ho(h[7]||"")):(this.h=!1,this.i=new po(null,this.h))}es.prototype.toString=function(){var o=[],h=this.j;h&&o.push(fo(h,_y,!0),":");var g=this.g;return(g||h=="file")&&(o.push("//"),(h=this.o)&&o.push(fo(h,_y,!0),"@"),o.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&o.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&o.push("/"),o.push(fo(g,g.charAt(0)=="/"?pw:fw,!0))),(g=this.i.toString())&&o.push("?",g),(g=this.m)&&o.push("#",fo(g,mw)),o.join("")};function vi(o){return new es(o)}function oc(o,h,g){o.j=g?ho(h,!0):h,o.j&&(o.j=o.j.replace(/:$/,""))}function lc(o,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);o.s=h}else o.s=null}function vy(o,h,g){h instanceof po?(o.i=h,yw(o.i,o.h)):(g||(h=fo(h,gw)),o.i=new po(h,o.h))}function et(o,h,g){o.i.set(h,g)}function cc(o){return et(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function ho(o,h){return o?h?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function fo(o,h,g){return typeof o=="string"?(o=encodeURI(o).replace(h,hw),g&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function hw(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var _y=/[#\/\?@]/g,fw=/[#\?:]/g,pw=/[#\?]/g,gw=/[#\?@]/g,mw=/#/g;function po(o,h){this.h=this.g=null,this.i=o||null,this.j=!!h}function Xi(o){o.g||(o.g=new Map,o.h=0,o.i&&dw(o.i,function(h,g){o.add(decodeURIComponent(h.replace(/\+/g," ")),g)}))}t=po.prototype,t.add=function(o,h){Xi(this),this.i=null,o=Us(this,o);var g=this.g.get(o);return g||this.g.set(o,g=[]),g.push(h),this.h+=1,this};function by(o,h){Xi(o),h=Us(o,h),o.g.has(h)&&(o.i=null,o.h-=o.g.get(h).length,o.g.delete(h))}function xy(o,h){return Xi(o),h=Us(o,h),o.g.has(h)}t.forEach=function(o,h){Xi(this),this.g.forEach(function(g,_){g.forEach(function(V){o.call(h,V,_,this)},this)},this)},t.na=function(){Xi(this);const o=Array.from(this.g.values()),h=Array.from(this.g.keys()),g=[];for(let _=0;_<h.length;_++){const V=o[_];for(let z=0;z<V.length;z++)g.push(h[_])}return g},t.V=function(o){Xi(this);let h=[];if(typeof o=="string")xy(this,o)&&(h=h.concat(this.g.get(Us(this,o))));else{o=Array.from(this.g.values());for(let g=0;g<o.length;g++)h=h.concat(o[g])}return h},t.set=function(o,h){return Xi(this),this.i=null,o=Us(this,o),xy(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[h]),this.h+=1,this},t.get=function(o,h){return o?(o=this.V(o),0<o.length?String(o[0]):h):h};function Ty(o,h,g){by(o,h),0<g.length&&(o.i=null,o.g.set(Us(o,h),D(g)),o.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],h=Array.from(this.g.keys());for(var g=0;g<h.length;g++){var _=h[g];const z=encodeURIComponent(String(_)),X=this.V(_);for(_=0;_<X.length;_++){var V=z;X[_]!==""&&(V+="="+encodeURIComponent(String(X[_]))),o.push(V)}}return this.i=o.join("&")};function Us(o,h){return h=String(h),o.j&&(h=h.toLowerCase()),h}function yw(o,h){h&&!o.j&&(Xi(o),o.i=null,o.g.forEach(function(g,_){var V=_.toLowerCase();_!=V&&(by(this,_),Ty(this,V,g))},o)),o.j=h}function vw(o,h){const g=new co;if(l.Image){const _=new Image;_.onload=y(Ji,g,"TestLoadImage: loaded",!0,h,_),_.onerror=y(Ji,g,"TestLoadImage: error",!1,h,_),_.onabort=y(Ji,g,"TestLoadImage: abort",!1,h,_),_.ontimeout=y(Ji,g,"TestLoadImage: timeout",!1,h,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=o}else h(!1)}function _w(o,h){const g=new co,_=new AbortController,V=setTimeout(()=>{_.abort(),Ji(g,"TestPingServer: timeout",!1,h)},1e4);fetch(o,{signal:_.signal}).then(z=>{clearTimeout(V),z.ok?Ji(g,"TestPingServer: ok",!0,h):Ji(g,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(V),Ji(g,"TestPingServer: error",!1,h)})}function Ji(o,h,g,_,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),_(g)}catch{}}function bw(){this.g=new nw}function xw(o,h,g){const _=g||"";try{my(o,function(V,z){let X=V;d(V)&&(X=rh(V)),h.push(_+z+"="+encodeURIComponent(X))})}catch(V){throw h.push(_+"type="+encodeURIComponent("_badmap")),V}}function uc(o){this.l=o.Ub||null,this.j=o.eb||!1}S(uc,sh),uc.prototype.g=function(){return new dc(this.l,this.j)},uc.prototype.i=function(o){return function(){return o}}({});function dc(o,h){ge.call(this),this.D=o,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(dc,ge),t=dc.prototype,t.open=function(o,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=h,this.readyState=1,mo(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(h.body=o),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,go(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,mo(this)),this.g&&(this.readyState=3,mo(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ey(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ey(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var h=o.value?o.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!o.done}))&&(this.response=this.responseText+=h)}o.done?go(this):mo(this),this.readyState==3&&Ey(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,go(this))},t.Qa=function(o){this.g&&(this.response=o,go(this))},t.ga=function(){this.g&&go(this)};function go(o){o.readyState=4,o.l=null,o.j=null,o.v=null,mo(o)}t.setRequestHeader=function(o,h){this.u.append(o,h)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],h=this.h.entries();for(var g=h.next();!g.done;)g=g.value,o.push(g[0]+": "+g[1]),g=h.next();return o.join(`\r
`)};function mo(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(dc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Sy(o){let h="";return Q(o,function(g,_){h+=_,h+=":",h+=g,h+=`\r
`}),h}function gh(o,h,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=Sy(g),typeof o=="string"?g!=null&&encodeURIComponent(String(g)):et(o,h,g))}function ft(o){ge.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(ft,ge);var Tw=/^https?$/i,Ew=["POST","PUT"];t=ft.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,h,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);h=h?h.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():lh.g(),this.v=this.o?Zm(this.o):Zm(lh),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(h,String(o),!0),this.B=!1}catch(z){wy(this,z);return}if(o=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var V in _)g.set(V,_[V]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const z of _.keys())g.set(z,_.get(z));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(z=>z.toLowerCase()=="content-type"),V=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Ew,h,void 0))||_||V||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,X]of g)this.g.setRequestHeader(z,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cy(this),this.u=!0,this.g.send(o),this.u=!1}catch(z){wy(this,z)}};function wy(o,h){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=h,o.m=5,Ay(o),hc(o)}function Ay(o){o.A||(o.A=!0,Se(o,"complete"),Se(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Se(this,"complete"),Se(this,"abort"),hc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hc(this,!0)),ft.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Iy(this):this.bb())},t.bb=function(){Iy(this)};function Iy(o){if(o.h&&typeof a<"u"&&(!o.v[1]||_i(o)!=4||o.Z()!=2)){if(o.u&&_i(o)==4)sn(o.Ea,0,o);else if(Se(o,"readystatechange"),_i(o)==4){o.h=!1;try{const X=o.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var g;if(!(g=h)){var _;if(_=X===0){var V=String(o.D).match(yy)[1]||null;!V&&l.self&&l.self.location&&(V=l.self.location.protocol.slice(0,-1)),_=!Tw.test(V?V.toLowerCase():"")}g=_}if(g)Se(o,"complete"),Se(o,"success");else{o.m=6;try{var z=2<_i(o)?o.g.statusText:""}catch{z=""}o.l=z+" ["+o.Z()+"]",Ay(o)}}finally{hc(o)}}}}function hc(o,h){if(o.g){Cy(o);const g=o.g,_=o.v[0]?()=>{}:null;o.g=null,o.v=null,h||Se(o,"ready");try{g.onreadystatechange=_}catch{}}}function Cy(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function _i(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<_i(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var h=this.g.responseText;return o&&h.indexOf(o)==0&&(h=h.substring(o.length)),tw(h)}};function Ry(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Sw(o){const h={};o=(o.g&&2<=_i(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<o.length;_++){if(x(o[_]))continue;var g=I(o[_]);const V=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const z=h[V]||[];h[V]=z,z.push(g)}w(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yo(o,h,g){return g&&g.internalChannelParams&&g.internalChannelParams[o]||h}function Dy(o){this.Aa=0,this.i=[],this.j=new co,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yo("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yo("baseRetryDelayMs",5e3,o),this.cb=yo("retryDelaySeedMs",1e4,o),this.Wa=yo("forwardChannelMaxRetries",2,o),this.wa=yo("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new dy(o&&o.concurrentRequestLimit),this.Da=new bw,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Dy.prototype,t.la=8,t.G=1,t.connect=function(o,h,g,_){en(0),this.W=o,this.H=h||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.I=Uy(this,null,this.W),pc(this)};function mh(o){if(My(o),o.G==3){var h=o.U++,g=vi(o.I);if(et(g,"SID",o.K),et(g,"RID",h),et(g,"TYPE","terminate"),vo(o,g),h=new Wi(o,o.j,h),h.L=2,h.v=cc(vi(g)),g=!1,l.navigator&&l.navigator.sendBeacon)try{g=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!g&&l.Image&&(new Image().src=h.v,g=!0),g||(h.g=zy(h.j,null),h.g.ea(h.v)),h.F=Date.now(),ac(h)}Ly(o)}function fc(o){o.g&&(vh(o),o.g.cancel(),o.g=null)}function My(o){fc(o),o.u&&(l.clearTimeout(o.u),o.u=null),gc(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function pc(o){if(!hy(o.h)&&!o.s){o.s=!0;var h=o.Ga;re||Ae(),W||(re(),W=!0),de.add(h,o),o.B=0}}function ww(o,h){return fy(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=h.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=lo(f(o.Ga,o,h),Py(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const V=new Wi(this,this.j,o);let z=this.o;if(this.S&&(z?(z=b(z),C(z,this.S)):z=this.S),this.m!==null||this.O||(V.H=z,z=null),this.P)e:{for(var h=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=g;break e}if(h===4096||g===this.i.length-1){h=g+1;break e}}h=1e3}else h=1e3;h=jy(this,V,h),g=vi(this.I),et(g,"RID",o),et(g,"CVER",22),this.D&&et(g,"X-HTTP-Session-Id",this.D),vo(this,g),z&&(this.O?h="headers="+encodeURIComponent(String(Sy(z)))+"&"+h:this.m&&gh(g,this.m,z)),ph(this.h,V),this.Ua&&et(g,"TYPE","init"),this.P?(et(g,"$req",h),et(g,"SID","null"),V.T=!0,uh(V,g,null)):uh(V,g,h),this.G=2}}else this.G==3&&(o?Oy(this,o):this.i.length==0||hy(this.h)||Oy(this))};function Oy(o,h){var g;h?g=h.l:g=o.U++;const _=vi(o.I);et(_,"SID",o.K),et(_,"RID",g),et(_,"AID",o.T),vo(o,_),o.m&&o.o&&gh(_,o.m,o.o),g=new Wi(o,o.j,g,o.B+1),o.m===null&&(g.H=o.o),h&&(o.i=h.D.concat(o.i)),h=jy(o,g,1e3),g.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),ph(o.h,g),uh(g,_,h)}function vo(o,h){o.H&&Q(o.H,function(g,_){et(h,_,g)}),o.l&&my({},function(g,_){et(h,_,g)})}function jy(o,h,g){g=Math.min(o.i.length,g);var _=o.l?f(o.l.Na,o.l,o):null;e:{var V=o.i;let z=-1;for(;;){const X=["count="+g];z==-1?0<g?(z=V[0].g,X.push("ofs="+z)):z=0:X.push("ofs="+z);let We=!0;for(let Lt=0;Lt<g;Lt++){let Ue=V[Lt].g;const Yt=V[Lt].map;if(Ue-=z,0>Ue)z=Math.max(0,V[Lt].g-100),We=!1;else try{xw(Yt,X,"req"+Ue+"_")}catch{_&&_(Yt)}}if(We){_=X.join("&");break e}}}return o=o.i.splice(0,g),h.D=o,_}function ky(o){if(!o.g&&!o.u){o.Y=1;var h=o.Fa;re||Ae(),W||(re(),W=!0),de.add(h,o),o.v=0}}function yh(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=lo(f(o.Fa,o),Py(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,Ny(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=lo(f(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,en(10),fc(this),Ny(this))};function vh(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Ny(o){o.g=new Wi(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var h=vi(o.qa);et(h,"RID","rpc"),et(h,"SID",o.K),et(h,"AID",o.T),et(h,"CI",o.F?"0":"1"),!o.F&&o.ja&&et(h,"TO",o.ja),et(h,"TYPE","xmlhttp"),vo(o,h),o.m&&o.o&&gh(h,o.m,o.o),o.L&&(o.g.I=o.L);var g=o.g;o=o.ia,g.L=1,g.v=cc(vi(h)),g.m=null,g.P=!0,ly(g,o)}t.Za=function(){this.C!=null&&(this.C=null,fc(this),yh(this),en(19))};function gc(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Vy(o,h){var g=null;if(o.g==h){gc(o),vh(o),o.g=null;var _=2}else if(fh(o.h,h))g=h.D,py(o.h,h),_=1;else return;if(o.G!=0){if(h.o)if(_==1){g=h.m?h.m.length:0,h=Date.now()-h.F;var V=o.B;_=ic(),Se(_,new ry(_,g)),pc(o)}else ky(o);else if(V=h.s,V==3||V==0&&0<h.X||!(_==1&&ww(o,h)||_==2&&yh(o)))switch(g&&0<g.length&&(h=o.h,h.i=h.i.concat(g)),V){case 1:ts(o,5);break;case 4:ts(o,10);break;case 3:ts(o,6);break;default:ts(o,2)}}}function Py(o,h){let g=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(g*=2),g*h}function ts(o,h){if(o.j.info("Error code "+h),h==2){var g=f(o.fb,o),_=o.Xa;const V=!_;_=new es(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||oc(_,"https"),cc(_),V?vw(_.toString(),g):_w(_.toString(),g)}else en(2);o.G=0,o.l&&o.l.sa(h),Ly(o),My(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),en(2)):(this.j.info("Failed to ping google.com"),en(1))};function Ly(o){if(o.G=0,o.ka=[],o.l){const h=gy(o.h);(h.length!=0||o.i.length!=0)&&(j(o.ka,h),j(o.ka,o.i),o.h.i.length=0,D(o.i),o.i.length=0),o.l.ra()}}function Uy(o,h,g){var _=g instanceof es?vi(g):new es(g);if(_.g!="")h&&(_.g=h+"."+_.g),lc(_,_.s);else{var V=l.location;_=V.protocol,h=h?h+"."+V.hostname:V.hostname,V=+V.port;var z=new es(null);_&&oc(z,_),h&&(z.g=h),V&&lc(z,V),g&&(z.l=g),_=z}return g=o.D,h=o.ya,g&&h&&et(_,g,h),et(_,"VER",o.la),vo(o,_),_}function zy(o,h,g){if(h&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=o.Ca&&!o.pa?new ft(new uc({eb:g})):new ft(o.pa),h.Ha(o.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function By(){}t=By.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function mc(){}mc.prototype.g=function(o,h){return new gn(o,h)};function gn(o,h){ge.call(this),this.g=new Dy(h),this.l=o,this.h=h&&h.messageUrlParams||null,o=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(o?o["X-WebChannel-Content-Type"]=h.messageContentType:o={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(o?o["X-WebChannel-Client-Profile"]=h.va:o={"X-WebChannel-Client-Profile":h.va}),this.g.S=o,(o=h&&h.Sb)&&!x(o)&&(this.g.m=o),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!x(h)&&(this.g.D=h,o=this.h,o!==null&&h in o&&(o=this.h,h in o&&delete o[h])),this.j=new zs(this)}S(gn,ge),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){mh(this.g)},gn.prototype.o=function(o){var h=this.g;if(typeof o=="string"){var g={};g.__data__=o,o=g}else this.u&&(g={},g.__data__=rh(o),o=g);h.i.push(new lw(h.Ya++,o)),h.G==3&&pc(h)},gn.prototype.N=function(){this.g.l=null,delete this.j,mh(this.g),delete this.g,gn.aa.N.call(this)};function qy(o){ah.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var h=o.__sm__;if(h){e:{for(const g in h){o=g;break e}o=void 0}(this.i=o)&&(o=this.i,h=h!==null&&o in h?h[o]:void 0),this.data=h}else this.data=o}S(qy,ah);function Hy(){oh.call(this),this.status=1}S(Hy,oh);function zs(o){this.g=o}S(zs,By),zs.prototype.ua=function(){Se(this.g,"a")},zs.prototype.ta=function(o){Se(this.g,new qy(o))},zs.prototype.sa=function(o){Se(this.g,new Hy)},zs.prototype.ra=function(){Se(this.g,"b")},mc.prototype.createWebChannel=mc.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,vE=function(){return new mc},yE=function(){return ic()},mE=Jr,wp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},rc.NO_ERROR=0,rc.TIMEOUT=8,rc.HTTP_ERROR=6,su=rc,sy.COMPLETE="complete",gE=sy,ey.EventType=ao,ao.OPEN="a",ao.CLOSE="b",ao.ERROR="c",ao.MESSAGE="d",ge.prototype.listen=ge.prototype.K,Mo=ey,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,pE=ft}).apply(typeof Nc<"u"?Nc:typeof self<"u"?self:typeof window<"u"?window:{});const i_="@firebase/firestore",r_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Za="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=new Yg("@firebase/firestore");function Ys(){return Cs.logLevel}function ie(t,...e){if(Cs.logLevel<=je.DEBUG){const n=e.map(om);Cs.debug(`Firestore (${Za}): ${t}`,...n)}}function Fi(t,...e){if(Cs.logLevel<=je.ERROR){const n=e.map(om);Cs.error(`Firestore (${Za}): ${t}`,...n)}}function Pr(t,...e){if(Cs.logLevel<=je.WARN){const n=e.map(om);Cs.warn(`Firestore (${Za}): ${t}`,...n)}}function om(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,_E(t,i,n)}function _E(t,e,n){let i=`FIRESTORE (${Za}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Fi(i),new Error(i)}function qe(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||_E(e,r,i)}function we(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends Qi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Xt.UNAUTHENTICATED))}shutdown(){}}class oM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class lM{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){qe(this.o===void 0,42304);let i=this.i;const r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let s=new Vi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Vi,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},l=c=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Vi)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(qe(typeof i.accessToken=="string",31837,{l:i}),new bE(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string",2055,{h:e}),new Xt(e)}}class cM{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class uM{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new cM(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class s_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dM{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){qe(this.o===void 0,3512);const i=s=>{s.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,ie("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new s_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new s_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=hM(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%62))}return i}}function De(t,e){return t<e?-1:t>e?1:0}function Ap(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),r=e.codePointAt(n);if(i!==r){if(i<128&&r<128)return De(i,r);{const s=xE(),a=fM(s.encode(a_(t,n)),s.encode(a_(e,n)));return a!==0?a:De(i,r)}}n+=i>65535?2:1}return De(t.length,e.length)}function a_(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function fM(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return De(t[n],e[n]);return De(t.length,e.length)}function ja(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="__name__";class ri{constructor(e,n,i){n===void 0?n=0:n>e.length&&me(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&me(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ri.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ri?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=ri.compareSegments(e.get(r),n.get(r));if(s!==0)return s}return De(e.length,n.length)}static compareSegments(e,n){const i=ri.isNumericId(e),r=ri.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?ri.extractNumericId(e).compare(ri.extractNumericId(n)):Ap(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Dr.fromString(e.substring(4,e.length-2))}}class Je extends ri{construct(e,n,i){return new Je(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ee(q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Je(n)}static emptyPath(){return new Je([])}}const pM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends ri{construct(e,n,i){return new Ht(e,n,i)}static isValidIdentifier(e){return pM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===o_}static keyField(){return new Ht([o_])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new ee(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new ee(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ee(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new ee(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(n)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(Je.fromString(e))}static fromName(e){return new he(Je.fromString(e).popFirst(5))}static empty(){return new he(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new Je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(t,e,n){if(!n)throw new ee(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gM(t,e,n,i){if(e===!0&&i===!0)throw new ee(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function l_(t){if(!he.isDocumentKey(t))throw new ee(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function c_(t){if(he.isDocumentKey(t))throw new ee(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function EE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Vd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":me(12329,{type:typeof t})}function zn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vd(t);throw new ee(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t,e){const n={typeString:t};return e&&(n.value=e),n}function Kl(t,e){if(!EE(t))throw new ee(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new ee(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_=-62135596800,d_=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*d_);return new it(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<u_)throw new ee(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/d_}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:it._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Kl(e,it._jsonSchema))return new it(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-u_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:It("string",it._jsonSchemaVersion),seconds:It("number"),nanoseconds:It("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new it(0,0))}static max(){return new Te(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=-1;function mM(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Te.fromTimestamp(i===1e9?new it(n+1,0):new it(n,i));return new Lr(r,he.empty(),e)}function yM(t){return new Lr(t.readTime,t.key,xl)}class Lr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Lr(Te.min(),he.empty(),xl)}static max(){return new Lr(Te.max(),he.empty(),xl)}}function vM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:De(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eo(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==_M)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,i)=>{n(e)})}static reject(e){return new G((n,i)=>{i(e)})}static waitFor(e){return new G((n,i)=>{let r=0,s=0,a=!1;e.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},c=>i(c))}),a=!0,s===r&&n()})}static or(e){let n=G.resolve(!1);for(const i of e)n=n.next(r=>r?G.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new G((i,r)=>{const s=e.length,a=new Array(s);let l=0;for(let c=0;c<s;c++){const d=c;n(e[d]).next(p=>{a[d]=p,++l,l===s&&i(a)},p=>r(p))}})}static doWhile(e,n){return new G((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function xM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function to(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Pd.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm=-1;function Ld(t){return t==null}function Wu(t){return t===0&&1/t==-1/0}function TM(t){return typeof t=="number"&&Number.isInteger(t)&&!Wu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="";function EM(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=h_(e)),e=SM(t.get(n),e);return h_(e)}function SM(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case SE:n+="";break;default:n+=s}}return n}function h_(t){return t+SE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Kr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){this.comparator=e,this.root=n||zt.EMPTY}insert(e,n){return new ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vc(this.root,e,this.comparator,!0)}}class Vc{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??zt.RED,this.left=r??zt.EMPTY,this.right=s??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new zt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return zt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,n,i,r,s){return this}insert(e,n,i){return new zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new p_(this.data.getIterator())}getIteratorFrom(e){return new p_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Dt(this.comparator);return n.data=e,n}}class p_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new bn([])}unionWith(e){let n=new Dt(Ht.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ja(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new AE("Invalid base64 string: "+s):s}}(e);return new $t(n)}static fromUint8Array(e){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new $t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$t.EMPTY_BYTE_STRING=new $t("");const wM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ur(t){if(qe(!!t,39018),typeof t=="string"){let e=0;const n=wM.exec(t);if(qe(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:mt(t.seconds),nanos:mt(t.nanos)}}function mt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zr(t){return typeof t=="string"?$t.fromBase64String(t):$t.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="server_timestamp",CE="__type__",RE="__previous_value__",DE="__local_write_time__";function um(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[CE])===null||n===void 0?void 0:n.stringValue)===IE}function Ud(t){const e=t.mapValue.fields[RE];return um(e)?Ud(e):e}function Tl(t){const e=Ur(t.mapValue.fields[DE].timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e,n,i,r,s,a,l,c,d,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=p}}const Xu="(default)";class El{constructor(e,n){this.projectId=e,this.database=n||Xu}static empty(){return new El("","")}get isDefaultDatabase(){return this.database===Xu}isEqual(e){return e instanceof El&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="__type__",IM="__max__",Pc={mapValue:{}},OE="__vector__",Ju="value";function Br(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?um(t)?4:RM(t)?9007199254740991:CM(t)?10:11:me(28295,{value:t})}function gi(t,e){if(t===e)return!0;const n=Br(t);if(n!==Br(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Tl(t).isEqual(Tl(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=Ur(r.timestampValue),l=Ur(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return zr(r.bytesValue).isEqual(zr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return mt(r.geoPointValue.latitude)===mt(s.geoPointValue.latitude)&&mt(r.geoPointValue.longitude)===mt(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return mt(r.integerValue)===mt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=mt(r.doubleValue),l=mt(s.doubleValue);return a===l?Wu(a)===Wu(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return ja(t.arrayValue.values||[],e.arrayValue.values||[],gi);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(f_(a)!==f_(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!gi(a[c],l[c])))return!1;return!0}(t,e);default:return me(52216,{left:t})}}function Sl(t,e){return(t.values||[]).find(n=>gi(n,e))!==void 0}function ka(t,e){if(t===e)return 0;const n=Br(t),i=Br(e);if(n!==i)return De(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return De(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=mt(s.integerValue||s.doubleValue),c=mt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return g_(t.timestampValue,e.timestampValue);case 4:return g_(Tl(t),Tl(e));case 5:return Ap(t.stringValue,e.stringValue);case 6:return function(s,a){const l=zr(s),c=zr(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const p=De(l[d],c[d]);if(p!==0)return p}return De(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=De(mt(s.latitude),mt(a.latitude));return l!==0?l:De(mt(s.longitude),mt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return m_(t.arrayValue,e.arrayValue);case 10:return function(s,a){var l,c,d,p;const m=s.fields||{},f=a.fields||{},y=(l=m[Ju])===null||l===void 0?void 0:l.arrayValue,S=(c=f[Ju])===null||c===void 0?void 0:c.arrayValue,D=De(((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0,((p=S==null?void 0:S.values)===null||p===void 0?void 0:p.length)||0);return D!==0?D:m_(y,S)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Pc.mapValue&&a===Pc.mapValue)return 0;if(s===Pc.mapValue)return 1;if(a===Pc.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),d=a.fields||{},p=Object.keys(d);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const f=Ap(c[m],p[m]);if(f!==0)return f;const y=ka(l[c[m]],d[p[m]]);if(y!==0)return y}return De(c.length,p.length)}(t.mapValue,e.mapValue);default:throw me(23264,{le:n})}}function g_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return De(t,e);const n=Ur(t),i=Ur(e),r=De(n.seconds,i.seconds);return r!==0?r:De(n.nanos,i.nanos)}function m_(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=ka(n[r],i[r]);if(s)return s}return De(n.length,i.length)}function Na(t){return Ip(t)}function Ip(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Ur(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return zr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return he.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Ip(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${Ip(n.fields[a])}`;return r+"}"}(t.mapValue):me(61005,{value:t})}function au(t){switch(Br(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ud(t);return e?16+au(e):16;case 5:return 2*t.stringValue.length;case 6:return zr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+au(s),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return Kr(i.fields,(s,a)=>{r+=s.length+au(a)}),r}(t.mapValue);default:throw me(13486,{value:t})}}function y_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Cp(t){return!!t&&"integerValue"in t}function dm(t){return!!t&&"arrayValue"in t}function v_(t){return!!t&&"nullValue"in t}function __(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ou(t){return!!t&&"mapValue"in t}function CM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[ME])===null||n===void 0?void 0:n.stringValue)===OE}function Jo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Kr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Jo(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Jo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function RM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===IM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!ou(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jo(n)}setAll(e){let n=Ht.emptyPath(),i={},r=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=Jo(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());ou(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];ou(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Kr(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new dn(Jo(this.value))}}function jE(t){const e=[];return Kr(t.fields,(n,i)=>{const r=new Ht([n]);if(ou(i)){const s=jE(i.mapValue).fields;if(s.length===0)e.push(r);else for(const a of s)e.push(r.child(a))}else e.push(r)}),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n,i,r,s,a,l){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Jt(e,0,Te.min(),Te.min(),Te.min(),dn.empty(),0)}static newFoundDocument(e,n,i,r){return new Jt(e,1,n,Te.min(),i,r,0)}static newNoDocument(e,n){return new Jt(e,2,n,Te.min(),Te.min(),dn.empty(),0)}static newUnknownDocument(e,n){return new Jt(e,3,n,Te.min(),Te.min(),dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n){this.position=e,this.inclusive=n}}function b_(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],a=t.position[r];if(s.field.isKeyField()?i=he.comparator(he.fromName(a.referenceValue),n.key):i=ka(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function x_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,n="asc"){this.field=e,this.dir=n}}function DM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{}class wt extends kE{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new OM(e,n,i):n==="array-contains"?new NM(e,i):n==="in"?new VM(e,i):n==="not-in"?new PM(e,i):n==="array-contains-any"?new LM(e,i):new wt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new jM(e,i):new kM(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ka(n,this.value)):n!==null&&Br(this.value)===Br(n)&&this.matchesComparison(ka(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zn extends kE{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Zn(e,n)}matches(e){return NE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function NE(t){return t.op==="and"}function VE(t){return MM(t)&&NE(t)}function MM(t){for(const e of t.filters)if(e instanceof Zn)return!1;return!0}function Rp(t){if(t instanceof wt)return t.field.canonicalString()+t.op.toString()+Na(t.value);if(VE(t))return t.filters.map(e=>Rp(e)).join(",");{const e=t.filters.map(n=>Rp(n)).join(",");return`${t.op}(${e})`}}function PE(t,e){return t instanceof wt?function(i,r){return r instanceof wt&&i.op===r.op&&i.field.isEqual(r.field)&&gi(i.value,r.value)}(t,e):t instanceof Zn?function(i,r){return r instanceof Zn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&PE(a,r.filters[l]),!0):!1}(t,e):void me(19439)}function LE(t){return t instanceof wt?function(n){return`${n.field.canonicalString()} ${n.op} ${Na(n.value)}`}(t):t instanceof Zn?function(n){return n.op.toString()+" {"+n.getFilters().map(LE).join(" ,")+"}"}(t):"Filter"}class OM extends wt{constructor(e,n,i){super(e,n,i),this.key=he.fromName(i.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class jM extends wt{constructor(e,n){super(e,"in",n),this.keys=UE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class kM extends wt{constructor(e,n){super(e,"not-in",n),this.keys=UE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function UE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>he.fromName(i.referenceValue))}class NM extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return dm(n)&&Sl(n.arrayValue,this.value)}}class VM extends wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Sl(this.value.arrayValue,n)}}class PM extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Sl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Sl(this.value.arrayValue,n)}}class LM extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!dm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Sl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e,n=null,i=[],r=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.Pe=null}}function T_(t,e=null,n=[],i=[],r=null,s=null,a=null){return new UM(t,e,n,i,r,s,a)}function hm(t){const e=we(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Rp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Ld(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Na(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Na(i)).join(",")),e.Pe=n}return e.Pe}function fm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!DM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!PE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!x_(t.startAt,e.startAt)&&x_(t.endAt,e.endAt)}function Dp(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,n=null,i=[],r=[],s=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function zM(t,e,n,i,r,s,a,l){return new no(t,e,n,i,r,s,a,l)}function zd(t){return new no(t)}function E_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zE(t){return t.collectionGroup!==null}function Zo(t){const e=we(t);if(e.Te===null){e.Te=[];const n=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Dt(Ht.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new wl(s,i))}),n.has(Ht.keyField().canonicalString())||e.Te.push(new wl(Ht.keyField(),i))}return e.Te}function ui(t){const e=we(t);return e.Ie||(e.Ie=BM(e,Zo(t))),e.Ie}function BM(t,e){if(t.limitType==="F")return T_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new wl(r.field,s)});const n=t.endAt?new Zu(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Zu(t.startAt.position,t.startAt.inclusive):null;return T_(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Mp(t,e){const n=t.filters.concat([e]);return new no(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ed(t,e,n){return new no(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bd(t,e){return fm(ui(t),ui(e))&&t.limitType===e.limitType}function BE(t){return`${hm(ui(t))}|lt:${t.limitType}`}function Qs(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>LE(r)).join(", ")}]`),Ld(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Na(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Na(r)).join(",")),`Target(${i})`}(ui(t))}; limitType=${t.limitType})`}function qd(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):he.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Zo(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,l,c){const d=b_(a,l,c);return a.inclusive?d<=0:d<0}(i.startAt,Zo(i),r)||i.endAt&&!function(a,l,c){const d=b_(a,l,c);return a.inclusive?d>=0:d>0}(i.endAt,Zo(i),r))}(t,e)}function qM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qE(t){return(e,n)=>{let i=!1;for(const r of Zo(t)){const s=HM(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function HM(t,e,n){const i=t.field.isKeyField()?he.comparator(e.key,n.key):function(s,a,l){const c=a.data.field(s),d=l.data.field(s);return c!==null&&d!==null?ka(c,d):me(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Kr(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return wE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM=new ut(he.comparator);function Gi(){return FM}const HE=new ut(he.comparator);function Oo(...t){let e=HE;for(const n of t)e=e.insert(n.key,n);return e}function FE(t){let e=HE;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function cs(){return el()}function GE(){return el()}function el(){return new Vs(t=>t.toString(),(t,e)=>t.isEqual(e))}const GM=new ut(he.comparator),$M=new Dt(he.comparator);function ke(...t){let e=$M;for(const n of t)e=e.add(n);return e}const YM=new Dt(De);function QM(){return YM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wu(e)?"-0":e}}function $E(t){return{integerValue:""+t}}function KM(t,e){return TM(e)?$E(e):pm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(){this._=void 0}}function WM(t,e,n){return t instanceof Al?function(r,s){const a={fields:{[CE]:{stringValue:IE},[DE]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&um(s)&&(s=Ud(s)),s&&(a.fields[RE]=s),{mapValue:a}}(n,e):t instanceof Il?QE(t,e):t instanceof Cl?KE(t,e):function(r,s){const a=YE(r,s),l=S_(a)+S_(r.Ee);return Cp(a)&&Cp(r.Ee)?$E(l):pm(r.serializer,l)}(t,e)}function XM(t,e,n){return t instanceof Il?QE(t,e):t instanceof Cl?KE(t,e):n}function YE(t,e){return t instanceof td?function(i){return Cp(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Al extends Hd{}class Il extends Hd{constructor(e){super(),this.elements=e}}function QE(t,e){const n=WE(e);for(const i of t.elements)n.some(r=>gi(r,i))||n.push(i);return{arrayValue:{values:n}}}class Cl extends Hd{constructor(e){super(),this.elements=e}}function KE(t,e){let n=WE(e);for(const i of t.elements)n=n.filter(r=>!gi(r,i));return{arrayValue:{values:n}}}class td extends Hd{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function S_(t){return mt(t.integerValue||t.doubleValue)}function WE(t){return dm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,n){this.field=e,this.transform=n}}function ZM(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Il&&r instanceof Il||i instanceof Cl&&r instanceof Cl?ja(i.elements,r.elements,gi):i instanceof td&&r instanceof td?gi(i.Ee,r.Ee):i instanceof Al&&r instanceof Al}(t.transform,e.transform)}class eO{constructor(e,n){this.version=e,this.transformResults=n}}class Jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fd{}function XE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new gm(t.key,Jn.none()):new Wl(t.key,t.data,Jn.none());{const n=t.data,i=dn.empty();let r=new Dt(Ht.comparator);for(let s of e.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new Wr(t.key,i,new bn(r.toArray()),Jn.none())}}function tO(t,e,n){t instanceof Wl?function(r,s,a){const l=r.value.clone(),c=A_(r.fieldTransforms,s,a.transformResults);l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Wr?function(r,s,a){if(!lu(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=A_(r.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(JE(r)),c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function tl(t,e,n,i){return t instanceof Wl?function(s,a,l,c){if(!lu(s.precondition,a))return l;const d=s.value.clone(),p=I_(s.fieldTransforms,c,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,i):t instanceof Wr?function(s,a,l,c){if(!lu(s.precondition,a))return l;const d=I_(s.fieldTransforms,c,a),p=a.data;return p.setAll(JE(s)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,i):function(s,a,l){return lu(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function nO(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=YE(i.transform,r||null);s!=null&&(n===null&&(n=dn.empty()),n.set(i.field,s))}return n||null}function w_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ja(i,r,(s,a)=>ZM(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wl extends Fd{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Wr extends Fd{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function JE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function A_(t,e,n){const i=new Map;qe(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let r=0;r<n.length;r++){const s=t[r],a=s.transform,l=e.data.field(s.field);i.set(s.field,XM(a,l,n[r]))}return i}function I_(t,e,n){const i=new Map;for(const r of t){const s=r.transform,a=n.data.field(r.field);i.set(r.field,WM(s,a,e))}return i}class gm extends Fd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iO extends Fd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&tO(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=tl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=tl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=GE();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const c=XE(a,l);c!==null&&i.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(Te.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&ja(this.mutations,e.mutations,(n,i)=>w_(n,i))&&ja(this.baseMutations,e.baseMutations,(n,i)=>w_(n,i))}}class mm{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){qe(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=function(){return GM}();const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new mm(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,Pe;function oO(t){switch(t){case q.OK:return me(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return me(15467,{code:t})}}function ZE(t){if(t===void 0)return Fi("GRPC error has no .code"),q.UNKNOWN;switch(t){case xt.OK:return q.OK;case xt.CANCELLED:return q.CANCELLED;case xt.UNKNOWN:return q.UNKNOWN;case xt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case xt.INTERNAL:return q.INTERNAL;case xt.UNAVAILABLE:return q.UNAVAILABLE;case xt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case xt.NOT_FOUND:return q.NOT_FOUND;case xt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case xt.ABORTED:return q.ABORTED;case xt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case xt.DATA_LOSS:return q.DATA_LOSS;default:return me(39323,{code:t})}}(Pe=xt||(xt={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=new Dr([4294967295,4294967295],0);function C_(t){const e=xE().encode(t),n=new fE;return n.update(e),new Uint8Array(n.digest())}function R_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Dr([n,i],0),new Dr([r,s],0)]}class ym{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new jo(`Invalid padding: ${n}`);if(i<0)throw new jo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new jo(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new jo(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Dr.fromNumber(this.fe)}pe(e,n,i){let r=e.add(n.multiply(Dr.fromNumber(i)));return r.compare(lO)===1&&(r=new Dr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=C_(e),[i,r]=R_(n);for(let s=0;s<this.hashCount;s++){const a=this.pe(i,r,s);if(!this.ye(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new ym(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.fe===0)return;const n=C_(e),[i,r]=R_(n);for(let s=0;s<this.hashCount;s++){const a=this.pe(i,r,s);this.we(a)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class jo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Xl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Gd(Te.min(),r,new ut(De),Gi(),ke())}}class Xl{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Xl(i,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n,i,r){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=r}}class eS{constructor(e,n){this.targetId=e,this.De=n}}class tS{constructor(e,n,i=$t.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class D_{constructor(){this.ve=0,this.Ce=M_(),this.Fe=$t.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ke(),n=ke(),i=ke();return this.Ce.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:me(38017,{changeType:s})}}),new Xl(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=M_()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,qe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class cO{constructor(e){this.We=e,this.Ge=new Map,this.ze=Gi(),this.je=Lc(),this.Je=Lc(),this.He=new ut(De)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((i,r)=>{this.nt(r)&&n(r)})}it(e){const n=e.targetId,i=e.De.count,r=this.st(n);if(r){const s=r.target;if(Dp(s))if(i===0){const a=new he(s.path);this.Xe(n,a,Jt.newNoDocument(a,Te.min()))}else qe(i===1,20013,{expectedCount:i});else{const a=this.ot(n);if(a!==i){const l=this._t(e),c=l?this.ut(l,e,a):1;if(c!==0){this.rt(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,d)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=zr(i).toUint8Array()}catch(c){if(c instanceof AE)return Pr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new ym(a,r,s)}catch(c){return Pr(c instanceof jo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.fe===0?null:l}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.We.lt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Xe(n,s,null),r++)}),r}Pt(e){const n=new Map;this.Ge.forEach((s,a)=>{const l=this.st(a);if(l){if(s.current&&Dp(l.target)){const c=new he(l.target.path);this.Tt(c).has(a)||this.It(a,c)||this.Xe(a,c,Jt.newNoDocument(c,e))}s.Ne&&(n.set(a,s.Le()),s.ke())}});let i=ke();this.Je.forEach((s,a)=>{let l=!0;a.forEachWhile(c=>{const d=this.st(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.ze.forEach((s,a)=>a.setReadTime(e));const r=new Gd(e,n,this.He,this.ze,i);return this.ze=Gi(),this.je=Lc(),this.Je=Lc(),this.He=new ut(De),r}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const r=this.tt(e);this.It(e,n)?r.qe(n,1):r.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new D_,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Dt(De),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Dt(De),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new D_),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Lc(){return new ut(he.comparator)}function M_(){return new ut(he.comparator)}const uO={asc:"ASCENDING",desc:"DESCENDING"},dO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hO={and:"AND",or:"OR"};class fO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Op(t,e){return t.useProto3Json||Ld(e)?e:{value:e}}function nd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pO(t,e){return nd(t,e.toTimestamp())}function di(t){return qe(!!t,49232),Te.fromTimestamp(function(n){const i=Ur(n);return new it(i.seconds,i.nanos)}(t))}function vm(t,e){return jp(t,e).canonicalString()}function jp(t,e){const n=function(r){return new Je(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function iS(t){const e=Je.fromString(t);return qe(lS(e),10190,{key:e.toString()}),e}function kp(t,e){return vm(t.databaseId,e.path)}function hf(t,e){const n=iS(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(sS(n))}function rS(t,e){return vm(t.databaseId,e)}function gO(t){const e=iS(t);return e.length===4?Je.emptyPath():sS(e)}function Np(t){return new Je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sS(t){return qe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function O_(t,e,n){return{name:kp(t,e),fields:n.value.mapValue.fields}}function mO(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:me(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(d,p){return d.useProto3Json?(qe(p===void 0||typeof p=="string",58123),$t.fromBase64String(p||"")):(qe(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),$t.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const p=d.code===void 0?q.UNKNOWN:ZE(d.code);return new ee(p,d.message||"")}(a);n=new tS(i,r,s,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=hf(t,i.document.name),s=di(i.document.updateTime),a=i.document.createTime?di(i.document.createTime):Te.min(),l=new dn({mapValue:{fields:i.document.fields}}),c=Jt.newFoundDocument(r,s,a,l),d=i.targetIds||[],p=i.removedTargetIds||[];n=new cu(d,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=hf(t,i.document),s=i.readTime?di(i.readTime):Te.min(),a=Jt.newNoDocument(r,s),l=i.removedTargetIds||[];n=new cu([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=hf(t,i.document),s=i.removedTargetIds||[];n=new cu([],s,r,null)}else{if(!("filter"in e))return me(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new aO(r,s),l=i.targetId;n=new eS(l,a)}}return n}function yO(t,e){let n;if(e instanceof Wl)n={update:O_(t,e.key,e.value)};else if(e instanceof gm)n={delete:kp(t,e.key)};else if(e instanceof Wr)n={update:O_(t,e.key,e.data),updateMask:AO(e.fieldMask)};else{if(!(e instanceof iO))return me(16599,{Rt:e.type});n={verify:kp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof Al)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Il)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Cl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof td)return{fieldPath:a.field.canonicalString(),increment:l.Ee};throw me(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:pO(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:me(27497)}(t,e.precondition)),n}function vO(t,e){return t&&t.length>0?(qe(e!==void 0,14353),t.map(n=>function(r,s){let a=r.updateTime?di(r.updateTime):di(s);return a.isEqual(Te.min())&&(a=di(s)),new eO(a,r.transformResults||[])}(n,e))):[]}function _O(t,e){return{documents:[rS(t,e.path)]}}function bO(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=rS(t,r);const s=function(d){if(d.length!==0)return oS(Zn.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(d){if(d.length!==0)return d.map(p=>function(f){return{field:Ks(f.field),direction:EO(f.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Op(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{Vt:n,parent:r}}function xO(t){let e=gO(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){qe(i===1,65062);const p=n.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(m){const f=aS(m);return f instanceof Zn&&VE(f)?f.getFilters():[f]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(f=>function(S){return new wl(Ws(S.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(f))}(n.orderBy));let l=null;n.limit&&(l=function(m){let f;return f=typeof m=="object"?m.value:m,Ld(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(m){const f=!!m.before,y=m.values||[];return new Zu(y,f)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const f=!m.before,y=m.values||[];return new Zu(y,f)}(n.endAt)),zM(e,r,a,s,l,"F",c,d)}function TO(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function aS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Ws(n.unaryFilter.field);return wt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ws(n.unaryFilter.field);return wt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ws(n.unaryFilter.field);return wt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ws(n.unaryFilter.field);return wt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}}(t):t.fieldFilter!==void 0?function(n){return wt.create(Ws(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Zn.create(n.compositeFilter.filters.map(i=>aS(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return me(1026)}}(n.compositeFilter.op))}(t):me(30097,{filter:t})}function EO(t){return uO[t]}function SO(t){return dO[t]}function wO(t){return hO[t]}function Ks(t){return{fieldPath:t.canonicalString()}}function Ws(t){return Ht.fromServerFormat(t.fieldPath)}function oS(t){return t instanceof wt?function(n){if(n.op==="=="){if(__(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NAN"}};if(v_(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(__(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NAN"}};if(v_(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ks(n.field),op:SO(n.op),value:n.value}}}(t):t instanceof Zn?function(n){const i=n.getFilters().map(r=>oS(r));return i.length===1?i[0]:{compositeFilter:{op:wO(n.op),filters:i}}}(t):me(54877,{filter:t})}function AO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function lS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n,i,r,s=Te.min(),a=Te.min(),l=$t.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e){this.gt=e}}function CO(t){const e=xO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ed(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(){this.Dn=new DO}addToCollectionParentIndex(e,n){return this.Dn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(Lr.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(Lr.min())}updateCollectionGroup(e,n,i){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class DO{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Dt(Je.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Dt(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cS=41943040;class un{static withCacheSize(e){return new un(e,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(cS,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Va(0)}static ur(){return new Va(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="LruGarbageCollector",MO=1048576;function N_([t,e],[n,i]){const r=De(t,n);return r===0?De(e,i):r}class OO{constructor(e){this.Tr=e,this.buffer=new Dt(N_),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();N_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class jO{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ie(k_,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){to(n)?ie(k_,"Ignoring IndexedDB error during garbage collection: ",n):await eo(n)}await this.Rr(3e5)})}}class kO{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return G.resolve(Pd.ue);const i=new OO(n);return this.Vr.forEachTarget(e,r=>i.Er(r.sequenceNumber)).next(()=>this.Vr.gr(e,r=>i.Er(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(j_)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),j_):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,r,s,a,l,c,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),r=this.params.maximumSequenceNumbersToCollect):r=m,a=Date.now(),this.nthSequenceNumber(e,r))).next(m=>(i=m,l=Date.now(),this.removeTargets(e,i,n))).next(m=>(s=m,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(m=>(d=Date.now(),Ys()<=je.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(d-c)+`ms
Total Duration: ${d-p}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:m})))}}function NO(t,e){return new kO(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(){this.changes=new Vs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?G.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&tl(i.mutation,r,bn.empty(),it.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ke()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ke()){const r=cs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let a=Oo();return s.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=cs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ke()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,i,r){let s=Gi();const a=el(),l=function(){return el()}();return n.forEach((c,d)=>{const p=i.get(d.key);r.has(d.key)&&(p===void 0||p.mutation instanceof Wr)?s=s.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),tl(p.mutation,d,p.mutation.getFieldMask(),it.now())):a.set(d.key,bn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,p)=>a.set(d,p)),n.forEach((d,p)=>{var m;return l.set(d,new PO(p,(m=a.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const i=el();let r=new ut((a,l)=>a-l),s=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let p=i.get(c)||bn.empty();p=l.applyToLocalView(d,p),i.set(c,p);const m=(r.get(l.batchId)||ke()).add(c);r=r.insert(l.batchId,m)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,p=c.value,m=GE();p.forEach(f=>{if(!s.has(f)){const y=XE(n.get(f),i.get(f));y!==null&&m.set(f,y),s=s.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return G.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return he.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):G.resolve(cs());let l=xl,c=s;return a.next(d=>G.forEach(d,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(p)?G.resolve():this.remoteDocumentCache.getEntry(e,p).next(f=>{c=c.insert(p,f)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,ke())).next(p=>({batchId:l,changes:FE(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(i=>{let r=Oo();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let a=Oo();return this.indexManager.getCollectionParents(e,s).next(l=>G.forEach(l,c=>{const d=function(m,f){return new no(f,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,i,r).next(p=>{p.forEach((m,f)=>{a=a.insert(m,f)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(a=>{s.forEach((c,d)=>{const p=d.getKey();a.get(p)===null&&(a=a.insert(p,Jt.newInvalidDocument(p)))});let l=Oo();return a.forEach((c,d)=>{const p=s.get(c);p!==void 0&&tl(p.mutation,d,bn.empty(),it.now()),qd(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return G.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(r){return{id:r.id,version:r.version,createTime:di(r.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(r){return{name:r.name,query:CO(r.bundledQuery),readTime:di(r.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(){this.overlays=new ut(he.comparator),this.kr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const i=cs();return G.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.wt(e,n,s)}),G.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.kr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(i)),G.resolve()}getOverlaysForCollection(e,n,i){const r=cs(),s=n.length+1,a=new he(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return G.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new ut((d,p)=>d-p);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>i){let p=s.get(d.largestBatchId);p===null&&(p=cs(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const l=cs(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,p)=>l.set(d,p)),!(l.size()>=r)););return G.resolve(l)}wt(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new sO(n,i));let s=this.kr.get(n);s===void 0&&(s=ke(),this.kr.set(n,s)),this.kr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(){this.qr=new Dt(Ot.Qr),this.$r=new Dt(Ot.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new Ot(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Wr(new Ot(e,n))}Gr(e,n){e.forEach(i=>this.removeReference(i,n))}zr(e){const n=new he(new Je([])),i=new Ot(n,e),r=new Ot(n,e+1),s=[];return this.$r.forEachInRange([i,r],a=>{this.Wr(a),s.push(a.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new he(new Je([])),i=new Ot(n,e),r=new Ot(n,e+1);let s=ke();return this.$r.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Ot(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Ot{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return he.comparator(e.key,n.key)||De(e.Hr,n.Hr)}static Ur(e,n){return De(e.Hr,n.Hr)||he.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Dt(Ot.Qr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new rO(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.Yr=this.Yr.add(new Ot(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return G.resolve(a)}lookupMutationBatch(e,n){return G.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Xr(i),s=r<0?0:r;return G.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?cm:this.er-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Ot(n,0),r=new Ot(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([i,r],a=>{const l=this.Zr(a.Hr);s.push(l)}),G.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Dt(De);return n.forEach(r=>{const s=new Ot(r,0),a=new Ot(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,a],l=>{i=i.add(l.Hr)})}),G.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;he.isDocumentKey(s)||(s=s.child(""));const a=new Ot(new he(s),0);let l=new Dt(De);return this.Yr.forEachWhile(c=>{const d=c.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(l=l.add(c.Hr)),!0)},a),G.resolve(this.ei(l))}ei(e){const n=[];return e.forEach(i=>{const r=this.Zr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){qe(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return G.forEach(n.mutations,r=>{const s=new Ot(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,n){const i=new Ot(n,0),r=this.Yr.firstAfterOrEqual(i);return G.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e){this.ni=e,this.docs=function(){return new ut(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return G.resolve(i?i.document.mutableCopy():Jt.newInvalidDocument(n))}getEntries(e,n){let i=Gi();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Jt.newInvalidDocument(r))}),G.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=Gi();const a=n.path,l=new he(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:p}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||vM(yM(p),i)<=0||(r.has(p.key)||qd(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return G.resolve(s)}getAllFromCollectionGroup(e,n,i,r){me(9500)}ri(e,n){return G.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new FO(this)}getSize(e){return G.resolve(this.size)}}class FO extends VO{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)}),G.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e){this.persistence=e,this.ii=new Vs(n=>hm(n),fm),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.si=0,this.oi=new _m,this.targetCount=0,this._i=Va.ar()}forEachTarget(e,n){return this.ii.forEach((i,r)=>n(r)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),G.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Va(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.hr(n),G.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.ii.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.ii.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),G.waitFor(s).next(()=>r)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return G.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),G.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(e,a))}),G.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return G.resolve(i)}containsKey(e,n){return G.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,n){this.ai={},this.overlays={},this.ui=new Pd(0),this.ci=!1,this.ci=!0,this.li=new BO,this.referenceDelegate=e(this),this.hi=new GO(this),this.indexManager=new RO,this.remoteDocumentCache=function(r){return new HO(r)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new IO(n),this.Ti=new UO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new zO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new qO(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){ie("MemoryPersistence","Starting transaction:",e);const r=new $O(this.ui.next());return this.referenceDelegate.Ii(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ei(e,n){return G.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,n)))}}class $O extends bM{constructor(e){super(),this.currentSequenceNumber=e}}class bm{constructor(e){this.persistence=e,this.Ai=new _m,this.Ri=null}static Vi(e){return new bm(e)}get mi(){if(this.Ri)return this.Ri;throw me(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),G.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),G.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(r=>this.mi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.mi.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.mi,i=>{const r=he.fromPath(i);return this.fi(e,r).next(s=>{s||n.removeEntry(r,Te.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return G.or([()=>G.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class id{constructor(e,n){this.persistence=e,this.gi=new Vs(i=>EM(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=NO(this,n)}static Vi(e,n){return new id(e,n)}Ii(){}di(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}yr(e){let n=0;return this.gr(e,i=>{n++}).next(()=>n)}gr(e,n){return G.forEach(this.gi,(i,r)=>this.Sr(e,i,r).next(s=>s?G.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ri(e,a=>this.Sr(e,a,n).next(l=>{l||(i++,s.removeEntry(a,Te.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),G.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),G.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=au(e.data.value)),n}Sr(e,n,i){return G.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.gi.get(n);return G.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=r}static Es(e,n){let i=ke(),r=ke();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new xm(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return zC()?8:xM(Zt())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.ps(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ys(e,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new YO;return this.ws(e,n,a).next(l=>{if(s.result=l,this.Rs)return this.Ss(e,n,a,l.size)})}).next(()=>s.result)}Ss(e,n,i,r){return i.documentReadCount<this.Vs?(Ys()<=je.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Qs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),G.resolve()):(Ys()<=je.DEBUG&&ie("QueryEngine","Query:",Qs(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(Ys()<=je.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Qs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ui(n))):G.resolve())}ps(e,n){if(E_(n))return G.resolve(null);let i=ui(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=ed(n,null,"F"),i=ui(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const a=ke(...s);return this.gs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(c=>{const d=this.bs(n,l);return this.Ds(n,d,a,c.readTime)?this.ps(e,ed(n,null,"F")):this.vs(e,d,n,c)}))})))}ys(e,n,i,r){return E_(n)||r.isEqual(Te.min())?G.resolve(null):this.gs.getDocuments(e,i).next(s=>{const a=this.bs(n,s);return this.Ds(n,a,i,r)?G.resolve(null):(Ys()<=je.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Qs(n)),this.vs(e,a,n,mM(r,xl)).next(l=>l))})}bs(e,n){let i=new Dt(qE(e));return n.forEach((r,s)=>{qd(e,s)&&(i=i.add(s))}),i}Ds(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ws(e,n,i){return Ys()<=je.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Qs(n)),this.gs.getDocumentsMatchingQuery(e,n,Lr.min(),i)}vs(e,n,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="LocalStore",KO=3e8;class WO{constructor(e,n,i,r){this.persistence=e,this.Cs=n,this.serializer=r,this.Fs=new ut(De),this.Ms=new Vs(s=>hm(s),fm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LO(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function XO(t,e,n,i){return new WO(t,e,n,i)}async function dS(t,e){const n=we(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let c=ke();for(const d of r){a.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}for(const d of s){l.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(i,c).next(d=>({Bs:d,removedBatchIds:a,addedBatchIds:l}))})})}function JO(t,e){const n=we(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(l,c,d,p){const m=d.batch,f=m.keys();let y=G.resolve();return f.forEach(S=>{y=y.next(()=>p.getEntry(c,S)).next(D=>{const j=d.docVersions.get(S);qe(j!==null,48541),D.version.compareTo(j)<0&&(m.applyToRemoteDocument(D,d),D.isValidDocument()&&(D.setReadTime(d.commitVersion),p.addEntry(D)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let c=ke();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function hS(t){const e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function ZO(t,e){const n=we(t),i=e.snapshotVersion;let r=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Os.newChangeBuffer({trackRemovals:!0});r=n.Fs;const l=[];e.targetChanges.forEach((p,m)=>{const f=r.get(m);if(!f)return;l.push(n.hi.removeMatchingKeys(s,p.removedDocuments,m).next(()=>n.hi.addMatchingKeys(s,p.addedDocuments,m)));let y=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken($t.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):p.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(p.resumeToken,i)),r=r.insert(m,y),function(D,j,T){return D.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=KO?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(f,y,p)&&l.push(n.hi.updateTargetData(s,y))});let c=Gi(),d=ke();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),l.push(ej(s,a,e.documentUpdates).next(p=>{c=p.Ls,d=p.ks})),!i.isEqual(Te.min())){const p=n.hi.getLastRemoteSnapshotVersion(s).next(m=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(p)}return G.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(n.Fs=r,s))}function ej(t,e,n){let i=ke(),r=ke();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let a=Gi();return n.forEach((l,c)=>{const d=s.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(Te.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):ie(Tm,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Ls:a,ks:r}})}function tj(t,e){const n=we(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=cm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function nj(t,e){const n=we(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.hi.getTargetData(i,e).next(s=>s?(r=s,G.resolve(r)):n.hi.allocateTargetId(i).next(a=>(r=new yr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i})}async function Vp(t,e,n){const i=we(t),r=i.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!to(a))throw a;ie(Tm,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)}function V_(t,e,n){const i=we(t);let r=Te.min(),s=ke();return i.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,p){const m=we(c),f=m.Ms.get(p);return f!==void 0?G.resolve(m.Fs.get(f)):m.hi.getTargetData(d,p)}(i,a,ui(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{s=c})}).next(()=>i.Cs.getDocumentsMatchingQuery(a,e,n?r:Te.min(),n?s:ke())).next(l=>(ij(i,qM(e),l),{documents:l,qs:s})))}function ij(t,e,n){let i=t.xs.get(e)||Te.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.xs.set(e,i)}class P_{constructor(){this.activeTargetIds=QM()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rj{constructor(){this.Fo=new P_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new P_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="ConnectivityMonitor";class U_{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ie(L_,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ie(L_,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uc=null;function Pp(){return Uc===null?Uc=function(){return 268435456+Math.round(2147483648*Math.random())}():Uc++,"0x"+Uc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff="RestConnection",aj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oj{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===Xu?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,n,i,r,s){const a=Pp(),l=this.Go(e,n.toUriEncodedString());ie(ff,`Sending RPC '${e}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,r,s);const{host:d}=new URL(l),p=Wa(d);return this.jo(e,l,c,i,p).then(m=>(ie(ff,`Received RPC '${e}' ${a}: `,m),m),m=>{throw Pr(ff,`RPC '${e}' ${a} failed with error: `,m,"url: ",l,"request:",i),m})}Jo(e,n,i,r,s,a){return this.Wo(e,n,i,r,s)}zo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Za}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}Go(e,n){const i=aj[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class cj extends oj{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,r,s){const a=Pp();return new Promise((l,c)=>{const d=new pE;d.setWithCredentials(!0),d.listenOnce(gE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case su.NO_ERROR:const m=d.getResponseJson();ie(Kt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),l(m);break;case su.TIMEOUT:ie(Kt,`RPC '${e}' ${a} timed out`),c(new ee(q.DEADLINE_EXCEEDED,"Request time out"));break;case su.HTTP_ERROR:const f=d.getStatus();if(ie(Kt,`RPC '${e}' ${a} failed with status:`,f,"response text:",d.getResponseText()),f>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const S=y==null?void 0:y.error;if(S&&S.status&&S.message){const D=function(T){const x=T.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(x)>=0?x:q.UNKNOWN}(S.status);c(new ee(D,S.message))}else c(new ee(q.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ee(q.UNAVAILABLE,"Connection failed."));break;default:me(9055,{c_:e,streamId:a,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{ie(Kt,`RPC '${e}' ${a} completed.`)}});const p=JSON.stringify(r);ie(Kt,`RPC '${e}' ${a} sending request:`,r),d.send(n,"POST",p,i,15)})}P_(e,n,i){const r=Pp(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=vE(),l=yE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;const p=s.join("");ie(Kt,`Creating RPC '${e}' stream ${r}: ${p}`,c);const m=a.createWebChannel(p,c);this.T_(m);let f=!1,y=!1;const S=new lj({Ho:j=>{y?ie(Kt,`Not sending because RPC '${e}' stream ${r} is closed:`,j):(f||(ie(Kt,`Opening RPC '${e}' stream ${r} transport.`),m.open(),f=!0),ie(Kt,`RPC '${e}' stream ${r} sending:`,j),m.send(j))},Yo:()=>m.close()}),D=(j,T,x)=>{j.listen(T,A=>{try{x(A)}catch(M){setTimeout(()=>{throw M},0)}})};return D(m,Mo.EventType.OPEN,()=>{y||(ie(Kt,`RPC '${e}' stream ${r} transport opened.`),S.s_())}),D(m,Mo.EventType.CLOSE,()=>{y||(y=!0,ie(Kt,`RPC '${e}' stream ${r} transport closed`),S.__(),this.I_(m))}),D(m,Mo.EventType.ERROR,j=>{y||(y=!0,Pr(Kt,`RPC '${e}' stream ${r} transport errored. Name:`,j.name,"Message:",j.message),S.__(new ee(q.UNAVAILABLE,"The operation could not be completed")))}),D(m,Mo.EventType.MESSAGE,j=>{var T;if(!y){const x=j.data[0];qe(!!x,16349);const A=x,M=(A==null?void 0:A.error)||((T=A[0])===null||T===void 0?void 0:T.error);if(M){ie(Kt,`RPC '${e}' stream ${r} received error:`,M);const $=M.status;let Q=function(E){const C=xt[E];if(C!==void 0)return ZE(C)}($),w=M.message;Q===void 0&&(Q=q.INTERNAL,w="Unknown error status: "+$+" with message "+M.message),y=!0,S.__(new ee(Q,w)),m.close()}else ie(Kt,`RPC '${e}' stream ${r} received:`,x),S.a_(x)}}),D(l,mE.STAT_EVENT,j=>{j.stat===wp.PROXY?ie(Kt,`RPC '${e}' stream ${r} detected buffering proxy`):j.stat===wp.NOPROXY&&ie(Kt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function pf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(t){return new fO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e,n,i=1e3,r=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=r,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,n-i);r>0&&ie("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="PersistentStream";class pS{constructor(e,n,i,r,s,a,l,c){this.Fi=e,this.w_=i,this.S_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new fS(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(Fi(n.toString()),Fi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.b_===n&&this.W_(i,r)},i=>{e(()=>{const r=new ee(q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)})})}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(r=>{i(()=>this.G_(r))}),this.stream.onMessage(r=>{i(()=>++this.C_==1?this.j_(r):this.onNext(r))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ie(z_,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(ie(z_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uj extends pS{constructor(e,n,i,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=mO(this.serializer,e),i=function(s){if(!("targetChange"in s))return Te.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Te.min():a.readTime?di(a.readTime):Te.min()}(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=Np(this.serializer),n.addTarget=function(s,a){let l;const c=a.target;if(l=Dp(c)?{documents:_O(s,c)}:{query:bO(s,c).Vt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=nS(s,a.resumeToken);const d=Op(s,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(Te.min())>0){l.readTime=nd(s,a.snapshotVersion.toTimestamp());const d=Op(s,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const i=TO(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=Np(this.serializer),n.removeTarget=e,this.k_(n)}}class dj extends pS{constructor(e,n,i,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=vO(e.writeResults,e.commitTime),i=di(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=Np(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>yO(this.serializer,i))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{}class fj extends hj{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new ee(q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Wo(e,jp(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ee(q.UNKNOWN,s.toString())})}Jo(e,n,i,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Jo(e,jp(n,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ee(q.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class pj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Fi(n),this._a=!1):ie("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs="RemoteStore";class gj{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(a=>{i.enqueueAndForget(async()=>{Ps(this)&&(ie(Rs,"Restarting streams for network reachability change."),await async function(c){const d=we(c);d.Ia.add(4),await Jl(d),d.Aa.set("Unknown"),d.Ia.delete(4),await Yd(d)}(this))})}),this.Aa=new pj(i,r)}}async function Yd(t){if(Ps(t))for(const e of t.da)await e(!0)}async function Jl(t){for(const e of t.da)await e(!1)}function gS(t,e){const n=we(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Am(n)?wm(n):io(n).x_()&&Sm(n,e))}function Em(t,e){const n=we(t),i=io(n);n.Ta.delete(e),i.x_()&&mS(n,e),n.Ta.size===0&&(i.x_()?i.B_():Ps(n)&&n.Aa.set("Unknown"))}function Sm(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}io(t).H_(e)}function mS(t,e){t.Ra.$e(e),io(t).Y_(e)}function wm(t){t.Ra=new cO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),io(t).start(),t.Aa.aa()}function Am(t){return Ps(t)&&!io(t).M_()&&t.Ta.size>0}function Ps(t){return we(t).Ia.size===0}function yS(t){t.Ra=void 0}async function mj(t){t.Aa.set("Online")}async function yj(t){t.Ta.forEach((e,n)=>{Sm(t,e)})}async function vj(t,e){yS(t),Am(t)?(t.Aa.la(e),wm(t)):t.Aa.set("Unknown")}async function _j(t,e,n){if(t.Aa.set("Online"),e instanceof tS&&e.state===2&&e.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.Ta.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Ta.delete(l),r.Ra.removeTarget(l))}(t,e)}catch(i){ie(Rs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await rd(t,i)}else if(e instanceof cu?t.Ra.Ye(e):e instanceof eS?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Te.min()))try{const i=await hS(t.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.Ra.Pt(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const p=s.Ta.get(d);p&&s.Ta.set(d,p.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const p=s.Ta.get(c);if(!p)return;s.Ta.set(c,p.withResumeToken($t.EMPTY_BYTE_STRING,p.snapshotVersion)),mS(s,c);const m=new yr(p.target,c,d,p.sequenceNumber);Sm(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(i){ie(Rs,"Failed to raise snapshot:",i),await rd(t,i)}}async function rd(t,e,n){if(!to(e))throw e;t.Ia.add(1),await Jl(t),t.Aa.set("Offline"),n||(n=()=>hS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie(Rs,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Yd(t)})}function vS(t,e){return e().catch(n=>rd(t,n,e))}async function Qd(t){const e=we(t),n=qr(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:cm;for(;bj(e);)try{const r=await tj(e.localStore,i);if(r===null){e.Pa.length===0&&n.B_();break}i=r.batchId,xj(e,r)}catch(r){await rd(e,r)}_S(e)&&bS(e)}function bj(t){return Ps(t)&&t.Pa.length<10}function xj(t,e){t.Pa.push(e);const n=qr(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function _S(t){return Ps(t)&&!qr(t).M_()&&t.Pa.length>0}function bS(t){qr(t).start()}async function Tj(t){qr(t).na()}async function Ej(t){const e=qr(t);for(const n of t.Pa)e.X_(n.mutations)}async function Sj(t,e,n){const i=t.Pa.shift(),r=mm.from(i,e,n);await vS(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Qd(t)}async function wj(t,e){e&&qr(t).Z_&&await async function(i,r){if(function(a){return oO(a)&&a!==q.ABORTED}(r.code)){const s=i.Pa.shift();qr(i).N_(),await vS(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Qd(i)}}(t,e),_S(t)&&bS(t)}async function B_(t,e){const n=we(t);n.asyncQueue.verifyOperationInProgress(),ie(Rs,"RemoteStore received new credentials");const i=Ps(n);n.Ia.add(3),await Jl(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Yd(n)}async function Aj(t,e){const n=we(t);e?(n.Ia.delete(2),await Yd(n)):e||(n.Ia.add(2),await Jl(n),n.Aa.set("Unknown"))}function io(t){return t.Va||(t.Va=function(n,i,r){const s=we(n);return s.ia(),new uj(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Zo:mj.bind(null,t),e_:yj.bind(null,t),n_:vj.bind(null,t),J_:_j.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Am(t)?wm(t):t.Aa.set("Unknown")):(await t.Va.stop(),yS(t))})),t.Va}function qr(t){return t.ma||(t.ma=function(n,i,r){const s=we(n);return s.ia(),new dj(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:Tj.bind(null,t),n_:wj.bind(null,t),ea:Ej.bind(null,t),ta:Sj.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Qd(t)):(await t.ma.stop(),t.Pa.length>0&&(ie(Rs,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const a=Date.now()+i,l=new Im(e,n,a,r,s);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cm(t,e){if(Fi("AsyncQueue",`${e}: ${t}`),to(t))return new ee(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{static emptySet(e){return new _a(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||he.comparator(n.key,i.key):(n,i)=>he.comparator(n.key,i.key),this.keyedMap=Oo(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _a)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new _a;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(){this.fa=new ut(he.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):me(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,i)=>{e.push(i)}),e}}class Pa{constructor(e,n,i,r,s,a,l,c,d){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Pa(e,n,_a.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Cj{constructor(){this.queries=H_(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const r=we(n),s=r.queries;r.queries=H_(),s.forEach((a,l)=>{for(const c of l.wa)c.onError(i)})})(this,new ee(q.ABORTED,"Firestore shutting down"))}}function H_(){return new Vs(t=>BE(t),Bd)}async function Rm(t,e){const n=we(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.Sa()&&e.ba()&&(i=2):(s=new Ij,i=e.ba()?0:1);try{switch(i){case 0:s.ya=await n.onListen(r,!0);break;case 1:s.ya=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=Cm(a,`Initialization of query '${Qs(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&Mm(n)}async function Dm(t,e){const n=we(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const a=s.wa.indexOf(e);a>=0&&(s.wa.splice(a,1),s.wa.length===0?r=e.ba()?0:1:!s.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function Rj(t,e){const n=we(t);let i=!1;for(const r of e){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.wa)l.Ca(r)&&(i=!0);a.ya=r}}i&&Mm(n)}function Dj(t,e,n){const i=we(t),r=i.queries.get(e);if(r)for(const s of r.wa)s.onError(n);i.queries.delete(e)}function Mm(t){t.Da.forEach(e=>{e.next()})}var Lp,F_;(F_=Lp||(Lp={})).Fa="default",F_.Cache="cache";class Om{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Pa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Lp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.key=e}}class TS{constructor(e){this.key=e}}class Mj{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ke(),this.mutatedKeys=ke(),this.Xa=qE(e),this.eu=new _a(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new q_,r=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((p,m)=>{const f=r.get(p),y=qd(this.query,m)?m:null,S=!!f&&this.mutatedKeys.has(f.key),D=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let j=!1;f&&y?f.data.isEqual(y.data)?S!==D&&(i.track({type:3,doc:y}),j=!0):this.iu(f,y)||(i.track({type:2,doc:y}),j=!0,(c&&this.Xa(y,c)>0||d&&this.Xa(y,d)<0)&&(l=!0)):!f&&y?(i.track({type:0,doc:y}),j=!0):f&&!y&&(i.track({type:1,doc:f}),j=!0,(c||d)&&(l=!0)),j&&(y?(a=a.add(y),s=D?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),i.track({type:1,doc:p})}return{eu:a,ru:i,Ds:l,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const a=e.ru.pa();a.sort((p,m)=>function(y,S){const D=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{At:j})}};return D(y)-D(S)}(p.type,m.type)||this.Xa(p.doc,m.doc)),this.su(i),r=r!=null&&r;const l=n&&!r?this.ou():[],c=this.Za.size===0&&this.current&&!r?1:0,d=c!==this.Ya;return this.Ya=c,a.length!==0||d?{snapshot:new Pa(this.query,e.eu,s,a,e.mutatedKeys,c===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new q_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ke(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const n=[];return e.forEach(i=>{this.Za.has(i)||n.push(new TS(i))}),this.Za.forEach(i=>{e.has(i)||n.push(new xS(i))}),n}uu(e){this.Ha=e.qs,this.Za=ke();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Pa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const jm="SyncEngine";class Oj{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class jj{constructor(e){this.key=e,this.lu=!1}}class kj{constructor(e,n,i,r,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new Vs(l=>BE(l),Bd),this.Tu=new Map,this.Iu=new Set,this.du=new ut(he.comparator),this.Eu=new Map,this.Au=new _m,this.Ru={},this.Vu=new Map,this.mu=Va.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function Nj(t,e,n=!0){const i=CS(t);let r;const s=i.Pu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.cu()):r=await ES(i,e,n,!0),r}async function Vj(t,e){const n=CS(t);await ES(n,e,!0,!1)}async function ES(t,e,n,i){const r=await nj(t.localStore,ui(e)),s=r.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await Pj(t,e,s,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&gS(t.remoteStore,r),l}async function Pj(t,e,n,i,r){t.gu=(m,f,y)=>async function(D,j,T,x){let A=j.view.nu(T);A.Ds&&(A=await V_(D.localStore,j.query,!1).then(({documents:w})=>j.view.nu(w,A)));const M=x&&x.targetChanges.get(j.targetId),$=x&&x.targetMismatches.get(j.targetId)!=null,Q=j.view.applyChanges(A,D.isPrimaryClient,M,$);return $_(D,j.targetId,Q._u),Q.snapshot}(t,m,f,y);const s=await V_(t.localStore,e,!0),a=new Mj(e,s.qs),l=a.nu(s.documents),c=Xl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),d=a.applyChanges(l,t.isPrimaryClient,c);$_(t,n,d._u);const p=new Oj(e,n,a);return t.Pu.set(e,p),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),d.snapshot}async function Lj(t,e,n){const i=we(t),r=i.Pu.get(e),s=i.Tu.get(r.targetId);if(s.length>1)return i.Tu.set(r.targetId,s.filter(a=>!Bd(a,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Vp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Em(i.remoteStore,r.targetId),Up(i,r.targetId)}).catch(eo)):(Up(i,r.targetId),await Vp(i.localStore,r.targetId,!0))}async function Uj(t,e){const n=we(t),i=n.Pu.get(e),r=n.Tu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Em(n.remoteStore,i.targetId))}async function zj(t,e,n){const i=Yj(t);try{const r=await function(a,l){const c=we(a),d=it.now(),p=l.reduce((y,S)=>y.add(S.key),ke());let m,f;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=Gi(),D=ke();return c.Os.getEntries(y,p).next(j=>{S=j,S.forEach((T,x)=>{x.isValidDocument()||(D=D.add(T))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,S)).next(j=>{m=j;const T=[];for(const x of l){const A=nO(x,m.get(x.key).overlayedDocument);A!=null&&T.push(new Wr(x.key,A,jE(A.value.mapValue),Jn.exists(!0)))}return c.mutationQueue.addMutationBatch(y,d,T,l)}).next(j=>{f=j;const T=j.applyToLocalDocumentSet(m,D);return c.documentOverlayCache.saveOverlays(y,j.batchId,T)})}).then(()=>({batchId:f.batchId,changes:FE(m)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,c){let d=a.Ru[a.currentUser.toKey()];d||(d=new ut(De)),d=d.insert(l,c),a.Ru[a.currentUser.toKey()]=d}(i,r.batchId,n),await Zl(i,r.changes),await Qd(i.remoteStore)}catch(r){const s=Cm(r,"Failed to persist write");n.reject(s)}}async function SS(t,e){const n=we(t);try{const i=await ZO(n.localStore,e);e.targetChanges.forEach((r,s)=>{const a=n.Eu.get(s);a&&(qe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.lu=!0:r.modifiedDocuments.size>0?qe(a.lu,14607):r.removedDocuments.size>0&&(qe(a.lu,42227),a.lu=!1))}),await Zl(n,i,e)}catch(i){await eo(i)}}function G_(t,e,n){const i=we(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Pu.forEach((s,a)=>{const l=a.view.va(e);l.snapshot&&r.push(l.snapshot)}),function(a,l){const c=we(a);c.onlineState=l;let d=!1;c.queries.forEach((p,m)=>{for(const f of m.wa)f.va(l)&&(d=!0)}),d&&Mm(c)}(i.eventManager,e),r.length&&i.hu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Bj(t,e,n){const i=we(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Eu.get(e),s=r&&r.key;if(s){let a=new ut(he.comparator);a=a.insert(s,Jt.newNoDocument(s,Te.min()));const l=ke().add(s),c=new Gd(Te.min(),new Map,new ut(De),a,l);await SS(i,c),i.du=i.du.remove(s),i.Eu.delete(e),km(i)}else await Vp(i.localStore,e,!1).then(()=>Up(i,e,n)).catch(eo)}async function qj(t,e){const n=we(t),i=e.batch.batchId;try{const r=await JO(n.localStore,e);AS(n,i,null),wS(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Zl(n,r)}catch(r){await eo(r)}}async function Hj(t,e,n){const i=we(t);try{const r=await function(a,l){const c=we(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return c.mutationQueue.lookupMutationBatch(d,l).next(m=>(qe(m!==null,37113),p=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,p,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>c.localDocuments.getDocuments(d,p))})}(i.localStore,e);AS(i,e,n),wS(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Zl(i,r)}catch(r){await eo(r)}}function wS(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function AS(t,e,n){const i=we(t);let r=i.Ru[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function Up(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(i=>{t.Au.containsKey(i)||IS(t,i)})}function IS(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Em(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),km(t))}function $_(t,e,n){for(const i of n)i instanceof xS?(t.Au.addReference(i.key,e),Fj(t,i)):i instanceof TS?(ie(jm,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||IS(t,i.key)):me(19791,{yu:i})}function Fj(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(ie(jm,"New document in limbo: "+n),t.Iu.add(i),km(t))}function km(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new he(Je.fromString(e)),i=t.mu.next();t.Eu.set(i,new jj(n)),t.du=t.du.insert(n,i),gS(t.remoteStore,new yr(ui(zd(n.path)),i,"TargetPurposeLimboResolution",Pd.ue))}}async function Zl(t,e,n){const i=we(t),r=[],s=[],a=[];i.Pu.isEmpty()||(i.Pu.forEach((l,c)=>{a.push(i.gu(c,e,n).then(d=>{var p;if((d||n)&&i.isPrimaryClient){const m=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;i.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(d){r.push(d);const m=xm.Es(c.targetId,d);s.push(m)}}))}),await Promise.all(a),i.hu.J_(r),await async function(c,d){const p=we(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>G.forEach(d,f=>G.forEach(f.Is,y=>p.persistence.referenceDelegate.addReference(m,f.targetId,y)).next(()=>G.forEach(f.ds,y=>p.persistence.referenceDelegate.removeReference(m,f.targetId,y)))))}catch(m){if(!to(m))throw m;ie(Tm,"Failed to update sequence numbers: "+m)}for(const m of d){const f=m.targetId;if(!m.fromCache){const y=p.Fs.get(f),S=y.snapshotVersion,D=y.withLastLimboFreeSnapshotVersion(S);p.Fs=p.Fs.insert(f,D)}}}(i.localStore,s))}async function Gj(t,e){const n=we(t);if(!n.currentUser.isEqual(e)){ie(jm,"User change. New user:",e.toKey());const i=await dS(n.localStore,e);n.currentUser=e,function(s,a){s.Vu.forEach(l=>{l.forEach(c=>{c.reject(new ee(q.CANCELLED,a))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Zl(n,i.Bs)}}function $j(t,e){const n=we(t),i=n.Eu.get(e);if(i&&i.lu)return ke().add(i.key);{let r=ke();const s=n.Tu.get(e);if(!s)return r;for(const a of s){const l=n.Pu.get(a);r=r.unionWith(l.view.tu)}return r}}function CS(t){const e=we(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=SS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$j.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bj.bind(null,e),e.hu.J_=Rj.bind(null,e.eventManager),e.hu.pu=Dj.bind(null,e.eventManager),e}function Yj(t){const e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Hj.bind(null,e),e}class sd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$d(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return XO(this.persistence,new QO,e.initialUser,this.serializer)}Du(e){return new uS(bm.Vi,this.serializer)}bu(e){return new rj}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sd.provider={build:()=>new sd};class Qj extends sd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){qe(this.persistence.referenceDelegate instanceof id,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new jO(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new uS(i=>id.Vi(i,n),this.serializer)}}class zp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>G_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Gj.bind(null,this.syncEngine),await Aj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Cj}()}createDatastore(e){const n=$d(e.databaseInfo.databaseId),i=function(s){return new cj(s)}(e.databaseInfo);return function(s,a,l,c){return new fj(s,a,l,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,a,l){return new gj(i,r,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>G_(this.syncEngine,n,0),function(){return U_.C()?new U_:new sj}())}createSyncEngine(e,n){return function(r,s,a,l,c,d,p){const m=new kj(r,s,a,l,c,d);return p&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=we(r);ie(Rs,"RemoteStore shutting down."),s.Ia.add(5),await Jl(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}zp.provider={build:()=>new zp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Fi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr="FirestoreClient";class Kj{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Xt.UNAUTHENTICATED,this.clientId=lm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{ie(Hr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(ie(Hr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Cm(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function gf(t,e){t.asyncQueue.verifyOperationInProgress(),ie(Hr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await dS(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>{Pr("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{ie("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(r=>{Pr("Terminating Firestore due to IndexedDb database deletion failed",r)})}),t._offlineComponents=e}async function Y_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Wj(t);ie(Hr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>B_(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>B_(e.remoteStore,r)),t._onlineComponents=e}async function Wj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie(Hr,"Using user provided OfflineComponentProvider");try{await gf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===q.FAILED_PRECONDITION||r.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Pr("Error using user provided cache. Falling back to memory cache: "+n),await gf(t,new sd)}}else ie(Hr,"Using default OfflineComponentProvider"),await gf(t,new Qj(void 0));return t._offlineComponents}async function RS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie(Hr,"Using user provided OnlineComponentProvider"),await Y_(t,t._uninitializedComponentsProvider._online)):(ie(Hr,"Using default OnlineComponentProvider"),await Y_(t,new zp))),t._onlineComponents}function Xj(t){return RS(t).then(e=>e.syncEngine)}async function ad(t){const e=await RS(t),n=e.eventManager;return n.onListen=Nj.bind(null,e.syncEngine),n.onUnlisten=Lj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Vj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Uj.bind(null,e.syncEngine),n}function Jj(t,e,n={}){const i=new Vi;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,c,d){const p=new Nm({next:f=>{p.Ou(),a.enqueueAndForget(()=>Dm(s,m));const y=f.docs.has(l);!y&&f.fromCache?d.reject(new ee(q.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&f.fromCache&&c&&c.source==="server"?d.reject(new ee(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(f)},error:f=>d.reject(f)}),m=new Om(zd(l.path),p,{includeMetadataChanges:!0,ka:!0});return Rm(s,m)}(await ad(t),t.asyncQueue,e,n,i)),i.promise}function Zj(t,e,n={}){const i=new Vi;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,c,d){const p=new Nm({next:f=>{p.Ou(),a.enqueueAndForget(()=>Dm(s,m)),f.fromCache&&c.source==="server"?d.reject(new ee(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(f)},error:f=>d.reject(f)}),m=new Om(l,p,{includeMetadataChanges:!0,ka:!0});return Rm(s,m)}(await ad(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="firestore.googleapis.com",K_=!0;class W_{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MS,this.ssl=K_}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:K_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<MO)throw new ee(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DS((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ee(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ee(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ee(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kd{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new W_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new W_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new aM;switch(i.type){case"firstParty":return new uM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ee(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Q_.get(n);i&&(ie("ComponentProvider","Removing Datastore"),Q_.delete(n),i.terminate())}(this),Promise.resolve()}}function ek(t,e,n,i={}){var r;t=zn(t,Kd);const s=Wa(e),a=t._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;s&&(CT(`https://${c}`),RT("Firestore",!0)),a.host!==MS&&a.host!==c&&Pr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},a),{host:c,ssl:s,emulatorOptions:i});if(!ws(d,l)&&(t._setSettings(d),i.mockUserToken)){let p,m;if(typeof i.mockUserToken=="string")p=i.mockUserToken,m=Xt.MOCK_USER;else{p=MC(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new ee(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Xt(f)}t._authCredentials=new oM(new bE(p,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ki(this.firestore,e,this._query)}}class vt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vt(this.firestore,e,this._key)}toJSON(){return{type:vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Kl(n,vt._jsonSchema))return new vt(e,i||null,new he(Je.fromString(n.referencePath)))}}vt._jsonSchemaVersion="firestore/documentReference/1.0",vt._jsonSchema={type:It("string",vt._jsonSchemaVersion),referencePath:It("string")};class Mr extends Ki{constructor(e,n,i){super(e,n,zd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new he(e))}withConverter(e){return new Mr(this.firestore,e,this._path)}}function Pt(t,e,...n){if(t=Vt(t),TE("collection","path",e),t instanceof Kd){const i=Je.fromString(e,...n);return c_(i),new Mr(t,null,i)}{if(!(t instanceof vt||t instanceof Mr))throw new ee(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Je.fromString(e,...n));return c_(i),new Mr(t.firestore,null,i)}}function ei(t,e,...n){if(t=Vt(t),arguments.length===1&&(e=lm.newId()),TE("doc","path",e),t instanceof Kd){const i=Je.fromString(e,...n);return l_(i),new vt(t,null,new he(i))}{if(!(t instanceof vt||t instanceof Mr))throw new ee(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Je.fromString(e,...n));return l_(i),new vt(t.firestore,t instanceof Mr?t.converter:null,new he(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="AsyncQueue";class J_{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new fS(this,"async_queue_retry"),this.oc=()=>{const i=pf();i&&ie(X_,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=pf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=pf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Vi;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!to(e))throw e;ie(X_,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,Fi("INTERNAL UNHANDLED ERROR: ",Z_(i)),i}).then(i=>(this.nc=!1,i))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const r=Im.createAndSchedule(this,e,n,i,s=>this.lc(s));return this.ec.push(r),r}ac(){this.tc&&me(47125,{hc:Z_(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Z_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Fr extends Kd{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new J_,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new J_(e),this._firestoreClient=void 0,await e}}}function tk(t,e){const n=typeof t=="object"?t:jT(),i=typeof t=="string"?t:Xu,r=Kg(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=RC("firestore");s&&ek(r,...s)}return r}function Wd(t){if(t._terminated)throw new ee(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||nk(t),t._firestoreClient}function nk(t){var e,n,i;const r=t._freezeSettings(),s=function(l,c,d,p){return new AM(l,c,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,DS(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new Kj(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pn($t.fromBase64String(e))}catch(n){throw new ee(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pn($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Kl(e,Pn._jsonSchema))return Pn.fromBase64String(e.bytes)}}Pn._jsonSchemaVersion="firestore/bytes/1.0",Pn._jsonSchema={type:It("string",Pn._jsonSchemaVersion),bytes:It("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hi._jsonSchemaVersion}}static fromJSON(e){if(Kl(e,hi._jsonSchema))return new hi(e.latitude,e.longitude)}}hi._jsonSchemaVersion="firestore/geoPoint/1.0",hi._jsonSchema={type:It("string",hi._jsonSchemaVersion),latitude:It("number"),longitude:It("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:fi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Kl(e,fi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new fi(e.vectorValues);throw new ee(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fi._jsonSchemaVersion="firestore/vectorValue/1.0",fi._jsonSchema={type:It("string",fi._jsonSchemaVersion),vectorValues:It("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=/^__.*__$/;class rk{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Wr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wl(e,this.data,n,this.fieldTransforms)}}class OS{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Wr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function jS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ec:t})}}class Vm{constructor(e,n,i,r,s,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Vm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return od(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(jS(this.Ec)&&ik.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class sk{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||$d(e)}Dc(e,n,i,r=!1){return new Vm({Ec:e,methodName:n,bc:i,path:Ht.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pm(t){const e=t._freezeSettings(),n=$d(t._databaseId);return new sk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ak(t,e,n,i,r,s={}){const a=t.Dc(s.merge||s.mergeFields?2:0,e,n,r);Um("Data must be an object, but it was:",a,i);const l=kS(i,a);let c,d;if(s.merge)c=new bn(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const m of s.mergeFields){const f=Bp(e,m,n);if(!a.contains(f))throw new ee(q.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);VS(p,f)||p.push(f)}c=new bn(p),d=a.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=a.fieldTransforms;return new rk(new dn(l),c,d)}class Zd extends Jd{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zd}}class Lm extends Jd{_toFieldTransform(e){return new JM(e.path,new Al)}isEqual(e){return e instanceof Lm}}function ok(t,e,n,i){const r=t.Dc(1,e,n);Um("Data must be an object, but it was:",r,i);const s=[],a=dn.empty();Kr(i,(c,d)=>{const p=zm(e,c,n);d=Vt(d);const m=r.gc(p);if(d instanceof Zd)s.push(p);else{const f=ec(d,m);f!=null&&(s.push(p),a.set(p,f))}});const l=new bn(s);return new OS(a,l,r.fieldTransforms)}function lk(t,e,n,i,r,s){const a=t.Dc(1,e,n),l=[Bp(e,i,n)],c=[r];if(s.length%2!=0)throw new ee(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)l.push(Bp(e,s[f])),c.push(s[f+1]);const d=[],p=dn.empty();for(let f=l.length-1;f>=0;--f)if(!VS(d,l[f])){const y=l[f];let S=c[f];S=Vt(S);const D=a.gc(y);if(S instanceof Zd)d.push(y);else{const j=ec(S,D);j!=null&&(d.push(y),p.set(y,j))}}const m=new bn(d);return new OS(p,m,a.fieldTransforms)}function ck(t,e,n,i=!1){return ec(n,t.Dc(i?4:3,e))}function ec(t,e){if(NS(t=Vt(t)))return Um("Unsupported field value:",e,t),kS(t,e);if(t instanceof Jd)return function(i,r){if(!jS(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let c=ec(l,r.yc(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Vt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return KM(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=it.fromDate(i);return{timestampValue:nd(r.serializer,s)}}if(i instanceof it){const s=new it(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:nd(r.serializer,s)}}if(i instanceof hi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Pn)return{bytesValue:nS(r.serializer,i._byteString)};if(i instanceof vt){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:vm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof fi)return function(a,l){return{mapValue:{fields:{[ME]:{stringValue:OE},[Ju]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.wc("VectorValues must only contain numeric values.");return pm(l.serializer,d)})}}}}}}(i,r);throw r.wc(`Unsupported field value: ${Vd(i)}`)}(t,e)}function kS(t,e){const n={};return wE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Kr(t,(i,r)=>{const s=ec(r,e.Vc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function NS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof it||t instanceof hi||t instanceof Pn||t instanceof vt||t instanceof Jd||t instanceof fi)}function Um(t,e,n){if(!NS(n)||!EE(n)){const i=Vd(n);throw i==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+i)}}function Bp(t,e,n){if((e=Vt(e))instanceof Xd)return e._internalPath;if(typeof e=="string")return zm(t,e);throw od("Field path arguments must be of type string or ",t,!1,void 0,n)}const uk=new RegExp("[~\\*/\\[\\]]");function zm(t,e,n){if(e.search(uk)>=0)throw od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xd(...e.split("."))._internalPath}catch{throw od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function od(t,e,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${i}`),a&&(c+=` in document ${r}`),c+=")"),new ee(q.INVALID_ARGUMENT,l+t+c)}function VS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(eh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dk extends PS{data(){return super.data()}}function eh(t,e){return typeof e=="string"?zm(t,e):e instanceof Xd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bm{}class qm extends Bm{}function In(t,e,...n){let i=[];e instanceof Bm&&i.push(e),i=i.concat(n),function(s){const a=s.filter(c=>c instanceof Hm).length,l=s.filter(c=>c instanceof th).length;if(a>1||a>0&&l>0)throw new ee(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class th extends qm{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new th(e,n,i)}_apply(e){const n=this._parse(e);return zS(e._query,n),new Ki(e.firestore,e.converter,Mp(e._query,n))}_parse(e){const n=Pm(e.firestore);return function(s,a,l,c,d,p,m){let f;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new ee(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){nb(m,p);const S=[];for(const D of m)S.push(tb(c,s,D));f={arrayValue:{values:S}}}else f=tb(c,s,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||nb(m,p),f=ck(l,a,m,p==="in"||p==="not-in");return wt.create(d,p,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Cn(t,e,n){const i=e,r=eh("where",t);return th._create(r,i,n)}class Hm extends Bm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Hm(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Zn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let a=r;const l=s.getFlattenedFilters();for(const c of l)zS(a,c),a=Mp(a,c)}(e._query,n),new Ki(e.firestore,e.converter,Mp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fm extends qm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Fm(e,n)}_apply(e){const n=function(r,s,a){if(r.startAt!==null)throw new ee(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ee(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wl(s,a)}(e._query,this._field,this._direction);return new Ki(e.firestore,e.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new no(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function US(t,e="asc"){const n=e,i=eh("orderBy",t);return Fm._create(i,n)}class Gm extends qm{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Gm(e,n,i)}_apply(e){return new Ki(e.firestore,e.converter,ed(e._query,this._limit,this._limitType))}}function hk(t){return Gm._create("limit",t,"F")}function tb(t,e,n){if(typeof(n=Vt(n))=="string"){if(n==="")throw new ee(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zE(e)&&n.indexOf("/")!==-1)throw new ee(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Je.fromString(n));if(!he.isDocumentKey(i))throw new ee(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return y_(t,new he(i))}if(n instanceof vt)return y_(t,n._key);throw new ee(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vd(n)}.`)}function nb(t,e){if(!Array.isArray(t)||t.length===0)throw new ee(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zS(t,e){const n=function(r,s){for(const a of r)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ee(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class fk{convertValue(e,n="none"){switch(Br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Kr(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n[Ju].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>mt(a.doubleValue));return new fi(s)}convertGeoPoint(e){return new hi(mt(e.latitude),mt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Ud(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Tl(e));default:return null}}convertTimestamp(e){const n=Ur(e);return new it(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Je.fromString(e);qe(lS(i),9688,{name:e});const r=new El(i.get(1),i.get(3)),s=new he(i.popFirst(5));return r.isEqual(n)||Fi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class ko{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ys extends PS{constructor(e,n,i,r,s,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new uu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(eh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ys._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ys._jsonSchemaVersion="firestore/documentSnapshot/1.0",ys._jsonSchema={type:It("string",ys._jsonSchemaVersion),bundleSource:It("string","DocumentSnapshot"),bundleName:It("string"),bundle:It("string")};class uu extends ys{data(e={}){return super.data(e)}}class vs{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new ko(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new uu(this._firestore,this._userDataWriter,i.key,i,new ko(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const c=new uu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ko(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new uu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ko(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,p=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),p=a.indexOf(l.doc.key)),{type:gk(l.type),doc:c,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=vs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=lm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function gk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(t){t=zn(t,vt);const e=zn(t.firestore,Fr);return Jj(Wd(e),t._key).then(n=>qS(e,t,n))}vs._jsonSchemaVersion="firestore/querySnapshot/1.0",vs._jsonSchema={type:It("string",vs._jsonSchemaVersion),bundleSource:It("string","QuerySnapshot"),bundleName:It("string"),bundle:It("string")};class Ym extends fk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,n)}}function ti(t){t=zn(t,Ki);const e=zn(t.firestore,Fr),n=Wd(e),i=new Ym(e);return LS(t._query),Zj(n,t._query).then(r=>new vs(e,i,t,r))}function ro(t,e,n,...i){t=zn(t,vt);const r=zn(t.firestore,Fr),s=Pm(r);let a;return a=typeof(e=Vt(e))=="string"||e instanceof Xd?lk(s,"updateDoc",t._key,e,n,i):ok(s,"updateDoc",t._key,e),Qm(r,[a.toMutation(t._key,Jn.exists(!0))])}function mk(t){return Qm(zn(t.firestore,Fr),[new gm(t._key,Jn.none())])}function tc(t,e){const n=zn(t.firestore,Fr),i=ei(t),r=pk(t.converter,e);return Qm(n,[ak(Pm(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Jn.exists(!1))]).then(()=>i)}function BS(t,...e){var n,i,r;t=Vt(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||eb(e[a])||(s=e[a++]);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(eb(e[a])){const m=e[a];e[a]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[a+1]=(i=m.error)===null||i===void 0?void 0:i.bind(m),e[a+2]=(r=m.complete)===null||r===void 0?void 0:r.bind(m)}let c,d,p;if(t instanceof vt)d=zn(t.firestore,Fr),p=zd(t._key.path),c={next:m=>{e[a]&&e[a](qS(d,t,m))},error:e[a+1],complete:e[a+2]};else{const m=zn(t,Ki);d=zn(m.firestore,Fr),p=m._query;const f=new Ym(d);c={next:y=>{e[a]&&e[a](new vs(d,f,m,y))},error:e[a+1],complete:e[a+2]},LS(t._query)}return function(f,y,S,D){const j=new Nm(D),T=new Om(y,j,S);return f.asyncQueue.enqueueAndForget(async()=>Rm(await ad(f),T)),()=>{j.Ou(),f.asyncQueue.enqueueAndForget(async()=>Dm(await ad(f),T))}}(Wd(d),p,l,c)}function Qm(t,e){return function(i,r){const s=new Vi;return i.asyncQueue.enqueueAndForget(async()=>zj(await Xj(i),r,s)),s.promise}(Wd(t),e)}function qS(t,e,n){const i=n.docs.get(e._key),r=new Ym(t);return new ys(t,r,e._key,i,new ko(n.hasPendingWrites,n.fromCache),e.converter)}function $i(){return new Lm("serverTimestamp")}(function(e,n=!0){(function(r){Za=r})(Xa),Ma(new As("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new Fr(new lM(i.getProvider("auth-internal")),new dM(a,i.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ee(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new El(d.options.projectId,p)}(a,r),a);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Rr(i_,r_,e),Rr(i_,r_,"esm2017")})();const yk={apiKey:"AIzaSyAp04A2dazyYPMZ2XzRb3ZVAGpd2rn1u3g",authDomain:"haang-out-61e3d.firebaseapp.com",projectId:"haang-out-61e3d",storageBucket:"haang-out-61e3d.firebasestorage.app",messagingSenderId:"364450714958",appId:"1:364450714958:web:5959bb373b2cee8f5cfa1f",measurementId:"G-VWS3SX4VX6"},HS=OT(yk),nc=rM(HS),Ge=tk(HS),FS=new Ii,GS=async()=>{try{const e=(await f4(nc,FS)).user;let n=null;if(e.photoURL)try{let r=e.photoURL,s;try{s=await fetch(r,{mode:"cors"})}catch{r=e.photoURL.replace("https://","http://"),s=await fetch(r,{mode:"cors"})}if(s.ok){const a=await s.blob();n=await new Promise(l=>{const c=new FileReader;c.onloadend=()=>l(c.result),c.readAsDataURL(a)})}}catch(r){console.error("Failed to fetch profile image:",r),n=e.photoURL}const i={email:e.email,name:e.displayName,displayName:e.displayName,uid:e.uid,photo:n||e.photoURL,phone:e.phoneNumber||""};return localStorage.setItem("hanggOutUser",JSON.stringify(i)),i}catch(t){throw console.error("Google sign-in error:",t),t}},vk=()=>nc.currentUser,$S=()=>{const t=localStorage.getItem("hanggOutUser");return t?JSON.parse(t):null},qp=async()=>{try{await YD(nc),localStorage.removeItem("hanggOutUser")}catch(t){throw console.error("Logout error:",t),t}},_k=Object.freeze(Object.defineProperty({__proto__:null,auth:nc,db:Ge,getCurrentUser:vk,getCurrentUserData:$S,googleProvider:FS,logout:qp,onAuthStateChanged:tE,signInWithGoogle:GS},Symbol.toStringTag,{value:"Module"})),Xr=()=>{const[t,e]=N.useState(null),[n,i]=N.useState(!0);return N.useEffect(()=>{const r=tE(nc,s=>{if(s){const l=$S()||{email:s.email,name:s.displayName,displayName:s.displayName,uid:s.uid,photo:s.photoURL,phone:s.phoneNumber||""};e(l)}else e(null);i(!1)});return()=>r()},[]),{user:t,loading:n}},bk="/HanggOut/assets/logo-zv8Z-DiF.png";function nh(){const t=Rn(),[e,n]=hu.useState(!1),[i,r]=hu.useState(""),s=async()=>{try{n(!0),r(""),await GS(),t("/"),window.location.reload()}catch(a){r("Failed to sign in with Google. Please try again."),console.error("Sign in error:",a)}finally{n(!1)}};return u.jsx("div",{style:tr.container,children:u.jsxs("div",{style:tr.loginBox,children:[u.jsx("img",{src:bk,alt:"Hangg-Out",style:tr.logo}),u.jsx("h1",{style:tr.title,children:"Welcome to Hangg-Out"}),u.jsx("p",{style:tr.subtitle,children:"Find your people. Create vacants. Have fun together."}),i&&u.jsx("p",{style:tr.errorMsg,children:i}),u.jsx("button",{onClick:s,disabled:e,style:tr.googleBtn,children:e?"Signing in...":" Sign in with Google"}),u.jsx("p",{style:tr.helpText,children:"We only use your Google account for secure authentication. No passwords needed!"})]})})}const tr={container:{minHeight:"70vh",display:"flex",alignItems:"center",justifyContent:"center",background:"radial-gradient(circle at 50% 45%, rgba(129, 129, 129, 0.51) 0% 8%, transparent 10%), conic-gradient(from -90deg at 50% 45%, rgba(67, 139, 255, 0.92) 0deg 120deg, black 120deg 126deg, rgba(200,200,200,0.9) 126deg 246deg, black 246deg 252deg, rgba(255, 94, 142, 0.92) 252deg 360deg), radial-gradient(circle at 50% 45%, black 0% 6%, rgba(255,220,60,1) 6% 11%, transparent 12%), radial-gradient(circle at 50% 45%, rgba(255,255,255,0.02) 0px, rgba(255,255,255,0.02) 100%)",padding:"20px",margin:"0 auto"},loginBox:{background:"var(--bg-card)",border:"2px solid var(--yellow)",borderRadius:"var(--radius)",padding:"40px",maxWidth:"400px",width:"100%",textAlign:"center",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.28), 0 0 18px rgba(255, 201, 60, 0.08)",margin:"auto"},logo:{width:"80px",height:"80px",marginBottom:"20px"},title:{fontSize:"24px",fontWeight:"bold",marginBottom:"12px",color:"var(--yellow)",whiteSpace:"nowrap",textAlign:"center"},subtitle:{fontSize:"13px",fontWeight:"400",color:"var(--gray)",marginBottom:"32px"},googleBtn:{width:"100%",padding:"14px",background:"var(--yellow)",color:"var(--bg-black)",border:"none",borderRadius:"var(--radius)",fontWeight:"600",fontSize:"16px",cursor:"pointer",transition:"background 0.3s ease",marginBottom:"20px",disabled:{opacity:.6,cursor:"not-allowed"}},helpText:{fontSize:"12px",color:"var(--gray)",margin:0},errorMsg:{color:"#ff6b6b",marginBottom:"20px",padding:"12px",background:"rgba(255, 107, 107, 0.1)",borderRadius:"var(--radius)",fontSize:"14px"}},xk=async t=>{try{console.log("Fetching notifications for user:",t);const e=In(Pt(Ge,"notifications"),Cn("recipientUid","==",t)),i=(await ti(e)).docs.map(r=>({id:r.id,...r.data()}));return i.sort((r,s)=>{var c,d;const a=((c=r.createdAt)==null?void 0:c.seconds)||0;return(((d=s.createdAt)==null?void 0:d.seconds)||0)-a}),console.log("Found notifications:",i.length),i}catch(e){throw console.error("Error getting notifications:",e),e}},Tk=async(t,e=null)=>{try{console.log(" Marking notification as read:",t,"for user:",e);const n=ei(Ge,"notifications",t);await ro(n,{read:!0}),e?(console.log(" Triggering cleanup for user:",e),await YS(e)):console.log(" No userId provided, skipping cleanup")}catch(n){throw console.error("Error marking notification as read:",n),n}},YS=async t=>{try{console.log(" Starting cleanup for user:",t);const e=In(Pt(Ge,"notifications"),Cn("recipientUid","==",t),Cn("read","==",!0)),i=(await ti(e)).docs.map(r=>({id:r.id,...r.data()}));if(console.log(` Found ${i.length} read notifications`),i.sort((r,s)=>{var c,d;const a=((c=r.createdAt)==null?void 0:c.seconds)||0;return(((d=s.createdAt)==null?void 0:d.seconds)||0)-a}),i.length>5){const r=i.slice(5);console.log(` Deleting ${r.length} old notifications`);const s=r.map(a=>(console.log(`Deleting notification: ${a.id}`),mk(ei(Ge,"notifications",a.id))));await Promise.all(s),console.log(` Successfully deleted ${r.length} old read notifications`)}else console.log(" No cleanup needed, less than 5 read notifications")}catch(e){console.error(" Error cleaning up old notifications:",e)}},Ek=async t=>{try{const e=In(Pt(Ge,"notifications"),Cn("recipientUid","==",t),Cn("read","==",!1)),i=(await ti(e)).docs.map(r=>ro(ei(Ge,"notifications",r.id),{read:!0}));await Promise.all(i),await YS(t)}catch(e){throw console.error("Error marking all notifications as read:",e),e}},La=async(t,e,n="info",i={})=>{try{const r={recipientUid:t,message:e,type:n,read:!1,createdAt:$i(),...i},s=await tc(Pt(Ge,"notifications"),r);return console.log("Notification created:",s.id),s.id}catch(r){throw console.error("Error creating notification:",r),r}},Sk="/HanggOut/assets/notification1-DZGVwO_H.png",wk="/HanggOut/assets/notification2-CWMX1R4A.png";function Ak(){const{user:t}=Xr(),e=Rn(),[n,i]=N.useState([]),[r,s]=N.useState(!1),[a,l]=N.useState(0),c=N.useRef(null),d=N.useRef(null);N.useEffect(()=>{if(t!=null&&t.uid){console.log("Setting up notifications listener for user:",t.uid),p();const S=In(Pt(Ge,"notifications"),Cn("recipientUid","==",t.uid));d.current=BS(S,D=>{console.log("Notifications snapshot received:",D.docs.length,"docs");const j=D.docs.map(T=>{const x={id:T.id,...T.data()};return console.log("Notification:",x),x});j.sort((T,x)=>{var $,Q;const A=(($=T.createdAt)==null?void 0:$.seconds)||0;return(((Q=x.createdAt)==null?void 0:Q.seconds)||0)-A}),i(j),l(j.filter(T=>!T.read).length)},D=>{console.error("Error listening to notifications:",D),setTimeout(()=>p(),1e3)})}return()=>{d.current&&d.current()}},[t==null?void 0:t.uid]),N.useEffect(()=>{const S=D=>{c.current&&!c.current.contains(D.target)&&s(!1)};return r&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[r]);const p=async()=>{if(t!=null&&t.uid)try{console.log("Loading notifications manually for user:",t.uid);const S=await xk(t.uid);console.log("Manual load result:",S.length,"notifications"),i(S),l(S.filter(D=>!D.read).length)}catch(S){console.error("Error loading notifications:",S)}},m=async S=>{try{console.log(" Marking notification as read:",S,"for user:",t.uid),await Tk(S,t.uid),i(D=>D.map(j=>j.id===S?{...j,read:!0}:j)),l(D=>Math.max(0,D-1)),console.log(" Notification marked as read successfully")}catch(D){console.error("Error marking notification as read:",D)}},f=async()=>{try{await Ek(t.uid),i(S=>S.map(D=>({...D,read:!0}))),l(0)}catch(S){console.error("Error marking all notifications as read:",S)}},y=async S=>{S.read||(await m(S.id),s(!1),S.requestId&&S.vacantId?S.message.includes("New request to join")?e(`/manage-vacant/${S.vacantId}`):(S.message.includes("accepted")||S.message.includes("declined"))&&e("/your-requests"):S.message.includes("accepted")||S.message.includes("declined")?e("/your-requests"):S.chatId&&S.message.includes("You got a message from")&&(S.creatorUid===t.uid?e(`/manage-vacant/${S.vacantId}?openChat=${S.chatId}`):e(`/your-requests?openChat=${S.chatId}`)))};return t?u.jsxs("div",{ref:c,style:Wt.container,children:[u.jsxs("div",{style:Wt.iconContainer,onClick:()=>s(!r),children:[u.jsx("img",{src:a>0?wk:Sk,alt:"notifications",style:Wt.icon}),a>0&&u.jsx("span",{style:Wt.badge,children:a})]}),r&&u.jsxs("div",{style:Wt.dropdown,children:[u.jsxs("div",{style:Wt.header,children:[u.jsx("h3",{style:Wt.title,children:"Notifications"}),a>0&&u.jsx("button",{style:Wt.markAllBtn,onClick:f,children:"Mark all read"})]}),u.jsx("div",{style:Wt.note,children:"Click on unread notifications to redirect"}),u.jsx("div",{style:Wt.list,children:n.length===0?u.jsx("div",{style:Wt.empty,children:"No notifications"}):n.map(S=>u.jsxs("div",{style:{...Wt.item,...S.read?Wt.readItem:Wt.unreadItem},onClick:()=>y(S),children:[u.jsx("div",{style:{...Wt.message,color:S.read?"#999":"var(--white)"},children:S.message}),u.jsx("div",{style:Wt.timestamp,children:S.createdAt?new Date(S.createdAt.seconds*1e3).toLocaleDateString():"Recently"})]},S.id))})]})]}):null}const Wt={container:{position:"relative"},iconContainer:{position:"relative",cursor:"pointer",padding:"8px"},icon:{width:"24px",height:"24px"},badge:{position:"absolute",top:"2px",right:"2px",background:"#ff4444",color:"white",borderRadius:"50%",width:"18px",height:"18px",fontSize:"12px",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center"},dropdown:{position:"absolute",top:"100%",right:0,width:"320px",background:"var(--bg-card)",border:"1px solid var(--border)",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",zIndex:1e3,maxHeight:"400px",overflow:"hidden"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:"1px solid var(--border)"},title:{margin:0,color:"var(--yellow)",fontSize:"16px"},markAllBtn:{background:"none",border:"none",color:"var(--yellow)",cursor:"pointer",fontSize:"12px"},note:{padding:"8px 16px",fontSize:"11px",color:"var(--gray)",fontStyle:"italic",borderBottom:"1px solid var(--border)"},list:{maxHeight:"300px",overflowY:"auto"},empty:{padding:"20px",textAlign:"center",color:"var(--gray)"},item:{padding:"12px 16px",borderBottom:"1px solid var(--border)",cursor:"pointer",transition:"background 0.2s"},unreadItem:{background:"rgba(255, 214, 10, 0.1)"},readItem:{opacity:.6,background:"rgba(255, 255, 255, 0.02)"},message:{color:"var(--white)",fontSize:"14px",marginBottom:"4px"},timestamp:{color:"var(--gray)",fontSize:"12px"}},mf="/HanggOut/assets/logo-zv8Z-DiF.png",ib="/HanggOut/assets/createvacant-Cm9CeOLC.png",Ik="/HanggOut/assets/home-emfsPqjx.png",du="/HanggOut/assets/profile-BLAW-WPW.png",Ua="/HanggOut/assets/calender-D5apKRfR.png",Gr="/HanggOut/assets/clock-CGMBtdpI.png",rb="/HanggOut/assets/logout-BqfeO_lC.png",ld="/HanggOut/assets/accepted-CEtIYfJ7.png";function Ck(){const t=Rn(),{user:e}=Xr(),[n,i]=N.useState(!1),[r,s]=N.useState(!1),[a,l]=N.useState(!1),c=N.useRef(null);N.useEffect(()=>{function f(y){c.current&&!c.current.contains(y.target)&&i(!1)}return document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[]),N.useEffect(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[a]);const d=()=>{l(!a)},p=f=>{l(!1),t(f)},m=async()=>{try{await qp(),i(!1),t("/login")}catch(f){console.error("Logout error:",f),t("/login")}};return u.jsxs("header",{style:ce.header,children:[u.jsx("style",{children:`
        .btn-login { position: relative; overflow: hidden; }
        .btn-login .btn-fill { position: absolute; inset: 0; background: var(--yellow); transform-origin: left; transform: scaleX(0); transition: transform 0.36s cubic-bezier(.2,.8,.2,1); z-index: 0; }
        .btn-login .btn-label { position: relative; z-index: 2; color: var(--yellow); transition: color 0.18s ease; }
        .btn-login:hover .btn-fill { transform: scaleX(1); }
        .btn-login:hover .btn-label { color: var(--bg-black); }
      `}),u.jsxs("div",{className:"container",style:ce.headerContent,children:[u.jsx("button",{style:ce.hamburgerButton,onClick:d,"aria-label":"Toggle Menu","aria-expanded":a,children:u.jsx("span",{style:ce.hamburgerIcon,children:""})}),u.jsxs("div",{style:ce.logo,onClick:()=>t("/"),children:[u.jsx("img",{src:mf,alt:"Hangg Out",style:ce.logoImg}),u.jsx("span",{style:ce.logoText,children:"Hangg Out"})]}),u.jsx("nav",{style:ce.nav,children:e?u.jsxs("div",{style:ce.userSection,children:[u.jsx(Ak,{}),u.jsxs("div",{style:ce.profileSection,ref:c,children:[u.jsxs("button",{style:{...ce.profileBtn,...n?ce.profileBtnActive:{}},onClick:()=>i(!n),children:[u.jsx("img",{src:e.photo||mf,alt:e.name,style:ce.profileImg}),u.jsx("span",{children:e.name}),u.jsx("span",{style:{...ce.arrowIcon,transform:n?"rotate(180deg)":"rotate(0deg)"},children:""})]}),n&&u.jsxs("div",{style:ce.dropdown,children:[u.jsx("div",{style:ce.dropdownArrow}),u.jsxs("button",{style:ce.dropdownItem,onClick:()=>{t("/profile"),i(!1)},onMouseEnter:f=>{f.currentTarget.style.background="rgba(255, 214, 10, 0.1)",f.currentTarget.style.paddingLeft="24px"},onMouseLeave:f=>{f.currentTarget.style.background="none",f.currentTarget.style.paddingLeft="20px"},children:[u.jsx("img",{src:du,alt:"Profile",style:ce.itemIcon}),u.jsx("span",{children:"Profile"})]}),u.jsxs("button",{style:ce.dropdownItem,onClick:()=>{t("/my-vacants"),i(!1)},onMouseEnter:f=>{f.currentTarget.style.background="rgba(255, 214, 10, 0.1)",f.currentTarget.style.paddingLeft="24px"},onMouseLeave:f=>{f.currentTarget.style.background="none",f.currentTarget.style.paddingLeft="20px"},children:[u.jsx("img",{src:Ua,alt:"My Vacants",style:ce.itemIcon}),u.jsx("span",{children:"My Vacants"})]}),u.jsxs("button",{style:ce.dropdownItem,onClick:()=>{t("/your-requests"),i(!1)},onMouseEnter:f=>{f.currentTarget.style.background="rgba(255, 214, 10, 0.1)",f.currentTarget.style.paddingLeft="24px"},onMouseLeave:f=>{f.currentTarget.style.background="none",f.currentTarget.style.paddingLeft="20px"},children:[u.jsx("img",{src:ld,alt:"My Requests",style:ce.itemIcon}),u.jsx("span",{children:"My Requests"})]}),u.jsxs("button",{style:ce.dropdownItem,onClick:()=>{t("/create-vacant"),i(!1)},onMouseEnter:f=>{f.currentTarget.style.background="rgba(255, 214, 10, 0.1)",f.currentTarget.style.paddingLeft="24px"},onMouseLeave:f=>{f.currentTarget.style.background="none",f.currentTarget.style.paddingLeft="20px"},children:[u.jsx("img",{src:ib,alt:"Create Vacant",style:ce.itemIcon}),u.jsx("span",{children:"Create Vacant"})]}),u.jsx("div",{style:ce.divider}),u.jsxs("button",{style:ce.logoutItem,onClick:m,onMouseEnter:f=>{f.currentTarget.style.background="linear-gradient(135deg, #ff4757 0%, #ff6348 100%)",f.currentTarget.style.paddingLeft="24px",f.currentTarget.style.boxShadow="0 4px 15px rgba(255, 71, 87, 0.4)";const y=f.currentTarget.querySelector("[data-logout-icon]");y&&(y.style.transform="rotate(20deg) scale(1.15)")},onMouseLeave:f=>{f.currentTarget.style.background="rgba(255, 107, 107, 0.08)",f.currentTarget.style.paddingLeft="20px",f.currentTarget.style.boxShadow="none";const y=f.currentTarget.querySelector("[data-logout-icon]");y&&(y.style.transform="rotate(0deg) scale(1)")},children:[u.jsx("img",{src:rb,alt:"Logout",style:ce.logoutIcon,"data-logout-icon":!0}),u.jsx("span",{style:ce.logoutText,children:"Logout"})]})]})]})]}):u.jsxs("button",{className:"btn-login",style:ce.btnLogin,onClick:()=>s(!0),children:[u.jsx("span",{className:"btn-fill","aria-hidden":"true",style:{borderRadius:"var(--radius)"}}),u.jsx("span",{className:"btn-label",style:{position:"relative",zIndex:2},children:"Login"})]})})]}),u.jsx("div",{style:{...ce.overlay,opacity:a?1:0,pointerEvents:a?"auto":"none"},onClick:()=>l(!1)}),u.jsxs("div",{style:{...ce.sidebar,transform:a?"translateX(0)":"translateX(-100%)"},children:[u.jsxs("div",{style:ce.sidebarHeader,children:[u.jsxs("div",{style:ce.logoContainer,children:[u.jsx("img",{src:mf,alt:"Hangg-Out",style:ce.logoImgSidebar}),u.jsx("h2",{style:ce.logoTextSidebar,children:"Hangg-Out"})]}),u.jsx("button",{style:ce.closeButton,onClick:()=>l(!1),"aria-label":"Close Menu",children:""})]}),u.jsxs("nav",{style:ce.sidebarNav,children:[u.jsxs("button",{onClick:()=>p("/"),style:ce.navItem,onMouseEnter:f=>{f.currentTarget.style.background="rgba(255, 214, 10, 0.1)",f.currentTarget.style.transform="translateX(8px)"},onMouseLeave:f=>{f.currentTarget.style.background="transparent",f.currentTarget.style.transform="translateX(0)"},children:[u.jsx("img",{src:Ik,alt:"Home",style:ce.navIcon}),u.jsx("span",{children:"Home"})]}),e?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:()=>p("/profile"),style:ce.navItem,onMouseEnter:f=>{f.currentTarget.style.background="rgba(255, 214, 10, 0.1)",f.currentTarget.style.transform="translateX(8px)"},onMouseLeave:f=>{f.currentTarget.style.background="transparent",f.currentTarget.style.transform="translateX(0)"},children:[u.jsx("img",{src:du,alt:"Profile",style:ce.navIcon}),u.jsx("span",{children:"Profile"})]}),u.jsxs("button",{onClick:()=>p("/my-vacants"),style:ce.navItem,onMouseEnter:f=>{f.currentTarget.style.background="rgba(255, 214, 10, 0.1)",f.currentTarget.style.transform="translateX(8px)"},onMouseLeave:f=>{f.currentTarget.style.background="transparent",f.currentTarget.style.transform="translateX(0)"},children:[u.jsx("img",{src:Ua,alt:"My Vacants",style:ce.navIcon}),u.jsx("span",{children:"My Vacants"})]}),u.jsxs("button",{onClick:()=>p("/your-requests"),style:ce.navItem,onMouseEnter:f=>{f.currentTarget.style.background="rgba(255, 214, 10, 0.1)",f.currentTarget.style.transform="translateX(8px)"},onMouseLeave:f=>{f.currentTarget.style.background="transparent",f.currentTarget.style.transform="translateX(0)"},children:[u.jsx("img",{src:ld,alt:"My Requests",style:ce.navIcon}),u.jsx("span",{children:"My Requests"})]}),u.jsxs("button",{onClick:()=>p("/create-vacant"),style:ce.navItem,onMouseEnter:f=>{f.currentTarget.style.background="rgba(255, 214, 10, 0.1)",f.currentTarget.style.transform="translateX(8px)"},onMouseLeave:f=>{f.currentTarget.style.background="transparent",f.currentTarget.style.transform="translateX(0)"},children:[u.jsx("img",{src:ib,alt:"Create Vacant",style:ce.navIcon}),u.jsx("span",{children:"Create Vacant"})]}),u.jsx("div",{style:ce.sidebarDivider}),u.jsxs("button",{onClick:async()=>{try{await qp(),l(!1),t("/")}catch(f){console.error("Logout error:",f),t("/")}},style:{...ce.navItem,color:"#ff6b6b"},onMouseEnter:f=>{f.currentTarget.style.background="rgba(255, 107, 107, 0.1)",f.currentTarget.style.transform="translateX(8px)"},onMouseLeave:f=>{f.currentTarget.style.background="transparent",f.currentTarget.style.transform="translateX(0)"},children:[u.jsx("img",{src:rb,alt:"Logout",style:ce.navIcon}),u.jsx("span",{children:"Logout"})]})]}):u.jsxs("button",{onClick:()=>s(!0),style:ce.navItem,onMouseEnter:f=>{f.currentTarget.style.background="rgba(255, 214, 10, 0.1)",f.currentTarget.style.transform="translateX(8px)"},onMouseLeave:f=>{f.currentTarget.style.background="transparent",f.currentTarget.style.transform="translateX(0)"},children:[u.jsx("img",{src:du,alt:"Login",style:ce.navIcon}),u.jsx("span",{children:"Login"})]})]}),u.jsxs("div",{style:ce.sidebarFooter,children:[u.jsx("p",{style:ce.footerText,children:"All rights have been acquired"}),u.jsx("p",{style:ce.footerText,children:" 2026 Hangg Out Version 1.0.0"})]})]}),r&&u.jsx("div",{style:ce.loginOverlay,onClick:()=>s(!1),children:u.jsxs("div",{style:ce.loginModal,onClick:f=>f.stopPropagation(),children:[u.jsx("button",{style:ce.closeLoginButton,onClick:()=>s(!1),children:""}),u.jsx(nh,{onSuccess:()=>s(!1)})]})})]})}const ce={header:{background:"linear-gradient(180deg, #1a1f2e 0%, #0f1419 100%)",borderBottom:"1px solid var(--border)",padding:"10px 0",position:"sticky",top:0,zIndex:1e3},headerContent:{display:"flex",justifyContent:"space-between",alignItems:"center"},logo:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"25px",fontWeight:"bold",background:"linear-gradient(267deg, #da7c25 .30%, #0a6da8 70.06%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",position:"absolute",margin:"0 0 0 50px"},logoImg:{height:"50px",width:"50px",opacity:.8,borderRadius:"80px"},logoText:{color:"var(--yellow)"},nav:{display:"flex",alignItems:"center",gap:"16px"},userSection:{display:"flex",alignItems:"center",gap:"12px"},btnLogin:{background:"transparent",color:"var(--yellow)",border:"2px solid var(--yellow)",padding:"10px 20px",borderRadius:"var(--radius)",fontWeight:"600",cursor:"pointer",fontSize:"14px",position:"relative",overflow:"hidden",transition:"transform 0.18s ease, box-shadow 0.18s ease"},profileSection:{position:"relative"},profileBtn:{display:"flex",alignItems:"center",gap:"8px",background:"transparent",border:"1px solid transparent",color:"var(--white)",cursor:"pointer",padding:"8px 16px",borderRadius:"var(--radius)",fontSize:"14px",transition:"all 0.2s ease",position:"relative"},profileBtnActive:{background:"rgba(255, 214, 10, 0.1)",borderColor:"var(--yellow)"},profileImg:{width:"32px",height:"32px",borderRadius:"50%",border:"2px solid var(--yellow)",objectFit:"cover"},arrowIcon:{fontSize:"12px",marginLeft:"4px",transition:"transform 0.3s ease",color:"var(--yellow)"},dropdown:{position:"absolute",top:"calc(100% + 15px)",right:0,background:"var(--bg-black)",border:"1px solid var(--border)",borderRadius:"12px",minWidth:"240px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",overflow:"hidden",zIndex:1001,marginTop:"0"},dropdownArrow:{position:"absolute",top:"-8px",right:"20px",width:"16px",height:"16px",background:"var(--bg-black)",borderTop:"1px solid var(--border)",borderLeft:"1px solid var(--border)",transform:"rotate(45deg)",zIndex:1},dropdownItem:{display:"flex",alignItems:"center",gap:"12px",width:"100%",padding:"14px 20px",background:"none",border:"none",color:"var(--white)",textAlign:"left",cursor:"pointer",fontSize:"14px",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",transition:"all 0.3s ease",fontWeight:"500",position:"relative",zIndex:2},itemIcon:{width:"18px",height:"18px",objectFit:"contain"},divider:{height:"1px",background:"rgba(255, 255, 255, 0.1)",margin:"8px 0"},logoutItem:{display:"flex",alignItems:"center",gap:"12px",width:"100%",padding:"14px 20px",background:"rgba(255, 107, 107, 0.08)",border:"none",textAlign:"left",cursor:"pointer",fontSize:"14px",transition:"all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)",fontWeight:"600",borderTop:"1px solid rgba(255, 107, 107, 0.2)",position:"relative",zIndex:2},logoutIcon:{width:"18px",height:"18px",objectFit:"contain",transition:"transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)"},logoutText:{color:"white",fontWeight:"700",letterSpacing:"0.5px",textTransform:"uppercase",fontSize:"13px"},loginOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},loginModal:{background:"var(--bg-card)",border:"1px solid var(--border)",borderRadius:"16px",width:"100%",maxWidth:"400px",position:"relative",overflow:"hidden",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},closeLoginButton:{position:"absolute",top:"15px",right:"15px",background:"rgba(255, 255, 255, 0.1)",border:"none",color:"var(--white)",fontSize:"20px",cursor:"pointer",width:"30px",height:"30px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",zIndex:1001},hamburgerButton:{background:"transparent",border:"none",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center",width:"40px",height:"40px",borderRadius:"0",zIndex:1002,transition:"all 0.3s ease",boxShadow:"none",outline:"none"},hamburgerIcon:{fontSize:"28px",color:"var(--yellow)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(2px)",zIndex:998,transition:"opacity 0.3s ease"},sidebar:{position:"fixed",top:0,left:0,width:"300px",height:"100vh",background:"linear-gradient(180deg, #1a1f2e 0%, #0f1419 100%)",zIndex:1003,padding:"0",boxShadow:"4px 0 20px rgba(0, 0, 0, 0.5)",transition:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",flexDirection:"column",overflow:"hidden"},sidebarHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",background:"rgba(255, 214, 10, 0.05)"},logoContainer:{display:"flex",alignItems:"center",gap:"12px"},logoImgSidebar:{height:"45px",width:"45px",opacity:.8,borderRadius:"10px"},logoTextSidebar:{fontSize:"22px",fontWeight:"bold",background:"linear-gradient(267deg, #da7c25 .30%, #0a6da8 70.06%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",margin:0},closeButton:{background:"rgba(255, 255, 255, 0.1)",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px",transition:"all 0.2s ease"},sidebarNav:{flex:1,display:"flex",flexDirection:"column",gap:"2px",padding:"20px",overflowY:"auto"},navItem:{display:"flex",alignItems:"center",gap:"15px",padding:"15px 20px",color:"#fff",background:"transparent",border:"none",borderRadius:"10px",fontSize:"16px",fontWeight:"500",transition:"all 0.2s ease",cursor:"pointer",textAlign:"left",width:"100%"},navIcon:{width:"22px",height:"22px",objectFit:"contain"},sidebarDivider:{height:"1px",background:"rgba(255, 255, 255, 0.1)",margin:"10px 0"},sidebarFooter:{padding:"20px",borderTop:"1px solid rgba(255, 255, 255, 0.1)",textAlign:"center"},footerText:{color:"#666",fontSize:"12px",margin:"0 0 4px 0"}},Rk=async(t,e)=>{try{console.log("Creating vacant with data:",t),console.log("User UID:",e);const n={...t,creatorUid:e,createdAt:$i(),status:"open",applicants:[],applied:0,requiredPersons:Number(t.requiredPersons)},i=await tc(Pt(Ge,"vacants"),n);return console.log("Vacant created successfully with ID:",i.id),i.id}catch(n){throw console.error("Error creating vacant:",n),console.error("Error details:",n.message),n}},_s=async t=>{try{const e=ei(Ge,"vacants",t),n=await $m(e);return n.exists()?{id:n.id,...n.data()}:(console.log("No vacant found with ID:",t),null)}catch(e){throw console.error("Error getting vacant:",e),e}},Dk=async()=>{try{const t=In(Pt(Ge,"vacants"),US("createdAt","desc")),n=(await ti(t)).docs.map(i=>({id:i.id,...i.data()}));return console.log(`Fetched ${n.length} total vacants`),n}catch(t){throw console.error("Error getting vacants:",t),t}},QS=async t=>{try{console.log("Fetching vacants for user:",t);const e=In(Pt(Ge,"vacants"),Cn("creatorUid","==",t)),i=(await ti(e)).docs.map(r=>({id:r.id,...r.data()})).sort((r,s)=>{var c,d;const a=((c=r.createdAt)==null?void 0:c.toMillis())||0;return(((d=s.createdAt)==null?void 0:d.toMillis())||0)-a});return console.log(`Found ${i.length} vacants for user ${t}`),i}catch(e){throw console.error("Error getting user vacants:",e),console.error("Error details:",e.message),e}},Mk="/HanggOut/assets/cricket-BxLU1oue.png",Ok="/HanggOut/assets/badminton-D7cv9H4e.png",jk="/HanggOut/assets/Travel-DC1ZRdFS.png",Or="/HanggOut/assets/location-C4aNPyXz.png",kk="/HanggOut/assets/chess-25hr7PsU.png",Nk="/HanggOut/assets/Hang-BSB2Y21A.png",za="/HanggOut/assets/loading1-Cr1FeUX7.png",Ba="/HanggOut/assets/loading2-DAKSa0zc.png",Hp="/HanggOut/assets/search-Cm2Y_P3P.png",Rl="/HanggOut/assets/chat-CQ4IHGQ-.png";function Vk(){const t=Rn(),{user:e}=Xr(),[n,i]=N.useState([]),[r,s]=N.useState([]),[a,l]=N.useState("all"),[c,d]=N.useState(""),[p,m]=N.useState(""),[f,y]=N.useState([]),[S,D]=N.useState(!1),[j,T]=N.useState(""),[x,A]=N.useState(!0),[M,$]=N.useState(!1),Q=[{id:"all",name:"All",icon:Nk,isEmoji:!1},{id:"Cricket",name:"Cricket",icon:Mk,isEmoji:!1},{id:"Badminton",name:"Badminton",icon:Ok,isEmoji:!1},{id:"Roaming",name:"Roaming",icon:jk,isEmoji:!1},{id:"Chess",name:"Chess",icon:kk,isEmoji:!1}];N.useEffect(()=>{w()},[e]),N.useEffect(()=>{I()},[n,a,c,p]);const w=async()=>{try{A(!0);const v=await Dk();i(v)}catch(v){console.error("Error loading vacants:",v)}finally{A(!1)}},b=async v=>{if(v.length<2){y([]),D(!1);return}try{const se=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(v)}&countrycodes=in&limit=5&addressdetails=1&accept-language=en&extratags=1`)).json(),F=(se==null?void 0:se.map(re=>{const W=re.address||{},de=[];W.road?de.push(W.road):W.neighbourhood?de.push(W.neighbourhood):W.suburb&&de.push(W.suburb),W.locality?de.push(W.locality):W.suburb&&!de.includes(W.suburb)&&de.push(W.suburb),W.city?de.push(W.city):W.town?de.push(W.town):W.village&&de.push(W.village),W.state&&de.push(W.state);const Ae=de.length>0?de.join(", "):re.display_name,at=de[0]||re.name||re.display_name.split(",")[0];return{id:re.place_id,name:Ae,shortName:at}}))||[];y(F),D(F.length>0)}catch(Z){console.error("Error fetching location suggestions:",Z),y([]),D(!1)}},E=v=>{m(v),b(v)},C=v=>{m(v.name),D(!1),y([])},I=()=>{let v=n;T("");const Z=new Date;if(v=v.filter(se=>{if(se.status==="closed"||se.status==="close")return!1;if(se.date&&se.time){if(se.eventType==="repetitive"&&se.endDate&&se.time){if(new Date(`${se.endDate}T${se.time}`)<=Z)return!1}else if(new Date(`${se.date}T${se.time}`)<=Z)return!1}return!0}),e&&(v=v.filter(se=>se.creatorUid!==e.uid)),a!=="all"&&(v=v.filter(se=>se.category===a)),c&&(v=v.filter(se=>se.title.toLowerCase().includes(c.toLowerCase()))),p){const se=p.toLowerCase().split(/[,\s]+/).filter(W=>W.length>0),F=se[0];let re=v.filter(W=>{const de=(W.city||"").toLowerCase().split(/[,\s]+/),Ae=(W.area||"").toLowerCase().split(/[,\s]+/),at=(W.location||"").toLowerCase().split(/[,\s]+/);return de.some(O=>O.includes(F))||Ae.some(O=>O.includes(F))||at.some(O=>O.includes(F))});if(re.length>0)v=re;else{const W=se.slice(1);let de=v.filter(Ae=>{const at=(Ae.city||"").toLowerCase().split(/[,\s]+/),O=(Ae.area||"").toLowerCase().split(/[,\s]+/),ye=(Ae.location||"").toLowerCase().split(/[,\s]+/);return W.some(dt=>at.some(ht=>ht.includes(dt))||O.some(ht=>ht.includes(dt))||ye.some(ht=>ht.includes(dt)))});de.length>0?(T(`No vacants found in ${F}. Showing similar vacants:`),v=de):(T(`No vacants found in ${F} or nearby areas.`),v=[])}}s(v)},R=()=>{e?t("/create-vacant"):$(!0)};return u.jsxs("div",{style:ne.container,children:[u.jsx("section",{style:ne.searchSection,children:u.jsxs("div",{className:"container",style:ne.searchContainer,children:[u.jsxs("div",{style:ne.searchInputWrapper,children:[u.jsx("img",{src:Hp,alt:"search",style:ne.searchIcon}),u.jsx("input",{type:"text",placeholder:"Search vacants...",value:c,onChange:v=>d(v.target.value),style:ne.searchInput}),c&&u.jsx("button",{style:ne.clearButton,onClick:()=>d(""),type:"button",children:""})]}),u.jsxs("div",{style:{...ne.locationInputWrapper,position:"relative"},children:[u.jsx("img",{src:Or,alt:"location",style:ne.locationIcon}),u.jsx("input",{type:"text",placeholder:"Enter location...",value:p,onChange:v=>E(v.target.value),onFocus:()=>f.length>0&&D(!0),onBlur:()=>D(!1),style:ne.locationInput}),p&&u.jsx("button",{style:ne.clearButton,onClick:()=>{m(""),y([]),D(!1)},type:"button",children:""}),S&&f.length>0&&u.jsx("div",{style:ne.locationDropdown,children:f.map(v=>u.jsxs("div",{style:ne.locationOption,onMouseDown:()=>C(v),onMouseEnter:Z=>Z.target.style.backgroundColor="#f0f0f0",onMouseLeave:Z=>Z.target.style.backgroundColor="white",children:[u.jsx("img",{src:Or,alt:"location",style:ne.locationOptionIcon}),u.jsxs("div",{style:ne.locationOptionText,children:[u.jsx("div",{style:{fontWeight:"500",color:"#333"},children:v.shortName}),u.jsx("div",{style:{fontSize:"12px",color:"#666"},children:v.name})]})]},v.id))})]})]})}),u.jsxs("section",{style:ne.heroSection,children:[u.jsx("h1",{style:ne.heroTitle,children:"Join People. Create Vacants. Hangout Together."}),u.jsx("p",{style:ne.heroSubtitle,children:"Find open spots in games, trips, activities  or create your own vacant."})]}),u.jsx("section",{style:ne.categorySection,children:u.jsx("div",{className:"container",children:u.jsxs("div",{style:ne.categoriesGrid,children:[Q.map(v=>u.jsxs("div",{style:ne.tabContainer,children:[u.jsx("div",{style:{...ne.tabItem,...a===v.id?ne.tabItemActive:{}},onClick:()=>l(v.id),onMouseEnter:Z=>{a!==v.id&&(Z.currentTarget.style.transform="translateY(-5px)",Z.currentTarget.style.boxShadow="0 8px 16px rgba(255, 214, 10, 0.3)")},onMouseLeave:Z=>{a!==v.id&&(Z.currentTarget.style.transform="translateY(0)",Z.currentTarget.style.boxShadow="none")},children:v.isEmoji?u.jsx("span",{style:ne.tabIconEmoji,children:v.icon}):u.jsx("img",{src:v.icon,alt:v.name,style:ne.tabIconImg,onError:Z=>{Z.target.style.display="none"}})}),u.jsx("span",{style:ne.tabName,children:v.name})]},v.id)),u.jsxs("div",{style:ne.tabContainer,children:[u.jsx("div",{style:ne.tabItemCreate,onClick:R,onMouseEnter:v=>{v.currentTarget.style.transform="translateY(-5px)",v.currentTarget.style.boxShadow="0 8px 16px rgba(255, 214, 10, 0.5)"},onMouseLeave:v=>{v.currentTarget.style.transform="translateY(0)",v.currentTarget.style.boxShadow="none"},children:u.jsxs("div",{style:ne.createIconContainer,children:[u.jsx("div",{style:ne.createIconHorizontal}),u.jsx("div",{style:ne.createIconVertical})]})}),u.jsx("span",{style:ne.tabName,children:"Create Vacant"})]})]})})}),u.jsx("section",{style:ne.vacantsSection,children:u.jsxs("div",{className:"container",children:[u.jsx("h2",{style:ne.sectionTitle,children:"Available Vacants"}),j&&u.jsx("div",{style:ne.messageContainer,children:u.jsx("p",{style:ne.locationMessage,children:j})}),x?u.jsxs("div",{style:ne.loadingContainer,children:[u.jsxs("div",{style:ne.loadingWrapper,children:[u.jsx("img",{src:za,alt:"loading",style:ne.loading1}),u.jsx("img",{src:Ba,alt:"loading",style:ne.loading2})]}),u.jsx("p",{style:ne.loadingText,children:"Loading vacants..."})]}):r.length===0?u.jsxs("div",{style:ne.emptyState,children:[u.jsx("img",{src:Hp,alt:"search",style:ne.emptyIcon}),u.jsx("p",{style:ne.noResults,children:"No vacants found"}),u.jsx("p",{style:ne.emptySubtext,children:"Try adjusting your search or filters"})]}):u.jsx("div",{style:ne.vacantsGrid,children:r.map(v=>u.jsxs("div",{style:ne.vacantCard,onClick:()=>t(`/vacant/${v.id}`),onMouseEnter:Z=>{Z.currentTarget.style.transform="translateY(-5px)",Z.currentTarget.style.boxShadow="0 10px 20px rgba(255, 214, 10, 0.2)"},onMouseLeave:Z=>{Z.currentTarget.style.transform="translateY(0)",Z.currentTarget.style.boxShadow="none"},children:[u.jsxs("div",{style:ne.cardHeader,children:[u.jsx("h3",{style:ne.cardTitle,children:v.title}),u.jsx("span",{style:ne.categoryBadge,children:v.category})]}),u.jsxs("div",{style:ne.cardBody,children:[u.jsxs("div",{style:ne.cardLeft,children:[u.jsxs("div",{style:ne.locationContainer,children:[u.jsx("img",{src:Or,alt:"location",style:ne.placeIcon}),u.jsx("span",{children:v.location||`${v.area||"Unknown"}, ${v.city||"Unknown"}`})]}),u.jsxs("div",{style:ne.personsContainer,children:[u.jsx("img",{src:du,alt:"persons",style:ne.groupPersonsIcon}),u.jsxs("span",{children:["Need ",Math.max(0,v.requiredPersons-(v.applied||0))," person(s)"]})]}),u.jsxs("p",{style:ne.creatorText,children:["By: ",v.creatorName]})]}),u.jsx("div",{style:ne.cardRight,children:u.jsxs("div",{style:ne.dateTimeContainer,children:[u.jsx("img",{src:Gr,alt:"time",style:ne.clockIcon}),u.jsx("div",{style:ne.dateTimeWrapper,children:v.eventType==="interval"||v.eventType==="repetitive"?u.jsxs(u.Fragment,{children:[u.jsx("span",{style:ne.timeText,children:v.eventType==="repetitive"?v.time:`${v.time} - ${v.endTime}`}),u.jsx("span",{style:ne.dateTime,children:v.date===v.endDate?new Date(v.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):`${new Date(v.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short"})} - ${new Date(v.endDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}`})]}):u.jsxs(u.Fragment,{children:[v.time&&u.jsx("span",{style:ne.timeText,children:v.time}),u.jsx("span",{style:ne.dateTime,children:v.date?new Date(v.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"Date TBD"})]})})]})})]})]},v.id))})]})}),e&&u.jsx("button",{style:ne.floatingButton,onClick:()=>t("/your-requests"),onMouseEnter:v=>{v.currentTarget.style.transform="scale(1.1) rotate(5deg)",v.currentTarget.style.boxShadow="0 8px 20px rgba(255, 214, 10, 0.6)"},onMouseLeave:v=>{v.currentTarget.style.transform="scale(1) rotate(0deg)",v.currentTarget.style.boxShadow="0 4px 12px rgba(255, 214, 10, 0.4)"},title:"My Requests","aria-label":"My Requests",children:u.jsx("img",{src:Rl,alt:"chat",style:{width:"50px",height:"50px",objectFit:"contain"}})}),M&&u.jsx("div",{style:ne.loginOverlay,onClick:()=>$(!1),children:u.jsxs("div",{style:ne.loginModal,onClick:v=>v.stopPropagation(),children:[u.jsx("button",{style:ne.closeLoginButton,onClick:()=>$(!1),children:""}),u.jsx(nh,{onSuccess:()=>$(!1)})]})})]})}const ne={container:{minHeight:"100vh",background:"var(--bg-black)",position:"relative"},searchSection:{background:"var(--yellow)",padding:"14px 20px",marginBottom:"20px",position:"sticky",top:"70px",zIndex:100,boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)"},searchContainer:{display:"flex",gap:"20px",alignItems:"center",maxWidth:"1200px",margin:"0 auto",flexWrap:"wrap"},searchInputWrapper:{position:"relative",flex:"1",minWidth:"250px",display:"flex",alignItems:"center"},searchIcon:{position:"absolute",left:"16px",width:"18px",height:"18px",zIndex:1,pointerEvents:"none"},searchInput:{width:"100%",padding:"12px 16px 12px 45px",borderRadius:"15px",border:"none",fontSize:"18px",fontWeight:"bold",background:"white",height:"50px"},locationInputWrapper:{position:"relative",flex:"1",minWidth:"250px",display:"flex",alignItems:"center"},locationIcon:{position:"absolute",left:"18px",width:"22px",height:"22px",objectFit:"contain",zIndex:1,pointerEvents:"none"},locationInput:{width:"100%",padding:"12px 16px 12px 45px",borderRadius:"15px",border:"none",fontSize:"18px",fontWeight:"bold",background:"white",height:"50px"},heroSection:{padding:"10px 20px",textAlign:"center"},heroTitle:{fontSize:"32px",fontWeight:"bold",marginBottom:"12px",color:"var(--white)"},heroSubtitle:{fontSize:"20px",color:"var(--gray)"},categorySection:{padding:"20px 0 0 0"},categoriesGrid:{display:"flex",gap:"20px",justifyContent:"center",flexWrap:"wrap"},tabContainer:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",cursor:"pointer"},tabItem:{width:"100px",height:"100px",background:"var(--bg-card)",border:"2px solid var(--border)",borderRadius:"var(--radius)",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease",cursor:"pointer",overflow:"hidden"},tabItemActive:{borderColor:"var(--yellow)",backgroundColor:"rgba(255, 214, 10, 0.1)",transform:"translateY(-5px)",boxShadow:"0 8px 16px rgba(255, 214, 10, 0.3)"},tabItemCreate:{width:"100px",height:"100px",background:"transparent",border:"2px solid var(--yellow)",borderRadius:"var(--radius)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.3s ease"},tabIconEmoji:{fontSize:"55px"},tabIconImg:{width:"90px",height:"90px",objectFit:"contain",filter:"brightness(1.2) contrast(1.1)"},createIconContainer:{position:"relative",width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center"},createIconHorizontal:{position:"absolute",width:"60px",height:"6px",border:"2px solid var(--yellow)",borderRadius:"2px",background:"transparent"},createIconVertical:{position:"absolute",width:"6px",height:"60px",border:"2px solid var(--yellow)",borderRadius:"2px",background:"transparent"},tabName:{fontSize:"16.5px",fontWeight:"400",color:"var(--white)",textAlign:"center"},vacantsSection:{padding:"20px 20px"},sectionTitle:{color:"var(--yellow)",marginBottom:"20px",fontSize:"25px"},loadingContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px"},loadingWrapper:{position:"relative",width:"90px",height:"90px",marginBottom:"20px"},loading1:{position:"absolute",width:"90px",height:"90px",animation:"spin 2s linear infinite"},loading2:{position:"absolute",width:"75px",height:"75px",top:"7.5px",left:"7.5px",animation:"spin 2s linear infinite reverse"},loadingText:{color:"var(--yellow)",textAlign:"center",fontSize:"25px",fontWeight:"600"},emptyState:{textAlign:"center",padding:"60px 20px"},emptyIcon:{width:"80px",height:"80px",display:"block",margin:"0 auto 20px auto",opacity:.5},noResults:{color:"var(--gray)",textAlign:"center",fontSize:"20px",marginBottom:"10px"},emptySubtext:{color:"#666",fontSize:"14px"},vacantsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(400px, 1fr))",gap:"20px"},vacantCard:{background:"#1a2332",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"18px",cursor:"pointer",transition:"all 0.3s ease",position:"relative"},cardHeader:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"16px"},cardTitle:{color:"var(--yellow)",margin:0,fontSize:"22px",fontWeight:"600",flex:1,paddingRight:"12px"},categoryBadge:{background:"transparent",color:"var(--yellow)",border:"3px solid var(--yellow)",padding:"8px 22px",borderRadius:"20px",fontSize:"18px",fontWeight:"700",textTransform:"capitalize",whiteSpace:"nowrap"},cardBody:{color:"#a0aec0",fontSize:"18px",lineHeight:"1.8",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"16px"},cardLeft:{flex:1,display:"flex",flexDirection:"column",gap:"8px"},cardRight:{display:"flex",flexDirection:"column",gap:"4px",alignItems:"flex-end",minWidth:"fit-content"},dateTimeContainer:{display:"flex",alignItems:"center",gap:"6px",margin:0},clockIcon:{width:"50px",height:"50px"},dateTimeWrapper:{display:"flex",flexDirection:"column",alignItems:"flex-end"},personsContainer:{display:"flex",alignItems:"center",gap:"6px",margin:0},groupPersonsIcon:{width:"18px",height:"18px"},placeIcon:{width:"16px",height:"16px",objectFit:"contain",marginRight:"6px"},timeText:{color:"var(--yellow)",fontSize:"30px",fontWeight:"1000",margin:0,whiteSpace:"nowrap"},dateTime:{color:"var(--yellow)",fontSize:"16px",fontWeight:"600",margin:0,whiteSpace:"nowrap"},creatorText:{color:"#6b7280",fontSize:"18px",marginTop:"4px",fontStyle:"italic"},floatingButton:{position:"fixed",bottom:"20px",right:"20px",width:"65px",height:"65px",borderRadius:"50%",background:"linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #ffd700 100%)",color:"#0a0a0a",border:"none",fontSize:"28px",cursor:"pointer",boxShadow:"0 4px 12px rgba(255, 214, 10, 0.4)",zIndex:999,display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",animation:"pulse 2s infinite"},messageContainer:{background:"rgba(255, 214, 10, 0.1)",border:"1px solid rgba(255, 214, 10, 0.3)",borderRadius:"8px",padding:"12px 16px",marginBottom:"20px"},locationMessage:{color:"var(--yellow)",fontSize:"16px",fontWeight:"500",margin:0,textAlign:"center"},locationDropdown:{position:"absolute",top:"100%",left:0,right:0,background:"white",border:"1px solid #ddd",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e3,maxHeight:"200px",overflowY:"auto"},locationOption:{padding:"12px 16px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",borderBottom:"1px solid #f0f0f0",transition:"background-color 0.2s ease"},locationOptionIcon:{width:"16px",height:"16px",objectFit:"contain"},locationOptionText:{fontSize:"14px",color:"#333",flex:1},clearButton:{position:"absolute",right:"16px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",fontSize:"18px",color:"#666",cursor:"pointer",padding:"4px",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},loginOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},loginModal:{background:"var(--bg-card)",border:"1px solid var(--border)",borderRadius:"16px",width:"100%",maxWidth:"400px",position:"relative",overflow:"hidden",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},closeLoginButton:{position:"absolute",top:"15px",right:"15px",background:"rgba(255, 255, 255, 0.1)",border:"none",color:"var(--white)",fontSize:"20px",cursor:"pointer",width:"30px",height:"30px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",zIndex:1001}},Pk=["Cricket","Badminton","Chess","Roaming","Other"];function Lk(){const t=Rn(),{user:e}=Xr(),[n,i]=N.useState(!1);N.useEffect(()=>{const P=document.createElement("style");return P.textContent=`
      input[type="number"]::-webkit-outer-spin-button,
      input[type="number"]::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      input[type="number"] {
        -moz-appearance: textfield;
      }
    `,document.head.appendChild(P),()=>{document.head.removeChild(P)}},[]);const[r,s]=N.useState(""),[a,l]=N.useState({}),[c,d]=N.useState(""),[p,m]=N.useState(!1),[f,y]=N.useState([]),[S,D]=N.useState(!1),[j,T]=N.useState(!1),[x,A]=N.useState(!1),[M,$]=N.useState(!0),[Q,w]=N.useState(!0),[b,E]=N.useState(!1),[C,I]=N.useState(!1),[R,v]=N.useState(!1),[Z,se]=N.useState(new Date().getMonth()),[F,re]=N.useState(new Date().getFullYear()),[W,de]=N.useState(!1),[Ae,at]=N.useState(!1),[O,ye]=N.useState({title:"",category:"",description:"",location:"",area:"",city:"",eventType:"",date:"",time:"",endDate:"",endTime:"",requiredPersons:1,gender:""}),dt=new Date().toISOString().split("T")[0];if(!e)return u.jsx("div",{style:k.container,children:u.jsxs("div",{style:k.card,children:[u.jsx("p",{style:k.errorText,children:"Please login to create a vacant"}),u.jsx("button",{style:k.btn,onClick:()=>t("/login"),children:"Go to Login"})]})});const ht=async P=>{if(P.length<2){y([]),D(!1);return}try{const K=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(P)}&limit=5&addressdetails=1&accept-language=en&extratags=1`)).json(),Ee=(K==null?void 0:K.map(ve=>{const ue=ve.address||{},xe=[];ue.road?xe.push(ue.road):ue.neighbourhood?xe.push(ue.neighbourhood):ue.suburb&&xe.push(ue.suburb),ue.locality?xe.push(ue.locality):ue.suburb&&!xe.includes(ue.suburb)&&xe.push(ue.suburb),ue.city?xe.push(ue.city):ue.town?xe.push(ue.town):ue.village&&xe.push(ue.village),ue.state&&xe.push(ue.state);const ge=xe.length>0?xe.join(", "):ve.display_name,Se=xe[0]||ve.name||ve.display_name.split(",")[0];return{id:ve.place_id,name:ge,shortName:Se}}))||[];y(Ee),D(Ee.length>0)}catch(B){console.error("Error fetching location suggestions:",B),y([]),D(!1)}},qn=P=>{ye(B=>({...B,location:P})),r&&s(""),ht(P)},Hn=P=>{const B=P.name.split(", "),K=B[0]||P.shortName,Ee=B.length>1?B[B.length-1]:B[0]||P.shortName;console.log("Selected location:",P),console.log("Parsed parts:",B),console.log("Area:",K,"City:",Ee),ye(ve=>({...ve,location:P.name,area:K,city:Ee})),D(!1),y([])},U=(P,B,K)=>{const Ee=K.left+K.width/2,ve=K.top+K.height/2,ue=P-Ee,xe=B-ve,ge=Math.atan2(xe,ue)*180/Math.PI+90,Se=ge<0?ge+360:ge;if(M){const Ke=Math.round(Se/15)%24,sn=O.time?parseInt(O.time.split(":")[1]):31;ye(ii=>({...ii,time:`${Ke.toString().padStart(2,"0")}:${sn.toString().padStart(2,"0")}`}))}else{const Ke=Math.round(Se/6)%60,sn=O.time?parseInt(O.time.split(":")[0]):16;ye(ii=>({...ii,time:`${sn.toString().padStart(2,"0")}:${Ke.toString().padStart(2,"0")}`}))}},te=(P,B,K)=>{const Ee=K.left+K.width/2,ve=K.top+K.height/2,ue=P-Ee,xe=B-ve,ge=Math.atan2(xe,ue)*180/Math.PI+90,Se=ge<0?ge+360:ge;let Ke;if(Q){const sn=Math.round(Se/15)%24,ii=O.endTime?parseInt(O.endTime.split(":")[1]):31;Ke=`${sn.toString().padStart(2,"0")}:${ii.toString().padStart(2,"0")}`}else{const sn=Math.round(Se/6)%60;Ke=`${(O.endTime?parseInt(O.endTime.split(":")[0]):16).toString().padStart(2,"0")}:${sn.toString().padStart(2,"0")}`}if(O.date&&O.endDate&&O.date===O.endDate&&O.time){const sn=new Date(`2000-01-01T${O.time}`);if(new Date(`2000-01-01T${Ke}`)<=sn)return}ye(sn=>({...sn,endTime:Ke}))},L=P=>{E(!0);const B=P.currentTarget.getBoundingClientRect();U(P.clientX,P.clientY,B)},J=P=>{if(!b)return;const B=P.currentTarget.getBoundingClientRect();U(P.clientX,P.clientY,B)},fe=()=>{E(!1)},le=P=>{E(!0);const B=P.currentTarget.getBoundingClientRect(),K=P.touches[0];U(K.clientX,K.clientY,B)},ae=P=>{if(!b)return;P.preventDefault();const B=P.currentTarget.getBoundingClientRect(),K=P.touches[0];U(K.clientX,K.clientY,B)},ot=()=>{E(!1)},$e=P=>{const{name:B,value:K}=P.target;B==="location"?qn(K):(ye(Ee=>({...Ee,[B]:B==="requiredPersons"?parseInt(K)||1:K})),(B==="title"||B==="description")&&(K.toLowerCase().includes("sex")||K.toLowerCase().includes("fuck")||K.toLowerCase().includes("shit")?d(" Inappropriate language detected. Please use respectful words."):d("")),r&&s(""),a[B]&&l(Ee=>({...Ee,[B]:""})))},bt=()=>{const P={};if(!O.title.trim())return s("Title is required"),!1;if(c)return!1;if(!O.location.trim())return s("Location is required"),!1;if(O.date||(P.date="Date is required"),O.time||(P.time="Time is required"),!O.category)return s("Category is required"),!1;if(!O.eventType)return s("Event type is required"),!1;if(!O.gender)return s("Gender is required"),!1;if(O.requiredPersons<1)return s("Required persons must be at least 1"),!1;if(O.date&&O.time&&new Date(`${O.date}T${O.time}`)<=new Date&&(P.date="Please select a future date and time",P.time="Please select a future date and time"),(O.eventType==="interval"||O.eventType==="repetitive")&&(O.endDate||(P.endDate="End date is required"),O.endTime||(P.endTime="End time is required"),O.date&&O.time&&O.endDate&&O.endTime)){const B=new Date(`${O.date}T${O.time}`);new Date(`${O.endDate}T${O.endTime}`)<=B&&(P.endDate="End date and time must be after start date and time",P.endTime="End date and time must be after start date and time")}return Object.keys(P).length>0?(l(P),!1):!0},Fn=async P=>{P.preventDefault(),s(""),m(!1);const B={};if(O.date||(B.date="Date is required"),O.time||(B.time="Time is required"),O.eventType==="interval"&&(O.endDate||(B.endDate="End date is required"),O.endTime||(B.endTime="End time is required")),Object.keys(B).length>0){l(B);return}if(bt()){i(!0);try{const K={title:O.title.trim(),category:O.category,description:O.description.trim(),location:O.location.trim(),area:O.area.trim(),city:O.city.trim(),eventType:O.eventType,date:O.date,time:O.time||"TBD",endDate:O.eventType==="interval"||O.eventType==="repetitive"?O.endDate:null,endTime:O.eventType==="interval"||O.eventType==="repetitive"?O.endTime:null,requiredPersons:Number(O.requiredPersons),gender:O.gender||"",creatorName:e.name||e.email,creatorEmail:e.email,creatorPhoto:e.photo};console.log("Submitting vacant data:",K),console.log("User ID:",e.uid);const Ee=await Rk(K,e.uid);console.log("Vacant created successfully with ID:",Ee),m(!0),setTimeout(()=>{t("/my-vacants")},1500)}catch(K){console.error("Error creating vacant:",K),s(K.message||"Failed to create vacant. Please try again.")}finally{i(!1)}}};return u.jsx("div",{style:k.container,children:u.jsx("div",{className:"container",children:u.jsxs("div",{style:k.card,children:[u.jsx("h1",{style:k.title,children:"Create a New Vacant"}),r&&u.jsxs("div",{style:k.errorBox,children:[u.jsx("strong",{children:"Error:"})," ",r]}),p?u.jsxs("div",{style:k.successBox,children:[u.jsx("strong",{children:"Success!"})," Vacant created successfully. Redirecting..."]}):u.jsxs("form",{onSubmit:Fn,style:k.form,children:[u.jsxs("div",{style:k.formGroup,children:[u.jsx("label",{style:k.label,children:"Vacant Title *"}),u.jsx("input",{type:"text",name:"title",value:O.title,onChange:$e,placeholder:"e.g., Cricket match in Balaji turf",required:!0,style:k.input,disabled:n})]}),u.jsxs("div",{style:{...k.formGroup,position:"relative"},children:[u.jsx("label",{style:k.label,children:"Location *"}),u.jsx("input",{type:"text",name:"location",value:O.location,onChange:$e,onFocus:()=>f.length>0&&D(!0),onBlur:()=>D(!1),placeholder:"e.g., MG Road, Koramangala, Bangalore",required:!0,style:k.input,disabled:n}),S&&f.length>0&&u.jsx("div",{style:k.dropdown,children:f.map(P=>u.jsxs("div",{style:k.dropdownOption,onMouseDown:()=>Hn(P),onMouseEnter:B=>B.target.style.backgroundColor="#f0f0f0",onMouseLeave:B=>B.target.style.backgroundColor="white",children:[u.jsx("span",{style:k.dropdownIcon,children:""}),u.jsxs("div",{style:k.dropdownText,children:[u.jsx("div",{style:{fontWeight:"500",color:"#333"},children:P.shortName}),u.jsx("div",{style:{fontSize:"12px",color:"#666"},children:P.name})]})]},P.id))})]}),u.jsxs("div",{style:k.categoryRow,children:[u.jsxs("div",{style:k.categoryGroup,children:[u.jsx("label",{style:k.label,children:"Category *"}),u.jsxs("select",{name:"category",value:O.category,onChange:$e,style:k.input,disabled:n,required:!0,children:[u.jsx("option",{value:"",children:"Select Category"}),Pk.map(P=>u.jsx("option",{value:P,children:P},P))]})]}),u.jsxs("div",{style:k.formGroup,children:[u.jsx("label",{style:k.label,children:"People Needed *"}),u.jsxs("div",{style:k.numberInputContainer,children:[u.jsx("input",{type:"number",name:"requiredPersons",value:O.requiredPersons,onChange:$e,min:"1",required:!0,style:k.numberInputField,disabled:n}),u.jsxs("div",{style:k.arrowButtons,children:[u.jsx("button",{type:"button",style:{...k.arrowBtn,borderTopRightRadius:"var(--radius)"},onClick:()=>ye(P=>({...P,requiredPersons:Math.max(1,P.requiredPersons+1)})),disabled:n,onMouseEnter:P=>P.target.style.opacity="0.7",onMouseLeave:P=>P.target.style.opacity="1",children:""}),u.jsx("button",{type:"button",style:{...k.arrowBtn,borderBottomRightRadius:"var(--radius)"},onClick:()=>ye(P=>({...P,requiredPersons:Math.max(1,P.requiredPersons-1)})),disabled:n,onMouseEnter:P=>P.target.style.opacity="0.7",onMouseLeave:P=>P.target.style.opacity="1",children:""})]})]}),u.jsx("small",{style:k.helpText,children:"minimum 1"})]}),u.jsxs("div",{style:k.formGroup,children:[u.jsx("label",{style:k.label,children:"Gender *"}),u.jsxs("select",{name:"gender",value:O.gender,onChange:$e,style:k.input,disabled:n,required:!0,children:[u.jsx("option",{value:"",children:"Select Gender"}),u.jsx("option",{value:"Male",children:"Male"}),u.jsx("option",{value:"Female",children:"Female"}),u.jsx("option",{value:"Mixed",children:"Mixed"}),u.jsx("option",{value:"Others",children:"Others"})]})]})]}),u.jsxs("div",{style:k.formGroup,children:[u.jsx("label",{style:k.label,children:"Event Type *"}),u.jsxs("select",{name:"eventType",value:O.eventType,onChange:$e,style:k.input,disabled:n,required:!0,children:[u.jsx("option",{value:"",children:"Select Event Type"}),u.jsx("option",{value:"single",children:"The event have only start time"}),u.jsx("option",{value:"interval",children:"The event have time interval"}),u.jsx("option",{value:"repetitive",children:"The event is repetitive"})]})]}),O.eventType==="single"?u.jsxs("div",{style:k.row,children:[u.jsxs("div",{style:{...k.formGroup,position:"relative"},children:[u.jsx("label",{style:k.label,children:"Date *"}),u.jsx("input",{type:"text",name:"date",value:O.date||"",readOnly:!0,onClick:()=>I(!0),style:{...k.input,cursor:"pointer",borderColor:a.date?"#ff6b6b":"var(--border)"},disabled:n,placeholder:"Select date",title:"Select date",required:!0}),a.date&&u.jsx("div",{style:k.fieldError,children:a.date}),C&&u.jsx("div",{style:k.datePickerOverlay,onClick:()=>I(!1),children:u.jsxs("div",{style:k.datePickerContainer,onClick:P=>P.stopPropagation(),children:[u.jsxs("div",{style:k.datePickerHeader,children:[u.jsx("button",{type:"button",style:k.navBtn,onClick:()=>{Z===0?(se(11),re(F-1)):se(Z-1)},children:""}),u.jsxs("div",{style:k.monthYearContainer,children:[u.jsx("span",{style:k.monthYear,onClick:()=>de(!W),children:new Date(F,Z).toLocaleDateString("en-US",{month:"long"})}),u.jsx("span",{style:k.monthYear,onClick:()=>at(!Ae),children:F})]}),u.jsx("button",{type:"button",style:k.navBtn,onClick:()=>{Z===11?(se(0),re(F+1)):se(Z+1)},children:""})]}),W&&u.jsx("div",{style:k.pickerGrid,children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((P,B)=>u.jsx("div",{style:{...k.pickerItem,...B===Z?k.selectedPickerItem:{}},onClick:()=>{se(B),de(!1)},children:P},P))}),Ae&&u.jsx("div",{style:k.yearPickerContainer,children:u.jsx("div",{style:k.pickerGrid,children:Array.from({length:12},(P,B)=>{const K=F-5+B;return u.jsx("div",{style:{...k.pickerItem,...K===F?k.selectedPickerItem:{}},onClick:()=>{re(K),at(!1)},children:K},K)})})}),!W&&!Ae&&u.jsxs("div",{style:k.daysGrid,children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(P=>u.jsx("div",{style:k.dayHeader,children:P},P)),Array.from({length:42},(P,B)=>{const K=new Date(F,Z,1).getDay(),Ee=new Date(F,Z+1,0).getDate(),ve=B-K+1,ue=ve>0&&ve<=Ee,xe=ue?`${F}-${(Z+1).toString().padStart(2,"0")}-${ve.toString().padStart(2,"0")}`:"",ge=xe===new Date().toISOString().split("T")[0],Se=xe<dt;return u.jsx("div",{style:{...k.dayCell,...ue?{}:{color:"#ccc"},...ge?k.todayCell:{},...Se?k.pastCell:{},...O.date===xe?k.selectedCell:{}},onClick:()=>{ue&&!Se&&(ye(Ke=>({...Ke,date:xe})),l(Ke=>({...Ke,date:""})),I(!1))},children:ue?ve:""},B)})]})]})})]}),u.jsxs("div",{style:k.formGroup,children:[u.jsx("label",{style:k.label,children:"Time *"}),u.jsx("input",{type:"text",name:"time",value:O.time||"",readOnly:!0,onClick:()=>T(!0),style:{...k.timeInput,borderColor:a.time?"#ff6b6b":"var(--border)"},disabled:n,placeholder:"Select time",title:"Select time"}),a.time&&u.jsx("div",{style:k.fieldError,children:a.time}),j&&u.jsx("div",{style:k.mobileClockOverlay,onClick:()=>T(!1),children:u.jsxs("div",{style:k.mobileClockContainer,onClick:P=>P.stopPropagation(),children:[u.jsx("div",{style:k.mobileTimeDisplay,children:O.time||"16:31"}),u.jsxs("div",{style:k.toggleButtons,children:[u.jsx("button",{type:"button",style:{...k.toggleBtn,...M?k.toggleBtnActive:{}},onClick:()=>$(!0),children:"Hour"}),u.jsx("button",{type:"button",style:{...k.toggleBtn,...M?{}:k.toggleBtnActive},onClick:()=>$(!1),children:"Minute"})]}),u.jsxs("div",{style:k.mobileClockFace,onMouseDown:L,onMouseMove:J,onMouseUp:fe,onMouseLeave:fe,onTouchStart:le,onTouchMove:ae,onTouchEnd:ot,children:[M?Array.from({length:24},(P,B)=>{const K=(B*15-90)*Math.PI/180,Ee=B%2===0?85:70,ve=Math.cos(K)*Ee,ue=Math.sin(K)*Ee;return u.jsx("div",{style:{position:"absolute",left:`calc(50% + ${ve}px)`,top:`calc(50% + ${ue}px)`,transform:"translate(-50%, -50%)",color:B===(O.time?parseInt(O.time.split(":")[0]):16)?"var(--yellow)":"#999",fontSize:B%2===0?"14px":"10px",fontWeight:B===(O.time?parseInt(O.time.split(":")[0]):16)?"bold":"normal"},children:B.toString().padStart(2,"0")},B)}):Array.from({length:12},(P,B)=>{const K=B*5,Ee=(B*30-90)*Math.PI/180,ve=80,ue=Math.cos(Ee)*ve,xe=Math.sin(Ee)*ve;return u.jsx("div",{style:{position:"absolute",left:`calc(50% + ${ue}px)`,top:`calc(50% + ${xe}px)`,transform:"translate(-50%, -50%)",color:K===(O.time?parseInt(O.time.split(":")[1]):31)?"var(--yellow)":"#999",fontSize:"14px",fontWeight:K===(O.time?parseInt(O.time.split(":")[1]):31)?"bold":"normal"},children:K.toString().padStart(2,"0")},B)}),u.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"2px",height:"60px",background:"var(--yellow)",transformOrigin:"50% 100%",transform:M?`translate(-50%, -100%) rotate(${(O.time?parseInt(O.time.split(":")[0]):16)*15}deg)`:`translate(-50%, -100%) rotate(${(O.time?parseInt(O.time.split(":")[1]):31)*6}deg)`,zIndex:2}}),u.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"24px",height:"24px",background:"var(--yellow)",borderRadius:"50%",transform:M?`translate(-50%, -50%) translate(${Math.cos(((O.time?parseInt(O.time.split(":")[0]):16)*15-90)*Math.PI/180)*60}px, ${Math.sin(((O.time?parseInt(O.time.split(":")[0]):16)*15-90)*Math.PI/180)*60}px)`:`translate(-50%, -50%) translate(${Math.cos(((O.time?parseInt(O.time.split(":")[1]):31)*6-90)*Math.PI/180)*70}px, ${Math.sin(((O.time?parseInt(O.time.split(":")[1]):31)*6-90)*Math.PI/180)*70}px)`,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"12px",fontWeight:"bold",zIndex:3},children:M?O.time?parseInt(O.time.split(":")[0]):16:O.time?parseInt(O.time.split(":")[1]):31}),u.jsx("div",{style:k.mobileClockCenter})]}),u.jsxs("div",{style:k.mobileClockButtons,children:[u.jsx("button",{type:"button",style:k.mobileClockBtn,onClick:()=>ye(P=>({...P,time:""})),children:"Clear"}),u.jsx("button",{type:"button",style:k.mobileClockBtn,onClick:()=>T(!1),children:"Cancel"}),u.jsx("button",{type:"button",style:{...k.mobileClockBtn,color:"var(--yellow)"},onClick:()=>{l(P=>({...P,time:""})),T(!1),$(!0)},children:"Set"})]})]})})]})]}):O.eventType==="interval"||O.eventType==="repetitive"?u.jsxs("div",{children:[u.jsxs("div",{style:k.row,children:[u.jsxs("div",{style:{...k.formGroup,position:"relative"},children:[u.jsx("label",{style:k.label,children:"Start Date *"}),u.jsx("input",{type:"text",name:"date",value:O.date||"",readOnly:!0,onClick:()=>I(!0),style:{...k.input,cursor:"pointer",borderColor:a.date?"#ff6b6b":"var(--border)"},disabled:n,placeholder:"Select start date",title:"Select start date",required:!0}),a.date&&u.jsx("div",{style:k.fieldError,children:a.date}),C&&u.jsx("div",{style:k.datePickerOverlay,onClick:()=>I(!1),children:u.jsxs("div",{style:k.datePickerContainer,onClick:P=>P.stopPropagation(),children:[u.jsxs("div",{style:k.datePickerHeader,children:[u.jsx("button",{type:"button",style:k.navBtn,onClick:()=>{Z===0?(se(11),re(F-1)):se(Z-1)},children:""}),u.jsxs("div",{style:k.monthYearContainer,children:[u.jsx("span",{style:k.monthYear,onClick:()=>de(!W),children:new Date(F,Z).toLocaleDateString("en-US",{month:"long"})}),u.jsx("span",{style:k.monthYear,onClick:()=>at(!Ae),children:F})]}),u.jsx("button",{type:"button",style:k.navBtn,onClick:()=>{Z===11?(se(0),re(F+1)):se(Z+1)},children:""})]}),W&&u.jsx("div",{style:k.pickerGrid,children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((P,B)=>u.jsx("div",{style:{...k.pickerItem,...B===Z?k.selectedPickerItem:{}},onClick:()=>{se(B),de(!1)},children:P},P))}),Ae&&u.jsx("div",{style:k.yearPickerContainer,children:u.jsx("div",{style:k.pickerGrid,children:Array.from({length:12},(P,B)=>{const K=F-5+B;return u.jsx("div",{style:{...k.pickerItem,...K===F?k.selectedPickerItem:{}},onClick:()=>{re(K),at(!1)},children:K},K)})})}),!W&&!Ae&&u.jsxs("div",{style:k.daysGrid,children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(P=>u.jsx("div",{style:k.dayHeader,children:P},P)),Array.from({length:42},(P,B)=>{const K=new Date(F,Z,1).getDay(),Ee=new Date(F,Z+1,0).getDate(),ve=B-K+1,ue=ve>0&&ve<=Ee,xe=ue?`${F}-${(Z+1).toString().padStart(2,"0")}-${ve.toString().padStart(2,"0")}`:"",ge=xe===new Date().toISOString().split("T")[0],Se=xe<dt;return u.jsx("div",{style:{...k.dayCell,...ue?{}:{color:"#ccc"},...ge?k.todayCell:{},...Se?k.pastCell:{},...O.date===xe?k.selectedCell:{}},onClick:()=>{ue&&!Se&&(ye(Ke=>({...Ke,date:xe})),l(Ke=>({...Ke,date:""})),I(!1))},children:ue?ve:""},B)})]})]})})]}),u.jsxs("div",{style:{...k.formGroup,position:"relative"},children:[u.jsx("label",{style:k.label,children:"End Date *"}),u.jsx("input",{type:"text",name:"endDate",value:O.endDate||"",readOnly:!0,onClick:()=>v(!0),style:{...k.input,cursor:"pointer",borderColor:a.endDate?"#ff6b6b":"var(--border)"},disabled:n,placeholder:"Select end date",title:"Select end date",required:!0}),a.endDate&&u.jsx("div",{style:k.fieldError,children:a.endDate}),R&&u.jsx("div",{style:k.datePickerOverlay,onClick:()=>v(!1),children:u.jsxs("div",{style:k.datePickerContainer,onClick:P=>P.stopPropagation(),children:[u.jsxs("div",{style:k.datePickerHeader,children:[u.jsx("button",{type:"button",style:k.navBtn,onClick:()=>{Z===0?(se(11),re(F-1)):se(Z-1)},children:""}),u.jsxs("div",{style:k.monthYearContainer,children:[u.jsx("span",{style:k.monthYear,onClick:()=>de(!W),children:new Date(F,Z).toLocaleDateString("en-US",{month:"long"})}),u.jsx("span",{style:k.monthYear,onClick:()=>at(!Ae),children:F})]}),u.jsx("button",{type:"button",style:k.navBtn,onClick:()=>{Z===11?(se(0),re(F+1)):se(Z+1)},children:""})]}),W&&u.jsx("div",{style:k.pickerGrid,children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((P,B)=>u.jsx("div",{style:{...k.pickerItem,...B===Z?k.selectedPickerItem:{}},onClick:()=>{se(B),de(!1)},children:P},P))}),Ae&&u.jsx("div",{style:k.yearPickerContainer,children:u.jsx("div",{style:k.pickerGrid,children:Array.from({length:12},(P,B)=>{const K=F-5+B;return u.jsx("div",{style:{...k.pickerItem,...K===F?k.selectedPickerItem:{}},onClick:()=>{re(K),at(!1)},children:K},K)})})}),!W&&!Ae&&u.jsxs("div",{style:k.daysGrid,children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(P=>u.jsx("div",{style:k.dayHeader,children:P},P)),Array.from({length:42},(P,B)=>{const K=new Date(F,Z,1).getDay(),Ee=new Date(F,Z+1,0).getDate(),ve=B-K+1,ue=ve>0&&ve<=Ee,xe=ue?`${F}-${(Z+1).toString().padStart(2,"0")}-${ve.toString().padStart(2,"0")}`:"",ge=xe===new Date().toISOString().split("T")[0],Se=xe<dt;return u.jsx("div",{style:{...k.dayCell,...ue?{}:{color:"#ccc"},...ge?k.todayCell:{},...Se?k.pastCell:{},...O.endDate===xe?k.selectedCell:{}},onClick:()=>{if(ue&&!Se){if(O.date&&xe<O.date){l(Ke=>({...Ke,endDate:"End date must be after start date"}));return}ye(Ke=>({...Ke,endDate:xe})),l(Ke=>({...Ke,endDate:""})),v(!1)}},children:ue?ve:""},B)})]})]})})]})]}),u.jsxs("div",{style:k.row,children:[u.jsxs("div",{style:k.formGroup,children:[u.jsx("label",{style:k.label,children:"Start Time *"}),u.jsx("input",{type:"text",name:"time",value:O.time||"",readOnly:!0,onClick:()=>T(!0),style:{...k.timeInput,borderColor:a.time?"#ff6b6b":"var(--border)"},disabled:n,placeholder:"Select start time",title:"Select start time"}),a.time&&u.jsx("div",{style:k.fieldError,children:a.time}),j&&u.jsx("div",{style:k.mobileClockOverlay,onClick:()=>T(!1),children:u.jsxs("div",{style:k.mobileClockContainer,onClick:P=>P.stopPropagation(),children:[u.jsx("div",{style:k.mobileTimeDisplay,children:O.time||"16:31"}),u.jsxs("div",{style:k.toggleButtons,children:[u.jsx("button",{type:"button",style:{...k.toggleBtn,...M?k.toggleBtnActive:{}},onClick:()=>$(!0),children:"Hour"}),u.jsx("button",{type:"button",style:{...k.toggleBtn,...M?{}:k.toggleBtnActive},onClick:()=>$(!1),children:"Minute"})]}),u.jsxs("div",{style:k.mobileClockFace,onMouseDown:L,onMouseMove:J,onMouseUp:fe,onMouseLeave:fe,onTouchStart:le,onTouchMove:ae,onTouchEnd:ot,children:[M?Array.from({length:24},(P,B)=>{const K=(B*15-90)*Math.PI/180,Ee=B%2===0?85:70,ve=Math.cos(K)*Ee,ue=Math.sin(K)*Ee;return u.jsx("div",{style:{position:"absolute",left:`calc(50% + ${ve}px)`,top:`calc(50% + ${ue}px)`,transform:"translate(-50%, -50%)",color:B===(O.time?parseInt(O.time.split(":")[0]):16)?"var(--yellow)":"#999",fontSize:B%2===0?"14px":"10px",fontWeight:B===(O.time?parseInt(O.time.split(":")[0]):16)?"bold":"normal"},children:B.toString().padStart(2,"0")},B)}):Array.from({length:12},(P,B)=>{const K=B*5,Ee=(B*30-90)*Math.PI/180,ve=80,ue=Math.cos(Ee)*ve,xe=Math.sin(Ee)*ve;return u.jsx("div",{style:{position:"absolute",left:`calc(50% + ${ue}px)`,top:`calc(50% + ${xe}px)`,transform:"translate(-50%, -50%)",color:K===(O.time?parseInt(O.time.split(":")[1]):31)?"var(--yellow)":"#999",fontSize:"14px",fontWeight:K===(O.time?parseInt(O.time.split(":")[1]):31)?"bold":"normal"},children:K.toString().padStart(2,"0")},B)}),u.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"2px",height:"60px",background:"var(--yellow)",transformOrigin:"50% 100%",transform:M?`translate(-50%, -100%) rotate(${(O.time?parseInt(O.time.split(":")[0]):16)*15}deg)`:`translate(-50%, -100%) rotate(${(O.time?parseInt(O.time.split(":")[1]):31)*6}deg)`,zIndex:2}}),u.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"24px",height:"24px",background:"var(--yellow)",borderRadius:"50%",transform:M?`translate(-50%, -50%) translate(${Math.cos(((O.time?parseInt(O.time.split(":")[0]):16)*15-90)*Math.PI/180)*60}px, ${Math.sin(((O.time?parseInt(O.time.split(":")[0]):16)*15-90)*Math.PI/180)*60}px)`:`translate(-50%, -50%) translate(${Math.cos(((O.time?parseInt(O.time.split(":")[1]):31)*6-90)*Math.PI/180)*70}px, ${Math.sin(((O.time?parseInt(O.time.split(":")[1]):31)*6-90)*Math.PI/180)*70}px)`,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"12px",fontWeight:"bold",zIndex:3},children:M?O.time?parseInt(O.time.split(":")[0]):16:O.time?parseInt(O.time.split(":")[1]):31}),u.jsx("div",{style:k.mobileClockCenter})]}),u.jsxs("div",{style:k.mobileClockButtons,children:[u.jsx("button",{type:"button",style:k.mobileClockBtn,onClick:()=>ye(P=>({...P,time:""})),children:"Clear"}),u.jsx("button",{type:"button",style:k.mobileClockBtn,onClick:()=>T(!1),children:"Cancel"}),u.jsx("button",{type:"button",style:{...k.mobileClockBtn,color:"var(--yellow)"},onClick:()=>{l(P=>({...P,time:""})),T(!1),$(!0)},children:"Set"})]})]})})]}),u.jsxs("div",{style:k.formGroup,children:[u.jsx("label",{style:k.label,children:"End Time *"}),u.jsx("input",{type:"text",name:"endTime",value:O.endTime||"",readOnly:!0,onClick:()=>A(!0),style:{...k.timeInput,borderColor:a.endTime?"#ff6b6b":"var(--border)"},disabled:n,placeholder:"Select end time",title:"Select end time"}),a.endTime&&u.jsx("div",{style:k.fieldError,children:a.endTime}),x&&u.jsx("div",{style:k.mobileClockOverlay,onClick:()=>A(!1),children:u.jsxs("div",{style:k.mobileClockContainer,onClick:P=>P.stopPropagation(),children:[u.jsx("div",{style:k.mobileTimeDisplay,children:O.endTime||"16:31"}),u.jsxs("div",{style:k.toggleButtons,children:[u.jsx("button",{type:"button",style:{...k.toggleBtn,...Q?k.toggleBtnActive:{}},onClick:()=>w(!0),children:"Hour"}),u.jsx("button",{type:"button",style:{...k.toggleBtn,...Q?{}:k.toggleBtnActive},onClick:()=>w(!1),children:"Minute"})]}),u.jsxs("div",{style:k.mobileClockFace,onMouseDown:P=>{E(!0);const B=P.currentTarget.getBoundingClientRect();te(P.clientX,P.clientY,B)},onMouseMove:P=>{if(!b)return;const B=P.currentTarget.getBoundingClientRect();te(P.clientX,P.clientY,B)},onMouseUp:fe,onMouseLeave:fe,onTouchStart:P=>{E(!0);const B=P.currentTarget.getBoundingClientRect(),K=P.touches[0];te(K.clientX,K.clientY,B)},onTouchMove:P=>{if(!b)return;P.preventDefault();const B=P.currentTarget.getBoundingClientRect(),K=P.touches[0];te(K.clientX,K.clientY,B)},onTouchEnd:ot,children:[Q?Array.from({length:24},(P,B)=>{const K=(B*15-90)*Math.PI/180,Ee=B%2===0?85:70,ve=Math.cos(K)*Ee,ue=Math.sin(K)*Ee;return u.jsx("div",{style:{position:"absolute",left:`calc(50% + ${ve}px)`,top:`calc(50% + ${ue}px)`,transform:"translate(-50%, -50%)",color:B===(O.endTime?parseInt(O.endTime.split(":")[0]):16)?"var(--yellow)":"#999",fontSize:B%2===0?"14px":"10px",fontWeight:B===(O.endTime?parseInt(O.endTime.split(":")[0]):16)?"bold":"normal"},children:B.toString().padStart(2,"0")},B)}):Array.from({length:12},(P,B)=>{const K=B*5,Ee=(B*30-90)*Math.PI/180,ve=80,ue=Math.cos(Ee)*ve,xe=Math.sin(Ee)*ve;return u.jsx("div",{style:{position:"absolute",left:`calc(50% + ${ue}px)`,top:`calc(50% + ${xe}px)`,transform:"translate(-50%, -50%)",color:K===(O.endTime?parseInt(O.endTime.split(":")[1]):31)?"var(--yellow)":"#999",fontSize:"14px",fontWeight:K===(O.endTime?parseInt(O.endTime.split(":")[1]):31)?"bold":"normal"},children:K.toString().padStart(2,"0")},B)}),u.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"2px",height:"60px",background:"var(--yellow)",transformOrigin:"50% 100%",transform:Q?`translate(-50%, -100%) rotate(${(O.endTime?parseInt(O.endTime.split(":")[0]):16)*15}deg)`:`translate(-50%, -100%) rotate(${(O.endTime?parseInt(O.endTime.split(":")[1]):31)*6}deg)`,zIndex:2}}),u.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"24px",height:"24px",background:"var(--yellow)",borderRadius:"50%",transform:Q?`translate(-50%, -50%) translate(${Math.cos(((O.endTime?parseInt(O.endTime.split(":")[0]):16)*15-90)*Math.PI/180)*60}px, ${Math.sin(((O.endTime?parseInt(O.endTime.split(":")[0]):16)*15-90)*Math.PI/180)*60}px)`:`translate(-50%, -50%) translate(${Math.cos(((O.endTime?parseInt(O.endTime.split(":")[1]):31)*6-90)*Math.PI/180)*70}px, ${Math.sin(((O.endTime?parseInt(O.endTime.split(":")[1]):31)*6-90)*Math.PI/180)*70}px)`,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"12px",fontWeight:"bold",zIndex:3},children:Q?O.endTime?parseInt(O.endTime.split(":")[0]):16:O.endTime?parseInt(O.endTime.split(":")[1]):31}),u.jsx("div",{style:k.mobileClockCenter})]}),u.jsxs("div",{style:k.mobileClockButtons,children:[u.jsx("button",{type:"button",style:k.mobileClockBtn,onClick:()=>ye(P=>({...P,endTime:""})),children:"Clear"}),u.jsx("button",{type:"button",style:k.mobileClockBtn,onClick:()=>A(!1),children:"Cancel"}),u.jsx("button",{type:"button",style:{...k.mobileClockBtn,color:"var(--yellow)"},onClick:()=>{l(P=>({...P,endTime:""})),A(!1),w(!0)},children:"Set"})]})]})})]})]})]}):null,u.jsxs("div",{style:k.formGroup,children:[u.jsx("label",{style:k.label,children:"Description"}),u.jsx("textarea",{name:"description",value:O.description,onChange:$e,placeholder:"Describe your vacant... (optional)",style:k.textarea,disabled:n})]}),c&&u.jsx("div",{style:k.errorBox,children:c}),u.jsxs("div",{style:k.buttonGroup,children:[u.jsxs("button",{type:"submit",disabled:n||p,style:{...k.submitBtn,opacity:n||p?.6:1,cursor:n||p?"not-allowed":"pointer"},onMouseEnter:P=>{if(!n&&!p){const B=P.currentTarget.querySelector(".fill-effect");B&&(B.style.width="100%"),P.currentTarget.style.color="var(--bg-black)"}},onMouseLeave:P=>{if(!n&&!p){const B=P.currentTarget.querySelector(".fill-effect");B&&(B.style.width="0"),P.currentTarget.style.color="var(--white)"}},children:[u.jsx("div",{className:"fill-effect",style:k.submitFillEffect}),u.jsx("span",{style:{position:"relative",zIndex:1},children:n?"Creating...":p?"Created!":"Create Vacant"})]}),u.jsxs("button",{type:"button",onClick:()=>t("/"),style:k.cancelBtn,disabled:n,onMouseEnter:P=>{if(!n){const B=P.currentTarget.querySelector(".fill-effect");B&&(B.style.width="100%"),P.currentTarget.style.color="var(--bg-black)"}},onMouseLeave:P=>{if(!n){const B=P.currentTarget.querySelector(".fill-effect");B&&(B.style.width="0"),P.currentTarget.style.color="var(--white)"}},children:[u.jsx("div",{className:"fill-effect",style:k.cancelFillEffect}),u.jsx("span",{style:{position:"relative",zIndex:1},children:"Cancel"})]})]})]})]})})})}const k={container:{minHeight:"100vh",background:"var(--bg-black)",padding:"40px 20px"},card:{background:"var(--bg-card)",border:"1px solid var(--border)",borderRadius:"var(--radius)",padding:"32px",maxWidth:"600px",margin:"0 auto"},title:{color:"var(--yellow)",marginBottom:"24px",fontSize:"28px",margin:"0 0 24px 0"},errorBox:{background:"rgba(255, 107, 107, 0.1)",color:"#ff6b6b",padding:"12px 16px",borderRadius:"var(--radius)",marginBottom:"20px",fontSize:"14px",border:"1px solid rgba(255, 107, 107, 0.3)"},successBox:{background:"rgba(76, 175, 80, 0.1)",color:"#4caf50",padding:"12px 16px",borderRadius:"var(--radius)",marginBottom:"20px",fontSize:"14px",border:"1px solid rgba(76, 175, 80, 0.3)"},form:{display:"flex",flexDirection:"column",gap:"20px"},formGroup:{display:"flex",flexDirection:"column",flex:1,position:"relative"},label:{color:"var(--white)",marginBottom:"8px",fontWeight:"500",fontSize:"14px"},input:{padding:"10px 12px",background:"var(--bg-black)",border:"1px solid var(--border)",borderRadius:"var(--radius)",color:"var(--white)",fontSize:"14px",fontFamily:"inherit",transition:"border-color 0.2s"},timeInput:{padding:"10px 12px",background:"var(--bg-black)",border:"1px solid var(--border)",borderRadius:"var(--radius)",color:"var(--white)",fontSize:"14px",fontFamily:"inherit",transition:"border-color 0.2s",cursor:"pointer",width:"100%"},textarea:{padding:"10px 12px",background:"var(--bg-black)",border:"1px solid var(--border)",borderRadius:"var(--radius)",color:"var(--white)",fontSize:"14px",fontFamily:"inherit",minHeight:"100px",resize:"vertical"},helpText:{color:"var(--gray)",fontSize:"12px",marginTop:"4px"},row:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},buttonGroup:{display:"flex",gap:"12px",marginTop:"24px"},submitBtn:{flex:1,padding:"12px 24px",background:"transparent",color:"var(--white)",border:"2px solid var(--yellow)",borderRadius:"var(--radius)",fontWeight:"600",cursor:"pointer",fontSize:"16px",position:"relative",overflow:"hidden",transition:"color 0.3s ease"},cancelBtn:{flex:1,padding:"12px 24px",background:"transparent",color:"var(--white)",border:"2px solid var(--yellow)",borderRadius:"var(--radius)",fontWeight:"600",cursor:"pointer",fontSize:"16px",position:"relative",overflow:"hidden",transition:"color 0.3s ease"},submitFillEffect:{position:"absolute",top:0,left:0,width:0,height:"100%",background:"var(--yellow)",transition:"width 0.3s ease",zIndex:0},cancelFillEffect:{position:"absolute",top:0,left:0,width:0,height:"100%",background:"var(--yellow)",transition:"width 0.3s ease",zIndex:0},errorText:{color:"var(--gray)",textAlign:"center",marginBottom:"16px"},btn:{background:"var(--yellow)",color:"var(--bg-black)",border:"none",padding:"10px 20px",borderRadius:"var(--radius)",cursor:"pointer",fontWeight:"600",width:"100%"},dropdown:{position:"absolute",top:"100%",left:0,right:0,background:"white",border:"1px solid #ddd",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e3,maxHeight:"200px",overflowY:"auto"},dropdownOption:{padding:"12px 16px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",borderBottom:"1px solid #f0f0f0",transition:"background-color 0.2s ease"},dropdownIcon:{fontSize:"16px",color:"#666"},dropdownText:{fontSize:"14px",color:"#333",flex:1},toggleButtons:{display:"flex",gap:"10px",justifyContent:"center"},toggleBtn:{padding:"8px 16px",border:"1px solid #ddd",background:"white",borderRadius:"20px",cursor:"pointer",fontSize:"14px"},toggleBtnActive:{background:"var(--yellow)",color:"#000",borderColor:"var(--yellow)"},mobileClockOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1001},mobileClockContainer:{background:"var(--bg-card)",border:"1px solid var(--border)",borderRadius:"16px",padding:"24px",width:"340px",color:"var(--white)"},mobileTimeDisplay:{fontSize:"48px",fontWeight:"300",color:"var(--white)",textAlign:"center",marginBottom:"24px",letterSpacing:"2px"},mobileClockFace:{width:"240px",height:"240px",borderRadius:"50%",position:"relative",margin:"0 auto 24px",cursor:"pointer",background:"var(--bg-black)",border:"1px solid var(--border)"},mobileClockCenter:{position:"absolute",top:"50%",left:"50%",width:"6px",height:"6px",background:"var(--yellow)",borderRadius:"50%",transform:"translate(-50%, -50%)",zIndex:4},mobileClockButtons:{display:"flex",justifyContent:"space-between",alignItems:"center"},mobileClockBtn:{background:"transparent",border:"none",color:"var(--gray)",fontSize:"16px",fontWeight:"500",cursor:"pointer",padding:"8px 16px"},datePickerOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},datePickerContainer:{background:"white",borderRadius:"12px",padding:"20px",width:"320px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)"},datePickerHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},navBtn:{background:"none",border:"none",fontSize:"20px",cursor:"pointer",padding:"5px 10px",borderRadius:"4px",color:"#333"},monthYear:{fontSize:"16px",fontWeight:"600",color:"#333",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"background-color 0.2s"},daysGrid:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"2px"},dayHeader:{padding:"8px",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#666"},dayCell:{padding:"8px",textAlign:"center",cursor:"pointer",borderRadius:"4px",fontSize:"14px",color:"#333",transition:"background-color 0.2s",":hover":{backgroundColor:"#f0f0f0"}},todayCell:{background:"#e3f2fd",color:"#1976d2"},pastCell:{color:"#ccc",cursor:"not-allowed"},selectedCell:{background:"var(--yellow)",color:"#000",fontWeight:"bold"},monthYearContainer:{display:"flex",gap:"10px"},pickerGrid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px",marginBottom:"15px"},pickerItem:{padding:"10px",textAlign:"center",cursor:"pointer",borderRadius:"6px",fontSize:"14px",color:"#333",transition:"background-color 0.2s",border:"1px solid #ddd"},selectedPickerItem:{background:"var(--yellow)",color:"#000",fontWeight:"bold",borderColor:"var(--yellow)"},yearPickerContainer:{marginBottom:"15px"},numberInputContainer:{position:"relative",width:"120px"},numberInputField:{padding:"10px 32px 10px 12px",background:"var(--bg-black)",border:"1px solid var(--border)",borderRadius:"var(--radius)",color:"var(--white)",fontSize:"14px",fontFamily:"inherit",transition:"border-color 0.2s",width:"100%",textAlign:"center"},arrowButtons:{position:"absolute",right:"1px",top:"1px",bottom:"1px",width:"30px",display:"flex",flexDirection:"column"},arrowBtn:{flex:1,background:"var(--yellow)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",color:"var(--bg-black)",fontWeight:"bold",transition:"opacity 0.2s ease"},categoryRow:{display:"grid",gridTemplateColumns:"1fr 140px 140px",gap:"16px",alignItems:"start"},categoryGroup:{display:"flex",flexDirection:"column",flex:1},fieldError:{color:"#ff6b6b",fontSize:"13px",marginTop:"6px",fontWeight:"500",display:"block",backgroundColor:"rgba(255, 107, 107, 0.15)",padding:"6px 10px",borderRadius:"6px",border:"1px solid rgba(255, 107, 107, 0.4)",lineHeight:"1.4"}},Uk="modulepreload",zk=function(t){return"/HanggOut/"+t},sb={},Bk=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=zk(c),c in sb)return;sb[c]=!0;const d=c.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Uk,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((f,y)=>{m.addEventListener("load",f),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return r.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},qk=async t=>{try{console.log("Creating request with data:",t);const{getCurrentUser:e}=await Bk(async()=>{const{getCurrentUser:a}=await Promise.resolve().then(()=>_k);return{getCurrentUser:a}},void 0);if(!e())throw new Error("User must be authenticated to create a request");if(!t.vacantId)throw new Error("Vacant ID is required");if(!t.requesterUid)throw new Error("User authentication required");if(!t.requesterName)throw new Error("Requester name is required");if(!t.requesterEmail)throw new Error("Requester email is required");if(!t.numberOfPersons||t.numberOfPersons<1)throw new Error("Number of persons must be at least 1");if(!t.gender)throw new Error("Gender selection is required");const i=Number(t.numberOfPersons);if(i<=0||i>20)throw new Error("Number of persons must be between 1 and 20");const r={...t,numberOfPersons:i,status:"pending",message:t.message||"",tagUsers:t.tagUsers||"",createdAt:$i(),updatedAt:$i()},s=await tc(Pt(Ge,"requests"),r);console.log("Request created successfully with ID:",s.id);try{const a=await _s(t.vacantId);a&&a.creatorUid&&(await La(a.creatorUid,`New request to join "${a.title}" from ${t.requesterName} for ${i} person(s)`,"info",{requestId:s.id,vacantId:t.vacantId,vacantTitle:a.title,requesterName:t.requesterName,numberOfPersons:i}),console.log("Notification sent to vacant creator"))}catch(a){console.error("Error sending notification:",a)}return s.id}catch(e){throw console.error("Error raising request:",e),e}},yf=async t=>{try{const e=In(Pt(Ge,"requests"),Cn("vacantId","==",t)),n=await ti(e),i=[];return n.forEach(r=>{i.push({id:r.id,...r.data()})}),i.sort((r,s)=>{var c,d;const a=((c=r.createdAt)==null?void 0:c.seconds)||0;return(((d=s.createdAt)==null?void 0:d.seconds)||0)-a}),console.log(`Fetched ${i.length} requests for vacant ${t}`),i}catch(e){throw console.error("Error getting requests:",e),e}},KS=async t=>{try{const e=In(Pt(Ge,"requests"),Cn("requesterUid","==",t)),n=await ti(e),i=[];return n.forEach(r=>{i.push({id:r.id,...r.data()})}),i.sort((r,s)=>{var c,d;const a=((c=r.createdAt)==null?void 0:c.seconds)||0;return(((d=s.createdAt)==null?void 0:d.seconds)||0)-a}),console.log(`Fetched ${i.length} requests for user ${t}`),i.length>0&&console.log("Sample request data:",i[0]),i}catch(e){throw console.error("Error getting user requests:",e),e}},cd=async(t,e,n={})=>{try{const i=ei(Ge,"requests",t);return await ro(i,{status:e,...n,updatedAt:$i()}),console.log("Request status updated to:",e),!0}catch(i){throw console.error("Error updating request status:",i),i}},Hk=async t=>{try{console.log("Fetching requests for vacants created by:",t);const e=In(Pt(Ge,"vacants"),Cn("creatorUid","==",t)),n=await ti(e),i=[];if(n.forEach(a=>{i.push(a.id)}),i.length===0)return console.log("No vacants found for user"),[];console.log(`Found ${i.length} vacants for user:`,i);const r=[],s=[];for(let a=0;a<i.length;a+=10)s.push(i.slice(a,a+10));for(const a of s){const l=In(Pt(Ge,"requests"),Cn("vacantId","in",a));(await ti(l)).forEach(d=>{r.push({id:d.id,...d.data()})})}return r.sort((a,l)=>{var p,m;const c=((p=a.createdAt)==null?void 0:p.seconds)||0;return(((m=l.createdAt)==null?void 0:m.seconds)||0)-c}),console.log(`Fetched ${r.length} requests for user's vacants`),r.length>0&&console.log("Sample received request:",r[0]),r}catch(e){throw console.error("Error getting pending requests:",e),console.error("Error details:",e.message),e}},WS="/HanggOut/assets/status-D8fx3wkO.png",Km="/HanggOut/assets/gender-CTubvUKS.png",ih="/HanggOut/assets/peoples-DD05F2KL.png";function Fk(){const{id:t}=vT(),e=Rn(),{user:n}=Xr(),[i,r]=N.useState(null),[s,a]=N.useState(!0),[l,c]=N.useState(!1),[d,p]=N.useState(!1),[m,f]=N.useState(null),[y,S]=N.useState(!1);N.useEffect(()=>{t&&D()},[t,n]);const D=async()=>{try{a(!0);let A=await _s(t);if(A.status==="open"&&A.date&&A.time){let M;A.eventType==="repetitive"&&A.endDate&&A.time?M=new Date(`${A.endDate}T${A.time}`):M=new Date(`${A.date}T${A.time}`),M<=new Date&&(A={...A,status:"close"})}if(r(A),!A.creatorPhoto&&(n==null?void 0:n.uid)===A.creatorUid?f(n.photo):f(A.creatorPhoto),n!=null&&n.uid)try{const $=(await KS(n.uid)).some(Q=>Q.vacantId===t&&(Q.status==="pending"||Q.status==="accepted"));p($)}catch(M){console.error("Error checking requests:",M),p(!1)}}catch(A){console.error("Error loading vacant:",A)}finally{a(!1)}},j=()=>{if(!n){S(!0);return}e(`/raise-request?vacantId=${t}`)};if(s)return u.jsx("div",{style:pe.container,children:u.jsxs("div",{style:pe.loadingContainer,children:[u.jsxs("div",{style:pe.loadingWrapper,children:[u.jsx("img",{src:za,alt:"loading",style:pe.loading1}),u.jsx("img",{src:Ba,alt:"loading",style:pe.loading2})]}),u.jsx("p",{style:pe.loadingText,children:"Loading vacant details..."})]})});if(!i)return u.jsxs("div",{style:pe.container,children:[u.jsx("p",{style:pe.errorText,children:"Vacant not found"}),u.jsx("button",{style:pe.btn,onClick:()=>e("/"),children:"Back to Home"})]});const T=i.creatorUid===(n==null?void 0:n.uid),x=i.status==="closed"||i.status==="close";return u.jsxs("div",{style:pe.container,children:[u.jsx("div",{className:"container",children:u.jsxs("div",{style:pe.detailsCard,children:[u.jsxs("div",{style:pe.header,children:[u.jsx("h1",{style:pe.title,children:i.title}),u.jsx("span",{style:pe.badge,children:i.category})]}),u.jsxs("div",{style:pe.infoGrid,children:[u.jsxs("div",{style:pe.infoItem,children:[u.jsxs("span",{style:pe.label,children:[u.jsx("img",{src:Or,alt:"location",style:pe.iconImg})," Location"]}),u.jsx("p",{children:i.location||`${i.area||"Unknown area"}, ${i.city||"Unknown city"}`})]}),u.jsxs("div",{style:pe.infoItem,children:[u.jsxs("span",{style:pe.label,children:[u.jsx("img",{src:Ua,alt:"date",style:pe.iconImg})," Date"]}),u.jsx("p",{children:i.eventType==="interval"||i.eventType==="repetitive"&&i.endDate?i.date===i.endDate?i.date:`${i.date} to ${i.endDate}`:i.date})]}),u.jsxs("div",{style:pe.infoItem,children:[u.jsxs("span",{style:pe.label,children:[u.jsx("img",{src:Gr,alt:"time",style:pe.iconImg})," Time"]}),u.jsx("p",{children:i.eventType==="repetitive"?i.time||"Not specified":i.eventType==="interval"&&i.endTime?`${i.time||"Not specified"} - ${i.endTime}`:i.time||"Not specified"})]}),u.jsxs("div",{style:pe.infoItem,children:[u.jsxs("span",{style:pe.label,children:[u.jsx("img",{src:ih,alt:"people",style:pe.iconImg})," People Needed"]}),u.jsx("p",{children:i.requiredPersons})]}),u.jsxs("div",{style:pe.infoItem,children:[u.jsxs("span",{style:pe.label,children:[u.jsx("img",{src:Km,alt:"gender",style:pe.iconImg})," Gender"]}),u.jsx("p",{children:i.gender||"Not specified"})]}),u.jsxs("div",{style:pe.infoItem,children:[u.jsxs("span",{style:pe.label,children:[u.jsx("img",{src:ld,alt:"applied",style:pe.iconImg})," Applied"]}),u.jsxs("p",{children:[i.applied||0," / ",i.requiredPersons]})]}),u.jsxs("div",{style:pe.infoItem,children:[u.jsxs("span",{style:pe.label,children:[u.jsx("img",{src:WS,alt:"status",style:pe.iconImg})," Status"]}),u.jsx("p",{style:{color:i.status==="open"?"#4caf50":"#ff9800",fontWeight:"600"},children:i.status==="open"?"Open":"Closed"})]}),u.jsxs("div",{style:pe.infoItem,children:[u.jsxs("span",{style:pe.label,children:[u.jsx("img",{src:Gr,alt:"event type",style:pe.iconImg})," Event Type"]}),u.jsx("p",{children:i.eventType==="single"?"Single Event":i.eventType==="interval"?"Time Interval":i.eventType==="repetitive"?"Repetitive Event":"Not specified"})]})]}),u.jsxs("div",{style:pe.descriptionSection,children:[u.jsx("h3",{style:pe.sectionTitle,children:"Description"}),u.jsx("p",{children:i.description||"No description provided"})]}),u.jsxs("div",{style:pe.creatorSection,children:[u.jsx("h3",{style:pe.sectionTitle,children:"Created by"}),u.jsx("div",{style:pe.creatorInfo,children:u.jsxs("div",{children:[u.jsx("p",{style:pe.creatorName,children:i.creatorName}),u.jsx("p",{style:pe.creatorEmail,children:i.creatorEmail})]})})]}),d?u.jsx("div",{style:pe.appliedBox,children:" You have already sent a request for this vacant"}):T?u.jsx("div",{style:pe.infoBox,children:"This is your vacant. You cannot apply to it."}):x?u.jsx("div",{style:pe.infoBox,children:"This vacant is full/closed. No more applications accepted."}):u.jsx("button",{style:{...pe.joinBtn,background:l?"var(--bg-black)":"var(--yellow)",color:l?"var(--yellow)":"var(--bg-black)",border:l?"2px solid var(--yellow)":"none"},onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onClick:j,children:"Send Request to Join"})]})}),y&&u.jsx("div",{style:pe.loginOverlay,onClick:()=>S(!1),children:u.jsxs("div",{style:pe.loginModal,onClick:A=>A.stopPropagation(),children:[u.jsx("button",{style:pe.closeLoginButton,onClick:()=>S(!1),children:""}),u.jsx(nh,{onSuccess:()=>S(!1)})]})})]})}const pe={container:{minHeight:"100vh",background:"var(--bg-black)",padding:"20px"},loadingContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"80vh",padding:"60px 20px"},loadingWrapper:{position:"relative",width:"90px",height:"90px",marginBottom:"20px"},loading1:{position:"absolute",width:"90px",height:"90px"},loading2:{position:"absolute",width:"75px",height:"75px",top:"7.5px",left:"7.5px",animation:"spin 2s linear infinite reverse"},loadingText:{color:"var(--yellow)",textAlign:"center",fontSize:"25px",fontWeight:"600"},detailsCard:{background:"var(--bg-card)",border:"1px solid var(--border)",borderRadius:"var(--radius)",padding:"32px",maxWidth:"800px",margin:"0 auto"},header:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"24px"},title:{color:"var(--yellow)",margin:0,fontSize:"28px"},badge:{background:"var(--yellow)",color:"var(--bg-black)",padding:"8px 16px",borderRadius:"20px",fontWeight:"600",fontSize:"14px"},appliedBox:{background:"rgba(76, 175, 80, 0.1)",color:"#4caf50",padding:"16px",borderRadius:"var(--radius)",textAlign:"center",fontWeight:"600",border:"1px solid rgba(76, 175, 80, 0.3)"},infoBox:{background:"rgba(255, 152, 0, 0.1)",color:"#ff9800",padding:"16px",borderRadius:"var(--radius)",textAlign:"center",fontWeight:"600",border:"1px solid rgba(255, 152, 0, 0.3)"},infoGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px",marginBottom:"32px"},infoItem:{borderLeft:"3px solid var(--yellow)",paddingLeft:"16px"},iconImg:{width:"14px",height:"14px",objectFit:"contain",marginRight:"4px",verticalAlign:"middle"},label:{display:"block",color:"var(--gray)",fontSize:"12px",marginBottom:"4px"},descriptionSection:{marginBottom:"32px",borderTop:"1px solid var(--border)",paddingTop:"24px"},sectionTitle:{color:"var(--yellow)",margin:"0 0 12px 0",fontSize:"18px"},creatorSection:{marginBottom:"32px",borderTop:"1px solid var(--border)",paddingTop:"24px"},creatorInfo:{display:"flex",alignItems:"center",gap:"16px"},creatorName:{margin:0,color:"var(--white)",fontWeight:"600"},creatorEmail:{margin:"4px 0 0 0",color:"var(--gray)",fontSize:"14px"},joinBtn:{width:"100%",padding:"16px",background:"var(--yellow)",color:"var(--bg-black)",border:"none",borderRadius:"var(--radius)",fontWeight:"600",fontSize:"16px",cursor:"pointer",transition:"all 0.3s ease"},errorText:{color:"var(--gray)",textAlign:"center"},btn:{background:"var(--yellow)",color:"var(--bg-black)",border:"none",padding:"10px 20px",borderRadius:"var(--radius)",cursor:"pointer",fontWeight:"600"},loginOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},loginModal:{background:"var(--bg-card)",border:"1px solid var(--border)",borderRadius:"16px",width:"100%",maxWidth:"400px",position:"relative",overflow:"hidden",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},closeLoginButton:{position:"absolute",top:"15px",right:"15px",background:"rgba(255, 255, 255, 0.1)",border:"none",color:"var(--white)",fontSize:"20px",cursor:"pointer",width:"30px",height:"30px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",zIndex:1001}};function Gk(){const t=Rn(),{user:e,loading:n}=Xr(),[i,r]=N.useState([]),[s,a]=N.useState(!0),[l,c]=N.useState(null);N.useEffect(()=>{if(!n&&!e){t("/login");return}e&&d()},[e,n,t]);const d=async()=>{try{a(!0),c(null),console.log("Loading vacants for user:",e.uid);const y=await QS(e.uid);console.log("Created vacants:",y),r(y||[])}catch(y){console.error("Error loading vacants:",y),c(y.message)}finally{a(!1)}},p=y=>y?new Date(y).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A",m=y=>y;if(n)return u.jsx("div",{style:Le.container,children:u.jsxs("div",{style:Le.loadingContainer,children:[u.jsxs("div",{style:Le.loadingWrapper,children:[u.jsx("img",{src:za,alt:"loading",style:Le.loading1}),u.jsx("img",{src:Ba,alt:"loading",style:Le.loading2})]}),u.jsx("p",{style:Le.loadingText,children:"Loading vacants..."})]})});if(!e)return null;const f=i;return u.jsx("div",{style:Le.container,children:u.jsxs("div",{style:Le.content,children:[u.jsx("h1",{style:Le.pageTitle,children:"My Vacants"}),l&&u.jsxs("div",{style:Le.errorBox,children:[u.jsxs("p",{children:["Error: ",l]}),u.jsx("button",{style:Le.retryBtn,onClick:d,children:"Retry"})]}),s?u.jsxs("div",{style:Le.loadingContainer,children:[u.jsxs("div",{style:Le.loadingWrapper,children:[u.jsx("img",{src:za,alt:"loading",style:Le.loading1}),u.jsx("img",{src:Ba,alt:"loading",style:Le.loading2})]}),u.jsx("p",{style:Le.loadingText,children:"Loading vacants..."})]}):f.length===0?u.jsxs("div",{style:Le.emptyState,children:[u.jsx("p",{children:"You haven't created any vacants yet"}),u.jsxs("button",{style:Le.primaryBtn,onClick:()=>t("/create-vacant"),onMouseEnter:y=>{const S=y.currentTarget.querySelector(".fill-effect");S&&(S.style.width="100%"),y.currentTarget.style.color="#000"},onMouseLeave:y=>{const S=y.currentTarget.querySelector(".fill-effect");S&&(S.style.width="0"),y.currentTarget.style.color="#ffd700"},children:[u.jsx("div",{className:"fill-effect",style:Le.primaryFillEffect}),u.jsx("span",{style:{position:"relative",zIndex:1},children:"Create Your First Vacant"})]})]}):u.jsx("div",{style:Le.vacantsContainer,children:f.map(y=>u.jsxs("div",{style:Le.card,children:[u.jsx("h3",{style:Le.cardTitle,children:y.title}),u.jsxs("div",{style:Le.cardInfo,children:[u.jsxs("p",{style:Le.infoRow,children:[u.jsx("img",{src:Or,alt:"location",style:Le.iconImg}),y.location||`${y.area||"Unknown"}, ${y.city||"Unknown"}`]}),u.jsxs("p",{style:Le.infoRow,children:[u.jsx("img",{src:Ua,alt:"date",style:Le.iconImg}),y.eventType==="interval"||y.eventType==="repetitive"&&y.endDate?y.date===y.endDate?p(y.date):`${p(y.date)} - ${p(y.endDate)}`:p(y.date),u.jsx("img",{src:Gr,alt:"time",style:Le.iconImg}),y.eventType==="repetitive"&&y.endTime?`${m(y.time)} - ${m(y.endTime)}`:y.eventType==="interval"&&y.endTime?`${m(y.time)} - ${m(y.endTime)}`:m(y.time)]}),u.jsxs("p",{style:Le.infoRow,children:[u.jsx("img",{src:ld,alt:"accepted",style:Le.iconImg}),"Accepted: ",y.applied||0," |",u.jsx("img",{src:ih,alt:"remaining",style:Le.iconImg}),"Remaining: ",Math.max(0,y.requiredPersons-(y.applied||0))]})]}),u.jsx("div",{style:Le.cardActions,children:u.jsxs("button",{style:Le.manageBtn,onClick:()=>{console.log("Navigating to:",`/manage-vacant/${y.id}`),t(`/manage-vacant/${y.id}`)},onMouseEnter:S=>{const D=S.currentTarget.querySelector(".fill-effect");D&&(D.style.width="100%"),S.currentTarget.style.color="#000"},onMouseLeave:S=>{const D=S.currentTarget.querySelector(".fill-effect");D&&(D.style.width="0"),S.currentTarget.style.color="#ffd700"},children:[u.jsx("div",{className:"fill-effect",style:Le.fillEffect}),u.jsx("span",{style:{position:"relative",zIndex:1},children:"Manage Vacant"})]})})]},y.id))})]})})}const Le={container:{minHeight:"100vh",background:"var(--bg-black)",color:"#fff"},loadingContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"60vh",padding:"60px 20px"},loadingWrapper:{position:"relative",width:"90px",height:"90px",marginBottom:"20px"},loading1:{position:"absolute",width:"90px",height:"90px",animation:"spin 2s linear infinite"},loading2:{position:"absolute",width:"75px",height:"75px",top:"7.5px",left:"7.5px",animation:"spin 2s linear infinite reverse"},loadingText:{color:"#ffd700",textAlign:"center",fontSize:"25px",fontWeight:"600"},content:{maxWidth:"1200px",margin:"0 auto",padding:"0 40px 40px 40px",background:"transparent"},pageTitle:{color:"#ffd700",fontSize:"32px",fontWeight:"600",marginBottom:"40px",marginTop:"20px"},errorBox:{background:"rgba(255, 68, 68, 0.1)",border:"1px solid #ff4444",color:"#ff4444",padding:"16px",borderRadius:"12px",marginBottom:"24px",textAlign:"center"},retryBtn:{marginTop:"12px",background:"#ff4444",color:"white",border:"none",padding:"8px 20px",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},emptyState:{textAlign:"center",padding:"80px 20px",color:"#888"},primaryBtn:{marginTop:"24px",background:"transparent",color:"#ffd700",border:"2px solid #ffd700",padding:"14px 32px",borderRadius:"8px",fontWeight:"600",cursor:"pointer",fontSize:"15px",position:"relative",overflow:"hidden",transition:"color 0.3s ease"},primaryFillEffect:{position:"absolute",top:0,left:0,width:0,height:"100%",background:"#ffd700",transition:"width 0.3s ease",zIndex:0},fillEffect:{position:"absolute",top:0,left:0,width:0,height:"100%",background:"#ffd700",transition:"width 0.3s ease",zIndex:0},vacantsContainer:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",maxWidth:"100%"},card:{background:"#1a2332",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",padding:"24px 28px"},cardTitle:{color:"#ffd700",margin:"0 0 16px 0",fontSize:"22px",fontWeight:"600"},cardInfo:{marginBottom:"20px"},infoRow:{color:"#aaa",fontSize:"18px",margin:"8px 0",display:"flex",alignItems:"center",gap:"8px"},iconImg:{width:"17px",height:"17px",objectFit:"contain",verticalAlign:"middle"},cardActions:{display:"flex",gap:"12px",marginTop:"20px"},manageBtn:{padding:"10px 20px",background:"transparent",color:"#ffd700",border:"2px solid #ffd700",borderRadius:"8px",fontWeight:"600",cursor:"pointer",fontSize:"16px",transition:"color 0.3s ease",width:"auto",position:"relative",overflow:"hidden"}};function $k(){const{user:t}=Xr(),e=Rn(),[n,i]=N.useState([]),[r,s]=N.useState(!0);N.useEffect(()=>{t&&a()},[t]);const a=async()=>{try{s(!0);const d=(await QS(t.uid)).filter(p=>{if(!p.date)return!1;const m=new Date(p.date),f=new Date;if(p.time&&p.time!=="TBD"){const[y,S]=p.time.split(":");m.setHours(parseInt(y),parseInt(S))}else m.setHours(23,59,59);return m>=f});i(d)}catch(c){console.error("Error loading active vacants:",c)}finally{s(!1)}},l=c=>c?new Date(c).toLocaleDateString("en-GB"):"N/A";return u.jsxs("div",{style:lt.container,children:[u.jsx("div",{style:lt.profileCard,children:u.jsxs("div",{style:lt.profileHeader,children:[u.jsx("div",{style:lt.avatarContainer,children:u.jsx("div",{style:lt.avatar,children:t!=null&&t.photo?u.jsx("img",{src:t.photo,alt:"Profile",style:lt.avatarImage}):u.jsx("div",{style:lt.avatarIcon,children:""})})}),u.jsxs("div",{style:lt.userInfo,children:[u.jsx("h1",{style:lt.userName,children:(t==null?void 0:t.name)||"Sai Kiran Ravipati"}),u.jsx("p",{style:lt.userEmail,children:(t==null?void 0:t.email)||"saikiranravipati24@gmail.com"})]})]})}),u.jsxs("div",{style:lt.sectionCard,children:[u.jsx("h2",{style:lt.sectionTitle,children:"My Active Vacants"}),r?u.jsx("p",{style:lt.loadingText,children:"Loading..."}):n.length===0?u.jsx("p",{style:lt.emptyText,children:"No active vacants"}):u.jsx("div",{style:lt.vacantsGrid,children:n.map(c=>u.jsxs("div",{style:lt.vacantCard,children:[u.jsx("h3",{style:lt.vacantTitle,children:c.title}),u.jsxs("p",{style:lt.vacantInfo,children:[u.jsx("img",{src:Or,alt:"location",style:lt.iconImg}),c.location||`${c.area||"Unknown"}, ${c.city||"Unknown"}`]}),u.jsxs("p",{style:lt.vacantInfo,children:[u.jsx("img",{src:Ua,alt:"date",style:lt.iconImg}),l(c.date),u.jsx("img",{src:Gr,alt:"time",style:lt.iconImg}),c.time||"TBD"]}),u.jsxs("button",{style:lt.viewBtn,onClick:()=>e(`/vacant/${c.id}`),onMouseEnter:d=>{const p=d.currentTarget.querySelector(".fill-effect");p&&(p.style.height="100%"),d.currentTarget.style.color="var(--bg-black)"},onMouseLeave:d=>{const p=d.currentTarget.querySelector(".fill-effect");p&&(p.style.height="0"),d.currentTarget.style.color="var(--yellow)"},children:[u.jsx("div",{className:"fill-effect",style:lt.fillEffect}),u.jsx("span",{style:{position:"relative",zIndex:1},children:"View Details"})]})]},c.id))})]})]})}const lt={container:{minHeight:"100vh",background:"var(--bg-black)",padding:"20px"},profileCard:{background:"var(--bg-card)",border:"1px solid var(--border)",borderRadius:"var(--radius)",padding:"24px",marginBottom:"20px",maxWidth:"800px",margin:"0 auto 20px auto"},profileHeader:{display:"flex",alignItems:"center",gap:"20px"},avatarContainer:{position:"relative",cursor:"pointer"},avatar:{width:"80px",height:"80px",borderRadius:"50%",background:"var(--yellow)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},avatarImage:{width:"100%",height:"100%",objectFit:"cover"},avatarIcon:{fontSize:"32px",color:"var(--bg-black)"},userInfo:{flex:1},userName:{margin:0,color:"var(--yellow)",fontSize:"24px",fontWeight:"bold"},userEmail:{margin:"4px 0 0 0",color:"var(--gray)",fontSize:"14px"},sectionCard:{background:"var(--bg-card)",border:"1px solid var(--border)",borderRadius:"var(--radius)",padding:"24px",maxWidth:"800px",margin:"0 auto"},sectionTitle:{margin:"0 0 20px 0",color:"var(--yellow)",fontSize:"20px",fontWeight:"bold"},loadingText:{color:"#ffd700",textAlign:"center",fontSize:"25px",fontWeight:"600"},emptyText:{color:"var(--gray)",textAlign:"center",padding:"20px"},vacantsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px"},vacantCard:{background:"var(--bg-black)",border:"1px solid var(--border)",borderRadius:"8px",padding:"16px",display:"flex",flexDirection:"column",height:"100%"},vacantTitle:{margin:"0 0 12px 0",color:"var(--yellow)",fontSize:"18px",fontWeight:"600"},vacantInfo:{margin:"8px 0",color:"var(--gray)",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px"},iconImg:{width:"14px",height:"14px",objectFit:"contain",verticalAlign:"middle"},viewBtn:{marginTop:"auto",width:"100%",padding:"8px",background:"transparent",color:"var(--yellow)",border:"2px solid var(--yellow)",borderRadius:"6px",fontWeight:"600",cursor:"pointer",fontSize:"14px",transition:"color 0.3s ease",position:"relative",overflow:"hidden"},fillEffect:{position:"absolute",bottom:0,left:0,width:"100%",height:0,background:"var(--yellow)",transition:"height 0.3s ease",zIndex:0}};function Yk(){var C;const t=Rn(),[e]=$g(),n=e.get("vacantId"),[i,r]=N.useState({count:"",gender:"",message:"",tagUsers:"",vacantId:n||""}),[s,a]=N.useState(""),[l,c]=N.useState({}),[d,p]=N.useState(""),[m,f]=N.useState(!1),[y,S]=N.useState(null),[D,j]=N.useState(null),[T,x]=N.useState(!1),[A,M]=N.useState(!1);N.useEffect(()=>{const I=document.createElement("style");I.textContent=`
      input[type="number"]::-webkit-outer-spin-button,
      input[type="number"]::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      input[type="number"] {
        -moz-appearance: textfield;
      }
    `,document.head.appendChild(I);const R=JSON.parse(localStorage.getItem("hanggOutUser")||"null");if(j(R),!R){M(!0);return}return n?$(n):c({vacantId:"No vacant selected. Please go back and select a vacant."}),()=>{document.head.contains(document.querySelector("style"))&&document.querySelectorAll("style").forEach(Z=>{Z.textContent.includes("webkit-outer-spin-button")&&document.head.removeChild(Z)})}},[n,t]);const $=async I=>{try{const R=await _s(I);R?(S(R),console.log("Loaded vacant:",R)):c({vacantId:"Vacant not found"})}catch(R){console.error("Error loading vacant:",R),c({vacantId:"Error loading vacant details"})}},Q=I=>{const{name:R,value:v}=I.target;r(Z=>({...Z,[R]:v})),R==="message"||R==="tagUsers"?v.toLowerCase().includes("sex")||v.toLowerCase().includes("fuck")||v.toLowerCase().includes("shit")?a(" Inappropriate language detected. Please use respectful words."):a(""):l[R]&&c(Z=>({...Z,[R]:""})),d&&p("")},w=I=>{const R={...l};I==="count"&&(!i.count||i.count<1)&&(R.count="This field is required"),I==="gender"&&!i.gender&&(R.gender="This field is required"),c(R)},b=()=>{var R;const I={};if(!i.count||i.count<1)I.count="This field is required";else if(i.count>20)I.count="Maximum 20 people allowed";else if(y&&i.count){const v=y.requiredPersons-(((R=y.applicants)==null?void 0:R.length)||0);parseInt(i.count)>v&&(I.count=`Only ${v} spot(s) available`)}return i.gender||(I.gender="This field is required"),i.vacantId||(I.vacantId="Vacant ID missing"),s?!1:(c(I),Object.keys(I).length===0)},E=async I=>{if(I.preventDefault(),p(""),c({}),!D){M(!0);return}if(b()){f(!0);try{const R={requesterUid:D.uid,requesterName:D.name||D.email.split("@")[0],requesterEmail:D.email,numberOfPersons:parseInt(i.count,10),gender:i.gender,message:i.message.trim()||"",tagUsers:i.tagUsers.trim()||"",vacantId:i.vacantId,status:"pending",vacantTitle:(y==null?void 0:y.title)||"",vacantCategory:(y==null?void 0:y.category)||""};console.log("Submitting request with payload:",R);const v=await qk(R);console.log("Request created successfully with ID:",v),p("Request submitted successfully! Redirecting..."),r({count:"",gender:"",message:"",tagUsers:"",vacantId:i.vacantId}),setTimeout(()=>{t(-1)},1500)}catch(R){console.error("Error submitting request:",R),c({submit:R.message||"Error submitting request. Please try again."})}finally{f(!1)}}};return D?u.jsx("div",{style:Re.container,children:u.jsxs("div",{style:Re.formBox,children:[u.jsx("button",{style:{...Re.backBtn,background:T?"black":"yellow",color:T?"yellow":"black",borderColor:T?"yellow":"var(--border)"},onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),onClick:()=>t(-1),disabled:m,children:" Back"}),u.jsx("h2",{style:Re.title,children:"Raise Request"}),y&&u.jsxs("div",{style:Re.vacantInfo,children:[u.jsx("h3",{style:Re.vacantTitle,children:y.title}),u.jsxs("p",{style:Re.vacantDetail,children:[u.jsx("strong",{children:"Category:"})," ",y.category," |",u.jsx("strong",{children:" Location:"})," ",y.location||`${y.area||""}${y.area&&y.city?", ":""}${y.city||""}`]}),u.jsxs("p",{style:Re.vacantDetail,children:[u.jsx("strong",{children:"Spots Available:"})," ",y.requiredPersons-(((C=y.applicants)==null?void 0:C.length)||0)," / ",y.requiredPersons]})]}),u.jsxs("div",{style:Re.warningBox,children:[u.jsx("div",{style:Re.warningIcon,children:""}),u.jsxs("span",{style:Re.warningText,children:[u.jsx("strong",{style:{color:"#ff4444"},children:"Warning:"})," Raise request only if you trust the Vacant creator. Make sure that all the details provided are accurate."]})]}),u.jsxs("form",{onSubmit:E,children:[u.jsxs("div",{style:Re.gridRow,children:[u.jsxs("div",{children:[u.jsx("label",{style:Re.label,htmlFor:"count",children:"How many joining? *"}),u.jsxs("div",{style:Re.numberInputContainer,children:[u.jsx("input",{id:"count",name:"count",type:"number",min:"1",max:"20",value:i.count,onChange:Q,placeholder:"Enter Count",style:Re.numberInputField,disabled:m,onBlur:()=>w("count")}),u.jsxs("div",{style:Re.arrowButtons,children:[u.jsx("button",{type:"button",style:{...Re.arrowBtn,borderTopRightRadius:"var(--radius)"},onClick:()=>{r(I=>({...I,count:Math.min(20,Math.max(1,parseInt(I.count||0)+1)).toString()})),l.count&&c(I=>({...I,count:""}))},disabled:m,children:""}),u.jsx("button",{type:"button",style:{...Re.arrowBtn,borderBottomRightRadius:"var(--radius)"},onClick:()=>{r(I=>({...I,count:Math.max(1,parseInt(I.count||0)-1).toString()})),l.count&&c(I=>({...I,count:""}))},disabled:m,children:""})]})]}),l.count&&u.jsx("div",{style:Re.errorMessage,children:l.count})]}),u.jsxs("div",{children:[u.jsx("label",{style:Re.label,htmlFor:"gender",children:"Gender *"}),u.jsxs("select",{id:"gender",name:"gender",value:i.gender,onChange:Q,style:Re.input,disabled:m,onBlur:()=>w("gender"),children:[u.jsx("option",{value:"",children:"Select Gender"}),u.jsx("option",{value:"Male",children:"Male"}),u.jsx("option",{value:"Female",children:"Female"}),u.jsx("option",{value:"Mixed",children:"Mixed"}),u.jsx("option",{value:"Others",children:"Others"})]}),l.gender&&u.jsx("div",{style:Re.errorMessage,children:l.gender})]})]}),u.jsx("label",{style:Re.label,htmlFor:"message",children:"Description"}),u.jsx("textarea",{id:"message",name:"message",value:i.message,onChange:Q,placeholder:"Tell something about your group... (optional)",style:{...Re.input,minHeight:"80px",fontFamily:"inherit",resize:"vertical"},disabled:m}),u.jsx("label",{style:Re.label,htmlFor:"tagUsers",children:"Tag Users (if more than 1)"}),u.jsx("input",{id:"tagUsers",name:"tagUsers",type:"text",value:i.tagUsers,onChange:Q,placeholder:"@username1, @username2 (optional)",style:Re.input,disabled:m}),s&&u.jsx("div",{style:Re.errorMessage,children:s}),l.vacantId&&u.jsx("div",{style:Re.errorMessage,children:l.vacantId}),l.submit&&u.jsx("div",{style:Re.errorMessage,children:l.submit}),d&&u.jsx("div",{style:Re.successMessage,children:d}),u.jsx("div",{style:Re.btnArea,children:u.jsx("button",{type:"submit",style:{...Re.submitBtn,opacity:m?.6:1,cursor:m?"not-allowed":"pointer"},disabled:m,children:m?"Submitting...":"Submit Request"})})]})]})}):u.jsxs("div",{style:Re.container,children:[u.jsxs("div",{style:Re.formBox,children:[u.jsx("h2",{style:Re.title,children:"Authentication Required"}),u.jsx("p",{style:{color:"#fff",textAlign:"center"},children:"Please login to raise a request"}),u.jsx("button",{style:Re.submitBtn,onClick:()=>M(!0),children:"Login"})]}),A&&u.jsx("div",{style:Re.loginOverlay,onClick:()=>M(!1),children:u.jsxs("div",{style:Re.loginModal,onClick:I=>I.stopPropagation(),children:[u.jsx("button",{style:Re.closeLoginButton,onClick:()=>M(!1),children:""}),u.jsx(nh,{onSuccess:()=>M(!1)})]})})]})}const Re={container:{minHeight:"100vh",background:"#0a0a0a",padding:"20px",display:"flex",justifyContent:"center",alignItems:"center"},formBox:{background:"#1a1a1a",border:"1px solid #333",borderRadius:"12px",padding:"32px",maxWidth:"600px",width:"100%"},backBtn:{background:"transparent",border:"1px solid #333",color:"#ffd700",padding:"8px 16px",borderRadius:"8px",cursor:"pointer",marginBottom:"20px",fontWeight:"bold",transition:"all 0.3s ease",fontSize:"15px"},title:{color:"#ffd700",marginBottom:"24px",fontSize:"24px",marginTop:0},vacantInfo:{background:"#111",border:"1px solid #333",borderRadius:"8px",padding:"16px",marginBottom:"24px"},vacantTitle:{color:"#ffd700",fontSize:"18px",marginTop:0,marginBottom:"8px"},vacantDetail:{color:"#ccc",fontSize:"14px",margin:"4px 0"},gridRow:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"16px"},label:{display:"block",marginTop:"16px",marginBottom:"6px",color:"#fff",fontWeight:"500",fontSize:"14px"},input:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #333",background:"#111",color:"#fff",fontSize:"14px",boxSizing:"border-box",transition:"border-color 0.2s"},errorMessage:{background:"rgba(255, 107, 107, 0.1)",color:"#ff6b6b",padding:"12px 16px",borderRadius:"8px",marginTop:"16px",fontSize:"14px",border:"1px solid rgba(255, 107, 107, 0.3)",display:"block"},successMessage:{color:"#4ade80",fontSize:"14px",marginTop:"16px",padding:"12px",background:"rgba(74, 222, 128, 0.1)",border:"1px solid rgba(74, 222, 128, 0.3)",borderRadius:"8px",textAlign:"center",fontWeight:"500"},btnArea:{marginTop:"24px",textAlign:"center"},submitBtn:{background:"#ffd700",color:"#0a0a0a",border:"none",padding:"14px 40px",borderRadius:"8px",cursor:"pointer",fontWeight:"600",fontSize:"16px",transition:"all 0.3s ease",width:"100%"},numberInputContainer:{position:"relative",width:"120px"},numberInputField:{padding:"10px 32px 10px 12px",background:"#111",border:"1px solid #333",borderRadius:"8px",color:"#fff",fontSize:"14px",fontFamily:"inherit",transition:"border-color 0.2s",width:"100%",textAlign:"center",boxSizing:"border-box"},arrowButtons:{position:"absolute",right:"1px",top:"1px",bottom:"1px",width:"30px",display:"flex",flexDirection:"column"},arrowBtn:{flex:1,background:"#ffd700",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",color:"#0a0a0a",fontWeight:"bold",transition:"opacity 0.2s"},warningBox:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"20px",display:"flex",alignItems:"flex-start",gap:"10px"},warningIcon:{fontSize:"18px",flexShrink:0},warningText:{color:"#ffd700",fontSize:"14px",lineHeight:"1.4"}},XS=async(t,e,n,i,r,s,a,l=null)=>{try{console.log("Creating chat for request:",t),console.log("Creator:",n,i),console.log("Requester:",r,s),console.log("Request data:",l);const c=In(Pt(Ge,"chats"),Cn("requestId","==",t)),d=await ti(c);if(!d.empty){const y=d.docs[0].id;return console.log("Chat already exists with ID:",y),y}const p={requestId:t,vacantId:e,vacantTitle:a,participants:[n,r],participantNames:{[n]:i,[r]:s},creatorUid:n,requesterUid:r,lastMessage:"",lastMessageTime:$i(),createdAt:$i(),requestDetails:l?{numberOfPersons:l.numberOfPersons||1,gender:l.gender||"Not specified",message:l.message||"",tagUsers:l.tagUsers||""}:null},m=await tc(Pt(Ge,"chats"),p);console.log("Chat created successfully with ID:",m.id),console.log("Chat data:",p);let f=" Chat started! You can now communicate about this vacant.";l&&(f+=`

 Request Details:
 ${l.numberOfPersons} person(s)
 Gender: ${l.gender}`,l.message&&(f+=`
 Message: "${l.message}"`),l.tagUsers&&(f+=`
 Tagged: ${l.tagUsers}`));try{await Wm(m.id,"system",f),console.log("Initial message sent successfully")}catch(y){console.error("Error sending initial message:",y)}return m.id}catch(c){throw console.error("Error creating chat:",c),c}},Wm=async(t,e,n,i="User")=>{try{if(!n.trim())throw new Error("Message cannot be empty");const r={chatId:t,senderUid:e,senderName:i,text:n.trim(),createdAt:$i(),read:!1},s=await tc(Pt(Ge,"chats",t,"messages"),r);if(await ro(ei(Ge,"chats",t),{lastMessage:n.trim(),lastMessageTime:$i()}),e!=="system")try{const a=await $m(ei(Ge,"chats",t));if(a.exists()){const l=a.data(),c=l.participants.find(d=>d!==e);c&&await La(c,`You got a message from ${i} for "${l.vacantTitle}"`,"info",{chatId:t,senderUid:e,senderName:i,vacantTitle:l.vacantTitle,vacantId:l.vacantId,creatorUid:l.creatorUid,messageText:n.trim().substring(0,50)+(n.trim().length>50?"...":"")})}}catch(a){console.error("Error sending message notification:",a)}return console.log("Message sent:",s.id),s.id}catch(r){throw console.error("Error sending message:",r),r}},nl=(t,e)=>{try{const n=In(Pt(Ge,"chats",t,"messages"),US("createdAt","asc"));return BS(n,r=>{const s=[];r.forEach(a=>{s.push({id:a.id,...a.data()})}),e(s)})}catch(n){throw console.error("Error subscribing to messages:",n),n}},JS=async t=>{try{const e=await $m(ei(Ge,"chats",t));return e.exists()?{id:e.id,...e.data()}:(console.log("Chat not found"),null)}catch(e){throw console.error("Error getting chat:",e),e}},No=async t=>{try{console.log("Looking for chat with requestId:",t);const e=In(Pt(Ge,"chats"),Cn("requestId","==",t),hk(1)),n=await ti(e);if(console.log("Found chats:",n.size),!n.empty){const i=n.docs[0],r={id:i.id,...i.data()};return console.log("Chat found:",r),r}return console.log("No chat found for request:",t),null}catch(e){throw console.error("Error getting chat by request ID:",e),e}},ZS="/HanggOut/assets/send-CQjPklN-.png";function Qk(){var U,te;const t=Rn(),[e]=$g(),[n,i]=N.useState("received"),[r,s]=N.useState([]),[a,l]=N.useState([]),[c,d]=N.useState(!0),[p,m]=N.useState(!0),[f,y]=N.useState(!1),[S,D]=N.useState(null),[j,T]=N.useState(null),[x,A]=N.useState(""),[M,$]=N.useState([]),[Q,w]=N.useState(!1),[b,E]=N.useState(null),[C,I]=N.useState(!1),[R,v]=N.useState({show:!1,message:"",type:""}),Z=N.useRef(null),se=N.useRef(null);N.useEffect(()=>{const L=JSON.parse(localStorage.getItem("hanggOutUser")||"null");E(L),L&&re();const J=e.get("openChat");J&&L&&W(J)},[e]),N.useEffect(()=>{F()},[M]),N.useEffect(()=>()=>{se.current&&se.current()},[]);const F=()=>{var L;(L=Z.current)==null||L.scrollIntoView({behavior:"smooth"})},re=async()=>{const L=JSON.parse(localStorage.getItem("hanggOutUser")||"null");if(!L){d(!1),m(!1),t("/login");return}try{d(!0);const J=await Hk(L.uid);console.log("Raw received requests:",J);const le=(await Promise.all(J.map(async ae=>{try{if(!ae||!ae.id)return console.warn("Invalid request found:",ae),null;const ot=await _s(ae.vacantId);let $e=!1;ae.status==="accepted"&&($e=!!await No(ae.id));const bt={...ae,vacant:ot,chatExists:$e};return console.log("Enriched received request:",bt),bt}catch(ot){return console.error("Error enriching received request:",ot,ae),ae}}))).filter(ae=>ae!==null);console.log("Valid received requests:",le),s(le)}catch(J){console.error("Error loading received requests:",J)}finally{d(!1)}try{m(!0);const J=await KS(L.uid);console.log("Raw sent requests:",J);const le=(await Promise.all(J.map(async ae=>{try{if(!ae||!ae.id)return console.warn("Invalid sent request found:",ae),null;const ot=await _s(ae.vacantId);let $e=!1;ae.status==="accepted"&&($e=!!await No(ae.id));const bt={...ae,vacant:ot,chatExists:$e};return console.log("Enriched sent request:",bt),bt}catch(ot){return console.error("Error enriching sent request:",ot,ae),ae}}))).filter(ae=>ae!==null);console.log("Valid sent requests:",le),l(le)}catch(J){console.error("Error loading sent requests:",J)}finally{m(!1)}},W=async L=>{try{const J=await JS(L);if(J){const fe={id:J.requestId,chatExists:!0,vacant:{title:J.vacantTitle},requesterName:J.participantNames[J.requesterUid],requesterUid:J.requesterUid};D(fe),T(L),y(!0),se.current&&se.current(),se.current=nl(L,le=>{$(le)})}}catch(J){console.error("Error opening chat:",J)}},de=async L=>{var J,fe,le;try{console.log("Accepting request:",L),await cd(L.id,"accepted"),console.log("Request status updated to accepted"),await La(L.requesterUid,`Your request to join "${((J=L.vacant)==null?void 0:J.title)||"the vacant"}" has been accepted! `,"success",{requestId:L.id,vacantId:L.vacantId,vacantTitle:(fe=L.vacant)==null?void 0:fe.title});const ae=await _s(L.vacantId);if(ae){const bt=ae.applied||0,Fn=bt+L.numberOfPersons;await ro(ei(Ge,"vacants",L.vacantId),{applied:Fn}),console.log("Updated vacant applied count from",bt,"to",Fn)}console.log("Creating chat with params:",{requestId:L.id,vacantId:L.vacantId,creatorUid:b.uid,creatorName:b.name||b.email,requesterUid:L.requesterUid,requesterName:L.requesterName});const ot=await XS(L.id,L.vacantId,b.uid,b.name||b.email,L.requesterUid,L.requesterName,((le=L.vacant)==null?void 0:le.title)||"Vacant",{numberOfPersons:L.numberOfPersons,gender:L.gender,message:L.message,tagUsers:L.tagUsers});console.log(" Chat created successfully with ID:",ot);const $e=await No(L.id);$e?console.log(" Chat verified in database:",$e.id):console.error(" Chat not found after creation!"),await re(),ye(" Request accepted! Chat created successfully.","success")}catch(ae){console.error(" Error accepting request:",ae),console.error("Error stack:",ae.stack),ye(" Failed to accept request: "+ae.message,"error")}},Ae=async L=>{var J,fe;if(confirm("Are you sure you want to reject this request?"))try{const le=r.find(ae=>ae.id===L);await cd(L,"rejected"),le&&await La(le.requesterUid,`Your request to join "${((J=le.vacant)==null?void 0:J.title)||"the vacant"}" has been declined.`,"info",{requestId:L,vacantId:le.vacantId,vacantTitle:(fe=le.vacant)==null?void 0:fe.title}),await re(),ye("Request rejected","info")}catch(le){console.error("Error rejecting request:",le),ye("Failed to reject request","error")}},at=async L=>{try{const J=await No(L.id);if(!J){ye("Chat not found. Please try accepting the request again.","error");return}D(L),T(J.id),y(!0),se.current&&se.current(),se.current=nl(J.id,fe=>{$(fe)})}catch(J){console.error("Error opening chat:",J),ye("Failed to open chat: "+J.message,"error")}},O=async()=>{if(!(!x.trim()||!j||Q)){w(!0);try{await Wm(j,b.uid,x.trim(),b.name||b.email),A("")}catch(L){console.error("Error sending message:",L),ye("Failed to send message","error")}finally{w(!1)}}},ye=(L,J)=>{v({show:!0,message:L,type:J}),setTimeout(()=>{v({show:!1,message:"",type:""})},4e3)},dt=L=>{L.key==="Enter"&&!L.shiftKey&&(L.preventDefault(),O())},ht=()=>{se.current&&(se.current(),se.current=null),y(!1),D(null),T(null),$([]),A("")},qn=L=>{if(!L)return"";let J;L.toDate?J=L.toDate():L.seconds?J=new Date(L.seconds*1e3):J=new Date(L);const le=new Date-J,ae=Math.floor(le/6e4),ot=Math.floor(le/36e5),$e=Math.floor(le/864e5);if(ae<1)return"Just now";if(ae<60)return`${ae}m ago`;if(ot<24)return`${ot}h ago`;if($e===1){const bt=ot-$e*24;return bt>0?`1d ${bt}h ago`:"1d ago"}if($e<7){const bt=ot-$e*24;return bt>0?`${$e}d ${bt}h ago`:`${$e}d ago`}return J.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})},Hn=({request:L,type:J})=>{var P,B,K,Ee,ve,ue,xe;const fe=L&&L.id,le=L.numberOfPersons||0,ae=L.gender||"Not specified",ot=L.requesterName||"Unknown User",$e=((P=L.vacant)==null?void 0:P.title)||L.vacantTitle||"Vacant Title",bt=((B=L.vacant)==null?void 0:B.location)||((K=L.vacant)==null?void 0:K.area)||"Unknown Location",Fn=((Ee=L.vacant)==null?void 0:Ee.city)||"";return fe?u.jsxs("div",{style:{...oe.requestCard,...L.status==="accepted"?oe.requestCardAccepted:L.status==="rejected"?oe.requestCardRejected:{}},children:[u.jsxs("div",{style:oe.requestInfo,children:[u.jsx("div",{style:oe.vacantTitle,children:$e}),u.jsxs("div",{style:oe.requestDetails,children:[u.jsxs("span",{children:[u.jsx("img",{src:ih,alt:"people",style:oe.locationIcon})," ",le>0?`${le} person(s)`:"No count specified"]}),u.jsxs("span",{children:[u.jsx("img",{src:Km,alt:"gender",style:oe.locationIcon})," ",ae]})]}),u.jsxs("div",{style:oe.requestLocation,children:[u.jsx("img",{src:Or,alt:"location",style:oe.locationIconSpecial}),u.jsxs("span",{children:[bt,Fn?`, ${Fn}`:""]})]}),u.jsxs("div",{style:oe.requestMeta,children:[J==="received"&&u.jsxs("span",{style:{color:"#999"},children:["From: ",ot]}),J==="sent"&&u.jsxs("span",{style:{color:"#999",fontSize:"16px"},children:["To: ",((ve=L.vacant)==null?void 0:ve.creatorName)||"Creator"]}),L.tagUsers&&L.tagUsers.trim()&&u.jsx("span",{style:{color:"#ffd700"},children:L.tagUsers}),u.jsx("span",{style:{color:"#666",fontSize:"14px"},children:qn(L.createdAt)})]})]}),u.jsxs("div",{style:oe.requestActions,children:[u.jsxs("div",{style:oe.timestampContainer,children:[u.jsx("img",{src:Gr,alt:"clock",style:oe.clockIcon}),u.jsxs("div",{style:oe.timeDetails,children:[u.jsx("span",{style:{color:"#ffd700",fontSize:"18px",fontWeight:"bold"},children:((ue=L.vacant)==null?void 0:ue.time)||"TBD"}),u.jsx("span",{style:{color:"#ffd700",fontSize:"14px"},children:(xe=L.vacant)!=null&&xe.date?new Date(L.vacant.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"Date TBD"})]})]}),L.status==="accepted"&&u.jsxs("button",{style:oe.btnChat,onClick:()=>at(L),onMouseEnter:ge=>{const Se=ge.currentTarget.querySelector(".fill-effect");Se&&(Se.style.height="100%"),ge.currentTarget.style.color="#ffd700"},onMouseLeave:ge=>{const Se=ge.currentTarget.querySelector(".fill-effect");Se&&(Se.style.height="0"),ge.currentTarget.style.color="#0a0a0a"},children:[u.jsx("div",{className:"fill-effect",style:oe.chatFillEffect}),u.jsxs("span",{style:{position:"relative",zIndex:1},children:[u.jsx("img",{src:Rl,alt:"chat",style:oe.locationIcon})," Open Chat"]})]}),u.jsxs("button",{style:oe.btnView,onClick:()=>t(`/vacant/${L.vacantId}`),onMouseEnter:ge=>{const Se=ge.currentTarget.querySelector(".fill-effect");Se&&(Se.style.height="100%"),ge.currentTarget.style.color="#0a0a0a"},onMouseLeave:ge=>{const Se=ge.currentTarget.querySelector(".fill-effect");Se&&(Se.style.height="0"),ge.currentTarget.style.color="#fff"},children:[u.jsx("div",{className:"fill-effect",style:oe.viewFillEffect}),u.jsx("span",{style:{position:"relative",zIndex:1},children:"View Vacant"})]}),u.jsx("div",{style:oe.statusContainer,children:u.jsx("span",{style:oe[`status${L.status.charAt(0).toUpperCase()+L.status.slice(1)}`],children:L.status.charAt(0).toUpperCase()+L.status.slice(1)})}),J==="received"&&L.status==="pending"&&u.jsxs(u.Fragment,{children:[u.jsx("button",{style:oe.btnAccept,onClick:()=>de(L),onMouseEnter:ge=>{ge.currentTarget.style.transform="scale(1.05)"},onMouseLeave:ge=>{ge.currentTarget.style.transform="scale(1)"},children:" Accept"}),u.jsx("button",{style:oe.btnReject,onClick:()=>Ae(L.id),onMouseEnter:ge=>{ge.currentTarget.style.animation="shake 0.5s"},onMouseLeave:ge=>{ge.currentTarget.style.animation="none"},children:" Reject"})]})]})]}):u.jsx("div",{style:{...oe.requestCard,borderColor:"#ff4444"},children:u.jsxs("div",{style:oe.requestInfo,children:[u.jsx("div",{style:{...oe.vacantTitle,color:"#ff4444"},children:" Invalid Request Data"}),u.jsx("div",{style:{color:"#ff4444",fontSize:"14px"},children:"This request appears to be corrupted or incomplete. Please try refreshing the page."})]})})};return u.jsxs("div",{style:oe.container,children:[R.show&&u.jsx("div",{style:{...oe.notification,...R.type==="success"?oe.notificationSuccess:R.type==="error"?oe.notificationError:oe.notificationInfo},children:R.message}),u.jsxs("div",{style:oe.contentWrapper,children:[u.jsx("div",{style:oe.header,children:u.jsx("h2",{style:oe.pageTitle,children:"Your Requests"})}),u.jsx("div",{style:oe.tabContent,children:p?u.jsxs("div",{style:oe.loading,children:[u.jsxs("div",{style:oe.loadingWrapper,children:[u.jsx("img",{src:za,alt:"loading",style:oe.loading1}),u.jsx("img",{src:Ba,alt:"loading",style:oe.loading2})]}),u.jsx("p",{style:oe.loadingText,children:"Loading requests..."})]}):a.length===0?u.jsxs("div",{style:oe.emptyState,children:[u.jsx("img",{src:Hp,alt:"search",style:oe.emptyIcon}),u.jsx("p",{children:"No sent requests yet"}),u.jsx("p",{style:oe.emptySubtext,children:"Apply to vacants to see your requests here"})]}):a.map(L=>u.jsx(Hn,{request:L,type:"sent"},L.id))})]}),f&&u.jsx("div",{style:oe.chatOverlay,onClick:ht,children:u.jsxs("div",{style:oe.chatModal,onClick:L=>L.stopPropagation(),children:[u.jsxs("div",{style:oe.chatHeader,children:[u.jsxs("div",{children:[u.jsxs("div",{style:oe.chatTitle,children:["Chat with ",(S==null?void 0:S.requesterUid)===(b==null?void 0:b.uid)?(U=S==null?void 0:S.vacant)==null?void 0:U.creatorName:S==null?void 0:S.requesterName]}),u.jsx("div",{style:oe.chatSubtitle,children:(te=S==null?void 0:S.vacant)==null?void 0:te.title})]}),u.jsx("button",{style:oe.closeChatButton,onClick:ht,children:""})]}),u.jsxs("div",{style:oe.chatMessages,children:[M.length===0?u.jsxs("div",{style:oe.noChatMessages,children:[u.jsx("img",{src:Rl,alt:"chat",style:oe.locationIcon}),u.jsx("p",{children:"No messages yet. Start the conversation!"})]}):M.map(L=>{const J=L.senderUid===(b==null?void 0:b.uid),fe=L.senderUid==="system";return u.jsxs("div",{style:{...oe.chatMessage,...fe?oe.chatMessageSystem:J?oe.chatMessageSent:oe.chatMessageReceived},children:[!fe&&!J&&u.jsx("div",{style:oe.messageSender,children:L.senderName}),u.jsx("div",{style:oe.messageText,children:L.text}),u.jsx("div",{style:oe.messageTime,children:qn(L.createdAt)})]},L.id)}),u.jsx("div",{ref:Z})]}),u.jsxs("div",{style:oe.chatInputArea,children:[u.jsx("input",{type:"text",style:oe.chatInput,placeholder:"Type a message...",value:x,onChange:L=>A(L.target.value),onKeyPress:dt,disabled:Q}),u.jsx("button",{style:{...oe.chatSendBtn,opacity:Q||!x.trim()?.5:1},onClick:O,disabled:Q||!x.trim(),onMouseEnter:L=>{!Q&&x.trim()&&(L.currentTarget.style.transform="translateY(-4px)",L.currentTarget.style.boxShadow="0 10px 0 rgba(0,0,0,0.14)")},onMouseLeave:L=>{L.currentTarget.style.transform="translateY(0)",L.currentTarget.style.boxShadow="0 6px 0 rgba(0,0,0,0.12)"},onMouseDown:L=>{!Q&&x.trim()&&(L.currentTarget.style.transform="translateY(3px)",L.currentTarget.style.boxShadow="0 2px 0 rgba(0,0,0,0.06)")},onMouseUp:L=>{!Q&&x.trim()&&(L.currentTarget.style.transform="translateY(-4px)",L.currentTarget.style.boxShadow="0 10px 0 rgba(0,0,0,0.14)")},children:Q?"...":u.jsx("img",{src:ZS,alt:"send",style:{width:"30px",height:"30px",display:"block",margin:"0 auto"}})})]})]})})]})}const oe={container:{minHeight:"100vh",background:"var(--bg-black)",padding:"20px"},contentWrapper:{maxWidth:"1200px",margin:"0 auto"},header:{display:"flex",alignItems:"center",gap:"20px",marginBottom:"20px"},backButton:{background:"transparent",border:"1px solid #333",color:"#ffd700",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"600",transition:"all 0.3s ease"},pageTitle:{color:"#ffd700",fontSize:"28px",margin:0},tabs:{display:"flex",gap:"8px",margin:"20px 0",borderBottom:"2px solid #333"},tab:{padding:"12px 24px",cursor:"pointer",color:"#999",borderTopLeftRadius:"8px",borderTopRightRadius:"8px",background:"#1a1a1a",border:"1px solid #333",borderBottom:"none",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",fontWeight:"500"},tabActive:{color:"#0a0a0a",background:"#ffd700",borderColor:"#ffd700",fontWeight:"600"},badge:{background:"#ff4444",color:"#fff",padding:"2px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"700"},tabContent:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",paddingTop:"20px"},loading:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px",color:"#999",gridColumn:"1 / -1"},loadingWrapper:{position:"relative",width:"70px",height:"70px",marginBottom:"20px"},loading1:{position:"absolute",width:"90px",height:"90px",animation:"spin 2s linear infinite"},loading2:{position:"absolute",width:"75px",height:"75px",top:"7.5px",left:"7.5px",animation:"spin 2s linear infinite reverse"},loadingText:{color:"#ffd700",textAlign:"center",fontSize:"25px",fontWeight:"600"},emptyState:{textAlign:"center",padding:"60px 20px",color:"#999",gridColumn:"1 / -1"},emptyIcon:{width:"80px",height:"80px",display:"block",margin:"0 auto 20px auto",opacity:.5},emptySubtext:{fontSize:"14px",color:"#666",marginTop:"8px"},requestCard:{background:"#1a2332",padding:"24px 28px",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",transition:"all 0.3s ease",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"16px"},requestCardAccepted:{background:"rgba(40, 167, 69, 0.1)",border:"1px solid rgba(38, 227, 82, 0.3)",backdropFilter:"blur(10px)"},requestCardRejected:{background:"rgba(183, 29, 29, 0.39)",border:"1px solid rgba(248, 34, 34, 0.38)",backdropFilter:"blur(10px)"},requestInfo:{flex:1},vacantTitle:{color:"#ffd700",fontWeight:"600",fontSize:"22px",marginBottom:"16px"},requestDetails:{display:"flex",gap:"16px",color:"#aaa",fontSize:"18px",marginBottom:"8px",flexWrap:"wrap"},requestLocation:{display:"flex",color:"#aaa",fontSize:"18px",marginBottom:"20px",alignItems:"flex-start",gap:"6px"},locationIcon:{width:"16px",height:"16px",objectFit:"contain",marginRight:"6px",verticalAlign:"middle"},locationIconSpecial:{width:"16px",height:"16px",objectFit:"contain",marginRight:"6px",verticalAlign:"middle",marginTop:"7px"},requestMessage:{color:"#ccc",fontSize:"14px",marginBottom:"10px",fontStyle:"italic",padding:"8px 12px",background:"rgba(255, 214, 10, 0.05)",borderLeft:"3px solid #ffd700",borderRadius:"4px"},requestMeta:{display:"flex",alignItems:"center",gap:"12px",fontSize:"13px",flexWrap:"wrap"},timeDetails:{display:"flex",flexDirection:"column",alignItems:"center"},clockIcon:{width:"40px",height:"40px"},timestampContainer:{display:"flex",alignItems:"center",marginBottom:"8px",gap:"6px"},statusContainer:{display:"flex",justifyContent:"center",marginTop:"8px"},statuspending:{padding:"4px 10px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",textTransform:"uppercase",background:"rgba(255, 193, 7, 0.2)",color:"#ffd700",border:"1px solid #ffd700"},statusaccepted:{padding:"4px 10px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",textTransform:"uppercase",background:"rgba(40, 167, 69, 0.2)",color:"#28a745",border:"1px solid #28a745"},statusrejected:{padding:"4px 10px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",textTransform:"uppercase",background:"rgba(220, 53, 69, 0.2)",color:"#dc3545",border:"1px solid #dc3545"},requestActions:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"stretch",minWidth:"120px"},btnAccept:{padding:"10px 16px",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:"600",fontSize:"14px",background:"#ffd700",color:"#0a0a0a",transition:"all 0.3s ease"},btnReject:{padding:"10px 16px",borderRadius:"8px",cursor:"pointer",fontWeight:"600",fontSize:"14px",background:"transparent",color:"#ff4444",border:"1px solid #ff4444",transition:"all 0.3s ease"},btnChat:{padding:"10px 16px",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:"600",fontSize:"14px",background:"linear-gradient(135deg, #ffd700, #e6b300)",color:"#0a0a0a",boxShadow:"0 2px 8px rgba(255, 214, 10, 0.3)",transition:"color 0.3s ease",position:"relative",overflow:"hidden"},btnView:{padding:"10px 16px",borderRadius:"8px",cursor:"pointer",fontWeight:"600",fontSize:"14px",background:"#333",color:"#fff",border:"1px solid #555",transition:"color 0.3s ease",position:"relative",overflow:"hidden"},chatFillEffect:{position:"absolute",bottom:0,left:0,width:"100%",height:0,background:"#1a1a1a",transition:"height 0.3s ease",zIndex:0},viewFillEffect:{position:"absolute",bottom:0,left:0,width:"100%",height:0,background:"#ffd700",transition:"height 0.3s ease",zIndex:0},chatOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},chatModal:{background:"#1a1a1a",border:"1px solid #333",borderRadius:"16px",width:"100%",maxWidth:"600px",maxHeight:"80vh",display:"flex",flexDirection:"column",overflow:"hidden",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},chatHeader:{padding:"20px",borderBottom:"1px solid #333",background:"linear-gradient(135deg, rgba(255, 214, 10, 0.1), rgba(255, 214, 10, 0.05))",display:"flex",justifyContent:"space-between",alignItems:"center"},chatTitle:{color:"#ffd700",fontWeight:"600",fontSize:"18px",marginBottom:"4px"},chatSubtitle:{color:"#999",fontSize:"13px"},closeChatButton:{background:"rgba(255, 255, 255, 0.1)",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",width:"36px",height:"36px",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},chatMessages:{flex:1,padding:"20px",overflowY:"auto",background:"#0a0a0a",display:"flex",flexDirection:"column",gap:"12px"},noChatMessages:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"#666",fontStyle:"italic"},chatMessage:{padding:"12px 16px",borderRadius:"12px",maxWidth:"75%",wordWrap:"break-word",animation:"fadeIn 0.3s ease"},chatMessageSent:{background:"#ffd700",color:"#0a0a0a",marginLeft:"auto",borderBottomRightRadius:"4px"},chatMessageReceived:{background:"#2a2a2a",color:"#fff",marginRight:"auto",borderBottomLeftRadius:"4px"},chatMessageSystem:{background:"rgba(255, 214, 10, 0.1)",color:"#ffd700",margin:"0 auto",textAlign:"center",fontSize:"13px",fontStyle:"italic",border:"1px dashed rgba(255, 214, 10, 0.3)"},messageSender:{fontSize:"11px",color:"#999",marginBottom:"4px",fontWeight:"600"},messageText:{marginBottom:"4px",lineHeight:"1.4"},messageTime:{fontSize:"10px",color:"#666",textAlign:"right"},chatInputArea:{padding:"20px",borderTop:"1px solid #333",display:"flex",gap:"12px",background:"#1a1a1a"},chatInput:{flex:1,padding:"12px 16px",borderRadius:"24px",border:"1px solid #333",background:"#0a0a0a",color:"#fff",fontSize:"14px",outline:"none",transition:"border-color 0.3s ease"},chatSendBtn:{padding:"6px 16px",background:"#ffd700",color:"#0a0a0a",border:"none",borderRadius:"24px",cursor:"pointer",fontWeight:"600",fontSize:"18px",transition:"all 0.3s ease",minWidth:"60px",boxShadow:"0 6px 0 rgba(0,0,0,0.12)"},backBtn:{background:"transparent",border:"1px solid #333",color:"#ffd700",padding:"8px 16px",borderRadius:"8px",cursor:"pointer",marginBottom:"20px",fontWeight:"bold",transition:"all 0.3s ease",fontSize:"15px"},notification:{position:"fixed",top:"20px",right:"20px",padding:"16px 24px",borderRadius:"12px",fontWeight:"600",fontSize:"14px",zIndex:9999,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",animation:"slideIn 0.3s ease",maxWidth:"400px"},notificationSuccess:{background:"#28a745",color:"#fff",border:"1px solid #1e7e34"},notificationError:{background:"#dc3545",color:"#fff",border:"1px solid #bd2130"},notificationInfo:{background:"#ffd700",color:"#0a0a0a",border:"1px solid #e6b300"}};function Kk(){var Hn;const{id:t}=vT(),e=Rn(),[n]=$g(),{user:i}=Xr(),[r,s]=N.useState(null),[a,l]=N.useState([]),[c,d]=N.useState(!0),[p,m]=N.useState(new Set),[f,y]=N.useState(!1),[S,D]=N.useState(null),[j,T]=N.useState(null),[x,A]=N.useState(""),[M,$]=N.useState([]),[Q,w]=N.useState(!1),[b,E]=N.useState({show:!1,message:"",type:""}),C=N.useRef(null),I=N.useRef(null);N.useEffect(()=>{i&&t&&v();const U=n.get("openChat");U&&i&&Z(U)},[t,i,n]),N.useEffect(()=>{const U=()=>{!document.hidden&&i&&t&&v()};return document.addEventListener("visibilitychange",U),()=>document.removeEventListener("visibilitychange",U)},[i,t]),N.useEffect(()=>{R()},[M]),N.useEffect(()=>()=>{I.current&&I.current()},[]);const R=()=>{var U;(U=C.current)==null||U.scrollIntoView({behavior:"smooth"})},v=async()=>{try{d(!0);const U=await _s(t);if(!U){console.error("Vacant not found");return}if(U.creatorUid!==(i==null?void 0:i.uid)){console.error("Not authorized to manage this vacant");return}if(s(U),U.status==="open"&&U.date&&U.time){let J;U.eventType==="repetitive"&&U.endDate&&U.time?J=new Date(`${U.endDate}T${U.time}`):J=new Date(`${U.date}T${U.time}`);const fe=new Date;console.log("Event DateTime:",J),console.log("Current DateTime:",fe),console.log("Event has passed:",J<=fe),J<=fe&&(U={...U,status:"close"},s(U))}const L=await yf(t)||[];l(L)}catch(U){console.error("Error loading vacant:",U)}finally{d(!1)}},Z=async U=>{try{const te=await JS(U);if(te){const L={id:te.requestId,requesterName:te.participantNames[te.requesterUid],requesterUid:te.requesterUid,vacant:{title:te.vacantTitle}};D(L),T(U),y(!0),I.current&&I.current(),I.current=nl(U,J=>{$(J)})}}catch(te){console.error("Error opening chat:",te)}},se=(U,te)=>{E({show:!0,message:U,type:te}),setTimeout(()=>{E({show:!1,message:"",type:""})},4e3)},F=async U=>{m(te=>new Set(te).add(U.id));try{if(await cd(U.id,"accepted"),await La(U.requesterUid,`Your request to join "${(r==null?void 0:r.title)||"the vacant"}" has been accepted! `,"success",{requestId:U.id,vacantId:t,vacantTitle:r==null?void 0:r.title}),r){const le=(r.applied||0)+(U.numberOfPersons||1),ae={applied:le};le>=r.requiredPersons?(ae.status="closed",console.log(" Vacant is now full! Closing vacant. Applied:",le,"Required:",r.requiredPersons),console.log(" Remaining slots:",r.requiredPersons-le)):console.log(" Vacant still has slots. Applied:",le,"Required:",r.requiredPersons,"Remaining:",r.requiredPersons-le),console.log(" Updating vacant with data:",ae),await ro(ei(Ge,"vacants",t),ae),console.log(" Vacant updated successfully")}const te=await XS(U.id,t,i.uid,i.name||i.email,U.requesterUid,U.requesterName,(r==null?void 0:r.title)||"Vacant",{numberOfPersons:U.numberOfPersons,gender:U.gender,message:U.message,tagUsers:U.tagUsers}),J=await yf(t)||[];l(J),await v(),D({...U,vacant:r}),T(te),y(!0),I.current&&I.current(),I.current=nl(te,fe=>{$(fe)}),se(" Request accepted! Chat opened.","success")}catch(te){console.error("Error accepting request:",te),se(" Failed to accept request: "+te.message,"error")}finally{m(te=>{const L=new Set(te);return L.delete(U.id),L})}},re=async U=>{m(te=>new Set(te).add(U));try{const te=a.find(fe=>fe.id===U);await cd(U,"rejected"),te&&await La(te.requesterUid,`Your request to join "${(r==null?void 0:r.title)||"the vacant"}" has been declined.`,"info",{requestId:U,vacantId:t,vacantTitle:r==null?void 0:r.title});const J=await yf(t)||[];l(J)}catch(te){console.error("Error rejecting request:",te)}finally{m(te=>{const L=new Set(te);return L.delete(U),L})}},W=async U=>{try{const te=await No(U.id);te&&(D({...U,vacant:r}),T(te.id),y(!0),I.current&&I.current(),I.current=nl(te.id,L=>{$(L)}))}catch(te){console.error("Error opening chat:",te),se(" Failed to open chat","error")}},de=async()=>{if(!(!x.trim()||!j||Q)){w(!0);try{await Wm(j,i.uid,x.trim(),i.name||i.email),A("")}catch(U){console.error("Error sending message:",U),se("Failed to send message","error")}finally{w(!1)}}},Ae=U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),de())},at=()=>{I.current&&(I.current(),I.current=null),y(!1),D(null),T(null),$([]),A("")},O=U=>{if(!U)return"";let te;U.toDate?te=U.toDate():U.seconds?te=new Date(U.seconds*1e3):te=new Date(U);const J=new Date-te,fe=Math.floor(J/6e4),le=Math.floor(J/36e5),ae=Math.floor(J/864e5);return fe<1?"Just now":fe<60?`${fe}m ago`:le<24?`${le}h ago`:ae<7?`${ae}d ago`:te.toLocaleDateString()};if(c)return u.jsx("div",{style:Y.container,children:u.jsxs("div",{style:Y.loadingContainer,children:[u.jsxs("div",{style:Y.loadingWrapper,children:[u.jsx("img",{src:za,alt:"loading",style:Y.loading1}),u.jsx("img",{src:Ba,alt:"loading",style:Y.loading2})]}),u.jsx("p",{style:Y.loadingText,children:"Loading vacant details..."})]})});if(!r)return u.jsx("div",{style:Y.container,children:u.jsxs("div",{className:"container",children:[u.jsxs("button",{style:Y.backBtn,onClick:()=>e("/my-vacants"),onMouseEnter:U=>{const te=U.currentTarget.querySelector(".fill-effect");te&&(te.style.width="100%"),U.currentTarget.style.color="var(--bg-black)"},onMouseLeave:U=>{const te=U.currentTarget.querySelector(".fill-effect");te&&(te.style.width="0"),U.currentTarget.style.color="var(--yellow)"},children:[u.jsx("div",{className:"fill-effect",style:Y.backBtnFillEffect}),u.jsx("span",{style:{position:"relative",zIndex:1},children:""})]}),u.jsx("div",{style:Y.errorState,children:u.jsx("p",{children:"Vacant not found or you don't have permission to manage it."})})]})});const ye=a||[],dt=ye.filter(U=>U.status!=="rejected"),qn=ye.filter(U=>U.status==="accepted").reduce((U,te)=>U+(te.numberOfPersons||1),0);return u.jsxs("div",{style:Y.container,children:[b.show&&u.jsx("div",{style:{...Y.notification,...b.type==="success"?Y.notificationSuccess:b.type==="error"?Y.notificationError:Y.notificationInfo},children:b.message}),u.jsxs("div",{className:"container",children:[u.jsxs("button",{style:Y.backBtn,onClick:()=>e("/my-vacants"),onMouseEnter:U=>{const te=U.currentTarget.querySelector(".fill-effect");te&&(te.style.width="100%"),U.currentTarget.style.color="var(--bg-black)"},onMouseLeave:U=>{const te=U.currentTarget.querySelector(".fill-effect");te&&(te.style.width="0"),U.currentTarget.style.color="var(--yellow)"},children:[u.jsx("div",{className:"fill-effect",style:Y.backBtnFillEffect}),u.jsx("span",{style:{position:"relative",zIndex:1},children:""})]}),u.jsxs("div",{style:Y.mainContent,children:[u.jsxs("div",{style:Y.leftPanel,children:[u.jsx("h1",{style:Y.title,children:r.title}),u.jsxs("div",{style:Y.detailsSection,children:[u.jsx("h3",{style:Y.sectionTitle,children:"Vacant Details"}),u.jsxs("div",{style:Y.detailItem,children:[u.jsx("img",{src:Or,alt:"location",style:Y.locationIcon}),u.jsx("span",{style:Y.detailLabel,children:"Location:"}),u.jsx("span",{style:Y.detailValue,children:r.location||`${r.area||"Unknown"}, ${r.city||"Unknown"}`})]}),u.jsxs("div",{style:Y.detailItem,children:[u.jsx("img",{src:Ua,alt:"date",style:Y.locationIcon}),u.jsx("span",{style:Y.detailLabel,children:"Date:"}),u.jsx("span",{style:Y.detailValue,children:r.eventType==="interval"||r.eventType==="repetitive"&&r.endDate?r.date===r.endDate?r.date?new Date(r.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"Not specified":`${r.date?new Date(r.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short"}):"Not specified"} - ${r.endDate?new Date(r.endDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"Not specified"}`:r.date?new Date(r.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"Not specified"})]}),u.jsxs("div",{style:Y.detailItem,children:[u.jsx("img",{src:Gr,alt:"time",style:Y.locationIcon}),u.jsx("span",{style:Y.detailLabel,children:"Time:"}),u.jsx("span",{style:Y.detailValue,children:r.eventType==="interval"||r.eventType==="repetitive"&&r.endTime?`${r.time||"Not specified"} - ${r.endTime}`:r.time||"Not specified"})]}),u.jsxs("div",{style:Y.detailItem,children:[u.jsx("img",{src:ih,alt:"people",style:Y.locationIcon}),u.jsx("span",{style:Y.detailLabel,children:"People Needed:"}),u.jsx("span",{style:Y.detailValue,children:r.requiredPersons})]}),u.jsxs("div",{style:Y.detailItem,children:[u.jsx("img",{src:Km,alt:"gender",style:Y.locationIcon}),u.jsx("span",{style:Y.detailLabel,children:"Gender:"}),u.jsx("span",{style:Y.detailValue,children:r.gender||"Not specified"})]}),u.jsxs("div",{style:Y.detailItem,children:[u.jsx("img",{src:WS,alt:"status",style:Y.locationIcon}),u.jsx("span",{style:Y.detailLabel,children:"Status:"}),u.jsx("span",{style:Y.detailValue,children:(()=>{if(qn>=r.requiredPersons||r.status!=="open")return"Closed";if(r.date&&r.time){let U;if(r.eventType==="repetitive"&&r.endDate&&r.time?U=new Date(`${r.endDate}T${r.time}`):U=new Date(`${r.date}T${r.time}`),U<=new Date)return"Closed"}return"Open"})()})]}),u.jsxs("div",{style:Y.detailItem,children:[u.jsx("img",{src:Gr,alt:"event type",style:Y.locationIcon}),u.jsx("span",{style:Y.detailLabel,children:"Event Type:"}),u.jsx("span",{style:Y.detailValue,children:r.eventType==="single"?"Single Event":r.eventType==="interval"?"Time Interval":r.eventType==="repetitive"?"Repetitive Event":"Not specified"})]}),r.description&&u.jsxs("div",{style:Y.descriptionSection,children:[u.jsx("span",{style:Y.detailLabel,children:"Description:"}),u.jsx("p",{style:Y.description,children:r.description})]})]})]}),u.jsxs("div",{style:Y.rightPanel,children:[u.jsxs("h3",{style:Y.sectionTitle,children:["Join Requests (",qn," people)"]}),u.jsxs("div",{style:Y.statsRow,children:[u.jsxs("div",{style:Y.statBox,children:[u.jsx("span",{style:Y.statNumber,children:qn}),u.jsx("span",{style:Y.statLabel,children:"Vacant(s) Filled"})]}),u.jsxs("div",{style:Y.statBox,children:[u.jsx("span",{style:Y.statNumber,children:Math.max(0,r.requiredPersons-qn)}),u.jsx("span",{style:Y.statLabel,children:"Remaining"})]})]}),dt.length===0?u.jsxs("div",{style:Y.emptyState,children:[u.jsx("p",{children:"No requests yet"}),u.jsx("p",{style:Y.emptySubtext,children:"People who request to join will appear here"})]}):u.jsx("div",{style:Y.applicantsList,children:dt.map((U,te)=>{var J;const L=p.has(U.id);return u.jsxs("div",{style:{...Y.applicantCard,...L?Y.applicantCardProcessing:{}},children:[L&&u.jsx("div",{style:Y.loadingOverlay,children:u.jsx("div",{style:Y.loadingSpinner,children:""})}),u.jsxs("div",{style:Y.applicantInfo,children:[u.jsx("p",{style:Y.applicantName,children:U.requesterName}),u.jsx("p",{style:Y.applicantEmail,children:U.requesterEmail}),u.jsxs("p",{style:Y.applicantDate,children:[u.jsxs("span",{style:{color:"#ccc"},children:["Gender: ",U.gender||"Not specified"]})," | Requested: ",new Date(((J=U.createdAt)==null?void 0:J.seconds)*1e3).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})]}),U.message&&U.message.trim()&&u.jsxs("p",{style:Y.applicantMessage,children:[u.jsx("strong",{children:"Message:"})," ",U.message]}),U.tagUsers&&U.tagUsers.trim()&&u.jsxs("p",{style:Y.applicantTagUsers,children:[u.jsx("strong",{children:"Tag Users:"})," ",U.tagUsers]})]}),u.jsxs("div",{style:Y.actionSection,children:[u.jsxs("p",{style:Y.peopleCount,children:[U.numberOfPersons||1," ",(U.numberOfPersons||1)===1?"Person":"People"]}),U.status==="accepted"?u.jsx("button",{style:Y.chatBtn,onClick:()=>W(U),"aria-label":"Open chat",onMouseEnter:fe=>{fe.currentTarget.style.transform="translateY(-4px)",fe.currentTarget.style.boxShadow="0 10px 0 rgba(0,0,0,0.14)"},onMouseLeave:fe=>{fe.currentTarget.style.transform="translateY(0)",fe.currentTarget.style.boxShadow="0 6px 0 rgba(0,0,0,0.12)"},onMouseDown:fe=>{fe.currentTarget.style.transform="translateY(3px)",fe.currentTarget.style.boxShadow="0 2px 0 rgba(0,0,0,0.06)"},onMouseUp:fe=>{fe.currentTarget.style.transform="translateY(-4px)",fe.currentTarget.style.boxShadow="0 10px 0 rgba(0,0,0,0.14)"},children:u.jsx("img",{src:Rl,alt:"chat",style:{width:"50px",height:"50px",objectFit:"contain"}})}):r.status!=="open"||(()=>{if(r.date&&r.time){let le;return r.eventType==="repetitive"&&r.endDate&&r.time?le=new Date(`${r.endDate}T${r.time}`):le=new Date(`${r.date}T${r.time}`),le<=new Date}return!1})()?u.jsx("div",{style:Y.closedStatus,children:"Vacant Closed"}):u.jsxs("div",{style:Y.actionButtons,children:[u.jsxs("button",{style:Y.acceptBtn,onClick:()=>F(U),disabled:L,onMouseEnter:le=>{if(!L){const ae=le.currentTarget.querySelector(".fill-effect");ae&&(ae.style.width="100%"),le.currentTarget.style.color="white"}},onMouseLeave:le=>{if(!L){const ae=le.currentTarget.querySelector(".fill-effect");ae&&(ae.style.width="0"),le.currentTarget.style.color="#4caf50"}},children:[u.jsx("div",{className:"fill-effect",style:Y.acceptFillEffect}),u.jsx("span",{style:{position:"relative",zIndex:1},children:"Accept"})]}),u.jsxs("button",{style:Y.rejectBtn,onClick:()=>re(U.id),disabled:L,onMouseEnter:le=>{if(!L){const ae=le.currentTarget.querySelector(".fill-effect");ae&&(ae.style.width="100%"),le.currentTarget.style.color="white"}},onMouseLeave:le=>{if(!L){const ae=le.currentTarget.querySelector(".fill-effect");ae&&(ae.style.width="0"),le.currentTarget.style.color="#f44336"}},children:[u.jsx("div",{className:"fill-effect",style:Y.rejectFillEffect}),u.jsx("span",{style:{position:"relative",zIndex:1},children:"Reject"})]})]})]})]},U.id||te)})})]})]})]}),f&&u.jsx("div",{style:Y.chatOverlay,onClick:at,children:u.jsxs("div",{style:Y.chatModal,onClick:U=>U.stopPropagation(),children:[u.jsxs("div",{style:Y.chatHeader,children:[u.jsxs("div",{children:[u.jsxs("div",{style:Y.chatTitle,children:["Chat with ",S==null?void 0:S.requesterName]}),u.jsx("div",{style:Y.chatSubtitle,children:(Hn=S==null?void 0:S.vacant)==null?void 0:Hn.title})]}),u.jsx("button",{style:Y.closeChatButton,onClick:at,children:""})]}),u.jsxs("div",{style:Y.chatMessages,children:[M.length===0?u.jsxs("div",{style:Y.noChatMessages,children:[u.jsx("img",{src:Rl,alt:"chat",style:{...Y.locationIcon,fontSize:"40px",marginBottom:"10px"}}),u.jsx("p",{children:"No messages yet. Start the conversation!"})]}):M.map(U=>{const te=U.senderUid===(i==null?void 0:i.uid),L=U.senderUid==="system";return u.jsxs("div",{style:{...Y.chatMessage,...L?Y.chatMessageSystem:te?Y.chatMessageSent:Y.chatMessageReceived},children:[!L&&!te&&u.jsx("div",{style:Y.messageSender,children:U.senderName}),u.jsx("div",{style:Y.messageText,children:U.text}),u.jsx("div",{style:Y.messageTime,children:O(U.createdAt)})]},U.id)}),u.jsx("div",{ref:C})]}),u.jsxs("div",{style:Y.chatInputArea,children:[u.jsx("input",{type:"text",style:Y.chatInput,placeholder:"Type a message...",value:x,onChange:U=>A(U.target.value),onKeyPress:Ae,disabled:Q}),u.jsx("button",{style:{...Y.chatSendBtn,opacity:Q||!x.trim()?.5:1},onClick:de,disabled:Q||!x.trim(),onMouseEnter:U=>{!Q&&x.trim()&&(U.currentTarget.style.transform="translateY(-4px)",U.currentTarget.style.boxShadow="0 10px 0 rgba(0,0,0,0.14)")},onMouseLeave:U=>{U.currentTarget.style.transform="translateY(0)",U.currentTarget.style.boxShadow="0 6px 0 rgba(0,0,0,0.12)"},onMouseDown:U=>{!Q&&x.trim()&&(U.currentTarget.style.transform="translateY(3px)",U.currentTarget.style.boxShadow="0 2px 0 rgba(0,0,0,0.06)")},onMouseUp:U=>{!Q&&x.trim()&&(U.currentTarget.style.transform="translateY(-4px)",U.currentTarget.style.boxShadow="0 10px 0 rgba(0,0,0,0.14)")},children:Q?"...":u.jsx("img",{src:ZS,alt:"send",style:{width:"24px",height:"24px",display:"block",margin:"0 auto"}})})]})]})})]})}const Y={container:{minHeight:"100vh",background:"var(--bg-black)",padding:"20px"},loadingText:{color:"var(--yellow)",textAlign:"center",fontSize:"25px",fontWeight:"600"},backBtn:{background:"transparent",color:"var(--yellow)",border:"2px solid var(--yellow)",padding:"10px 16px",borderRadius:"var(--radius)",cursor:"pointer",marginBottom:"20px",fontWeight:"bold",position:"relative",overflow:"hidden",transition:"color 0.3s ease"},backBtnFillEffect:{position:"absolute",top:0,left:0,width:0,height:"100%",background:"var(--yellow)",transition:"width 0.3s ease",zIndex:0},mainContent:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"32px",marginTop:"20px"},leftPanel:{background:"var(--bg-card)",border:"1px solid var(--border)",borderRadius:"var(--radius)",padding:"32px"},rightPanel:{background:"var(--bg-card)",border:"1px solid var(--border)",borderRadius:"var(--radius)",padding:"32px"},detailsSection:{marginTop:"24px"},detailItem:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"16px"},locationIcon:{width:"16px",height:"16px",objectFit:"contain",marginRight:"8px",verticalAlign:"middle",marginTop:"5px"},detailLabel:{color:"var(--gray)",fontSize:"14px",fontWeight:"500",minWidth:"80px"},detailValue:{color:"var(--white)",fontSize:"14px",flex:1},descriptionSection:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"20px"},description:{color:"var(--white)",fontSize:"14px",lineHeight:"1.5",margin:0,padding:"12px",background:"var(--bg-black)",border:"1px solid var(--border)",borderRadius:"var(--radius)"},title:{color:"var(--yellow)",margin:"0 0 8px 0",fontSize:"28px"},sectionTitle:{color:"var(--white)",fontSize:"20px",marginBottom:"16px"},statsRow:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",marginBottom:"24px"},statBox:{background:"var(--bg-black)",border:"1px solid var(--border)",borderRadius:"var(--radius)",padding:"20px",textAlign:"center"},statNumber:{display:"block",color:"var(--yellow)",fontSize:"32px",fontWeight:"bold",marginBottom:"8px"},statLabel:{display:"block",color:"var(--gray)",fontSize:"14px"},emptyState:{textAlign:"center",padding:"40px 20px",color:"var(--gray)"},emptySubtext:{fontSize:"14px",color:"#666",marginTop:"8px"},applicantsList:{display:"flex",flexDirection:"column",gap:"12px"},applicantCard:{display:"flex",alignItems:"center",gap:"12px",background:"var(--bg-black)",border:"1px solid var(--border)",borderRadius:"var(--radius)",padding:"12px",position:"relative"},applicantCardProcessing:{opacity:.6,pointerEvents:"none"},loadingOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"var(--radius)",zIndex:10},loadingSpinner:{fontSize:"24px",animation:"spin 1s linear infinite"},applicantInfo:{flex:1},applicantName:{color:"var(--white)",margin:"0 0 4px 0",fontWeight:"600",fontSize:"16px"},applicantEmail:{color:"var(--gray)",margin:"0 0 4px 0",fontSize:"14px"},applicantDate:{color:"#666",margin:0,fontSize:"12px"},applicantMessage:{color:"var(--white)",margin:"8px 0 0 0",fontSize:"14px",padding:"8px",background:"rgba(255, 214, 10, 0.1)",borderRadius:"4px"},applicantTagUsers:{color:"var(--yellow)",margin:"4px 0 0 0",fontSize:"14px"},actionSection:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},peopleCount:{color:"var(--yellow)",fontSize:"16px",fontWeight:"bold",margin:0,textAlign:"center"},actionButtons:{display:"flex",gap:"8px"},chatBtn:{background:"transparent",border:"none",padding:"6px",width:"52px",height:"52px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"transform 0.15s ease, box-shadow 0.12s ease",boxShadow:"0 6px 0 rgba(0,0,0,0.12)"},acceptBtn:{background:"transparent",color:"#4caf50",border:"2px solid #4caf50",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600",position:"relative",overflow:"hidden",transition:"color 0.3s ease"},rejectBtn:{background:"transparent",color:"#f44336",border:"2px solid #f44336",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600",position:"relative",overflow:"hidden",transition:"color 0.3s ease"},acceptFillEffect:{position:"absolute",top:0,left:0,width:0,height:"100%",background:"#4caf50",transition:"width 0.3s ease",zIndex:0},rejectFillEffect:{position:"absolute",top:0,left:0,width:0,height:"100%",background:"#f44336",transition:"width 0.3s ease",zIndex:0},errorState:{textAlign:"center",padding:"40px 20px",color:"var(--gray)",background:"var(--bg-card)",border:"1px solid var(--border)",borderRadius:"var(--radius)"},chatOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},chatModal:{background:"var(--bg-card)",border:"1px solid var(--border)",borderRadius:"16px",width:"100%",maxWidth:"600px",maxHeight:"80vh",display:"flex",flexDirection:"column",overflow:"hidden",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},chatHeader:{padding:"20px",borderBottom:"1px solid var(--border)",background:"linear-gradient(135deg, rgba(255, 214, 10, 0.1), rgba(255, 214, 10, 0.05))",display:"flex",justifyContent:"space-between",alignItems:"center"},chatTitle:{color:"var(--yellow)",fontWeight:"600",fontSize:"18px",marginBottom:"4px"},chatSubtitle:{color:"var(--gray)",fontSize:"13px"},closeChatButton:{background:"rgba(255, 255, 255, 0.1)",border:"none",color:"var(--white)",fontSize:"24px",cursor:"pointer",width:"36px",height:"36px",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},chatMessages:{flex:1,padding:"20px",overflowY:"auto",background:"var(--bg-black)",display:"flex",flexDirection:"column",gap:"12px"},noChatMessages:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--gray)",fontStyle:"italic"},chatMessage:{padding:"12px 16px",borderRadius:"12px",maxWidth:"75%",wordWrap:"break-word"},chatMessageSent:{background:"var(--yellow)",color:"var(--bg-black)",marginLeft:"auto",borderBottomRightRadius:"4px"},chatMessageReceived:{background:"#2a2a2a",color:"var(--white)",marginRight:"auto",borderBottomLeftRadius:"4px"},chatMessageSystem:{background:"rgba(255, 214, 10, 0.1)",color:"var(--yellow)",margin:"0 auto",textAlign:"center",fontSize:"13px",fontStyle:"italic",border:"1px dashed rgba(255, 214, 10, 0.3)"},messageSender:{fontSize:"11px",color:"var(--gray)",marginBottom:"4px",fontWeight:"600"},messageText:{marginBottom:"4px",lineHeight:"1.4"},messageTime:{fontSize:"10px",color:"#666",textAlign:"right"},chatInputArea:{padding:"20px",borderTop:"1px solid var(--border)",display:"flex",gap:"12px",background:"var(--bg-card)"},chatInput:{flex:1,padding:"12px 16px",borderRadius:"24px",border:"1px solid var(--border)",background:"var(--bg-black)",color:"var(--white)",fontSize:"14px",outline:"none",transition:"border-color 0.3s ease"},chatSendBtn:{padding:"6px 16px",background:"var(--yellow)",color:"var(--bg-black)",border:"none",borderRadius:"24px",cursor:"pointer",fontWeight:"600",fontSize:"18px",transition:"all 0.3s ease",minWidth:"45px",boxShadow:"0 6px 0 rgba(0,0,0,0.12)"},notification:{position:"fixed",top:"20px",right:"20px",padding:"16px 24px",borderRadius:"12px",fontWeight:"600",fontSize:"14px",zIndex:9999,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",maxWidth:"400px"},notificationSuccess:{background:"#28a745",color:"#fff",border:"1px solid #1e7e34"},notificationError:{background:"#dc3545",color:"#fff",border:"1px solid #bd2130"},notificationInfo:{background:"var(--yellow)",color:"var(--bg-black)",border:"1px solid #e6b300"},loadingContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"80vh",padding:"60px 20px"},loadingWrapper:{position:"relative",width:"90px",height:"90px",marginBottom:"20px"},loading1:{position:"absolute",width:"90px",height:"90px",animation:"spin 2s linear infinite"},loading2:{position:"absolute",width:"75px",height:"75px",top:"7.5px",left:"7.5px",animation:"spin 2s linear infinite reverse"}};function Wk(){return u.jsx(bC,{children:u.jsxs("div",{style:{minHeight:"100vh",background:"var(--bg-black)"},children:[u.jsx(Ck,{}),u.jsxs(mC,{children:[u.jsx(Yn,{path:"/",element:u.jsx(Vk,{})}),u.jsx(Yn,{path:"/login",element:u.jsx(S0,{to:"/",replace:!0})}),u.jsx(Yn,{path:"/create-vacant",element:u.jsx(Lk,{})}),u.jsx(Yn,{path:"/vacant/:id",element:u.jsx(Fk,{})}),u.jsx(Yn,{path:"/my-vacants",element:u.jsx(Gk,{})}),u.jsx(Yn,{path:"/manage-vacant/:id",element:u.jsx(Kk,{})}),u.jsx(Yn,{path:"/profile",element:u.jsx($k,{})}),u.jsx(Yn,{path:"/raise-request",element:u.jsx(Yk,{})}),u.jsx(Yn,{path:"/your-requests",element:u.jsx(Qk,{})}),u.jsx(Yn,{path:"*",element:u.jsx(S0,{to:"/",replace:!0})})]})]})})}wI.createRoot(document.getElementById("root")).render(u.jsx(hu.StrictMode,{children:u.jsx(Wk,{})}));
